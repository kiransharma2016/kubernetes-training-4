<!DOCTYPE html>
<!-- saved from url=(0138)https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453 -->
<html xmlns:cc="http://creativecommons.org/ns#" class="gr__medium_com"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=contain"><title>Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3</title><link rel="canonical" href="https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453"><meta name="title" content="Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3"><meta name="referrer" content="always"><meta name="description" content="Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster monitoring &amp; collecting logs, also we’ll run some test…"><meta name="theme-color" content="#000000"><meta property="og:title" content="Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3"><meta property="twitter:title" content="Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3"><meta property="og:url" content="https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*3Iop1-wqq7saYw10D__zRA.png"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster…"><meta name="twitter:description" content="Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster…"><meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/1*3Iop1-wqq7saYw10D__zRA.png"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@ratibor78"><meta property="author" content="Alexey Nizhegolenko"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="Alexey Nizhegolenko"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2019-03-01T20:23:23.801Z"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="18 min read"><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/340357f21453"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/340357f21453"><meta property="al:android:url" content="medium://p/340357f21453"><meta property="al:web:url" content="https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://medium.com/osd.xml"><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/340357f21453"><script async="" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/branch-latest.min.js"></script><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1200,"height":354,"url":"https://cdn-images-1.medium.com/max/2400/1*3Iop1-wqq7saYw10D__zRA.png"},"url":"https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453","dateCreated":"2019-03-01T20:23:23.801Z","datePublished":"2019-03-01T20:23:23.801Z","dateModified":"2019-03-04T08:27:30.220Z","headline":"Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3","name":"Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3","articleId":"340357f21453","thumbnailUrl":"https://cdn-images-1.medium.com/max/2400/1*3Iop1-wqq7saYw10D__zRA.png","keywords":["Tag:Kubernetes","Tag:Heapster","Tag:Dashboard","Tag:Fluentd","Tag:Logs","Publication:devopslinks","LockedPostSource:0","Elevated:false","LayerCake:0"],"author":{"@type":"Person","name":"Alexey Nizhegolenko","url":"https://medium.com/@ratibor78"},"creator":["Alexey Nizhegolenko"],"publisher":{"@type":"Organization","name":"DevOpsLinks","url":"https://medium.com/devopslinks","logo":{"@type":"ImageObject","width":53,"height":60,"url":"https://cdn-images-1.medium.com/max/106/1*8bmVi5Sq9m6n8sdGrp0y4w.png"}},"mainEntityOfPage":"https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453"}</script><meta name="parsely-link" content="https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453"><link rel="stylesheet" type="text/css" class="js-glyph-" id="glyph-8" href="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/m2.css"><link rel="stylesheet" href="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/main-branding-base.huWtzTgz9uzrHFhbrlFpbw.css"><script>!function(n,e){var t,o,i,c=[],f={passive:!0,capture:!0},r=new Date,a="pointerup",u="pointercancel";function p(n,c){t||(t=c,o=n,i=new Date,w(e),s())}function s(){o>=0&&o<i-r&&(c.forEach(function(n){n(o,t)}),c=[])}function l(t){if(t.cancelable){var o=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,o){function i(){p(t,o),r()}function c(){r()}function r(){e(a,i,f),e(u,c,f)}n(a,i,f),n(u,c,f)}(o,t):p(o,t)}}function w(n){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(e){n(e,l,f)})}w(n),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){c.push(n),s()}}(addEventListener,removeEventListener);</script><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga("create", "UA-24232453-2", "auto", {"allowLinker": true, "legacyCookieDomain": window.location.hostname}); ga("send", "pageview");</script><script async="" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/analytics.js"></script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/304/304/1*8bmVi5Sq9m6n8sdGrp0y4w.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/240/240/1*8bmVi5Sq9m6n8sdGrp0y4w.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/152/152/1*8bmVi5Sq9m6n8sdGrp0y4w.png"><link rel="apple-touch-icon" sizes="60x60" href="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_8bmVi5Sq9m6n8sdGrp0y4w(1).png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"></head><body itemscope="" class="postShowScreen browser-chrome os-mac is-withMagicUnderlines v-glyph v-glyph--m2 is-js" data-gr-c-s-loaded="true" data-action-scope="_actionscope_0"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main surface-container" id="container"><div class="butterBar butterBar--error" data-action-scope="_actionscope_1"></div><div class="surface" id="_obv.shell._surface_1553128610943" style="display: block; visibility: visible;"><div class="screenContent surface-content is-supplementalPostContentLoaded" data-used="true" data-action-scope="_actionscope_2"><canvas class="canvas-renderer" width="1920" height="1040"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"><div class="notesMarkers" data-action-scope="_actionscope_4"></div></div><div class="metabar u-clearfix js-metabar u-boxShadow4px12pxBlackLightest u-textColorTransparentWhiteDarker is-withBottomSection is-hiddenWhenMinimized metabar--affixed is-maximized"><div class="branch-journeys-top"></div><div class="js-metabarMiddle metabar-inner u-marginAuto u-maxWidth1032 u-flexCenter u-justifyContentSpaceBetween u-height65 u-xs-height56 u-paddingHorizontal20"><div class="metabar-block u-flex1 u-flexCenter"><div class="u-xs-hide js-metabarLogoLeft"><a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-fillTransparentBlackDarker u-flex0 u-flexCenter u-paddingTop0"><span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-flex0 u-flexCenter u-paddingTop0"><svg class="svgIcon-use" width="45" height="45"><path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"></path></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="u-xs-show js-metabarLogoLeft"><a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-fillTransparentBlackDarker u-flex0 u-flexCenter u-paddingTop0"><span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-flex0 u-flexCenter u-paddingTop0"><svg class="svgIcon-use" width="45" height="45"><path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"></path></svg></span><span class="u-textScreenReader">Homepage</span></a></div></div><div class="metabar-block u-flex0 u-flexCenter"><div class="u-flexCenter u-height65 u-xs-height56"><div class="buttonSet buttonSet--wide u-lineHeightInherit"><label class="button button--small button--chromeless button--withIcon button--withSvgIcon inputGroup u-sm-hide metabar-predictiveSearch u-baseColor--buttonNormal u-baseColor--placeholderNormal" title="Search DevOpsLinks"><span class="svgIcon svgIcon--search svgIcon--25px u-baseColor--iconLight"><svg class="svgIcon-use" width="25" height="25"><path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"></path></svg></span><input class="js-predictiveSearchInput textInput textInput--rounded textInput--darkText u-baseColor--textNormal textInput--transparent" type="search" placeholder="Search DevOpsLinks" required="true" data-collection-id="10d1a7495d39"></label><a class="button button--small button--chromeless u-sm-show is-inSiteNavBar u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--chromeless u-xs-top1" href="https://medium.com/devopslinks/search" title="Search" aria-label="Search"><span class="button-defaultState"><span class="svgIcon svgIcon--search svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"></path></svg></span></span></a><button class="button button--primary button--filled button--small button--circle button--chromeless is-inSiteNavBar u-accentColor--buttonNormal button--withIcon button--withSvgIcon button--activity js-notificationsButton u-marginRight16 u-xs-marginRight10 u-lineHeight0 is-active is-counter" title="Notifications" aria-label="Notifications" data-action="open-notifications"><span class="button-defaultState"><span class="svgIcon svgIcon--bell svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="-293 409 25 25"><path d="M-273.327 423.67l-1.673-1.52v-3.646a5.5 5.5 0 0 0-6.04-5.474c-2.86.273-4.96 2.838-4.96 5.71v3.41l-1.68 1.553c-.204.19-.32.456-.32.734V427a1 1 0 0 0 1 1h3.49a3.079 3.079 0 0 0 3.01 2.45 3.08 3.08 0 0 0 3.01-2.45h3.49a1 1 0 0 0 1-1v-2.59c0-.28-.12-.55-.327-.74zm-7.173 5.63c-.842 0-1.55-.546-1.812-1.3h3.624a1.92 1.92 0 0 1-1.812 1.3zm6.35-2.45h-12.7v-2.347l1.63-1.51c.236-.216.37-.522.37-.843v-3.41c0-2.35 1.72-4.356 3.92-4.565a4.353 4.353 0 0 1 4.78 4.33v3.645c0 .324.137.633.376.85l1.624 1.477v2.373z"></path></svg></span></span><span class="button-activeState"><span class="button-text">1</span><span class="u-textScreenReader">New notifications: 1</span></span></button><button class="button button--chromeless u-baseColor--buttonNormal is-inSiteNavBar js-userActions" aria-haspopup="true" data-action="open-userActions"><div class="avatar"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_c4hzLnwcwH1AWd4A1wh16g.jpeg" class="avatar-image avatar-image--icon" alt="Łukasz Andrzejewski"></div></button></div></div></div></div><div class="u-tintBgColor u-tintSpectrum "><div class="metabar-inner u-marginAuto u-maxWidth1032 u-paddingHorizontal20 js-metabarBottom"><nav role="navigation" class="metabar-block metabar-block--below u-overflowHidden u-flexCenter u-height54"><div class="u-flexCenter u-overflowHidden"><div class="u-flexCenter u-marginRight40"><a class="js-collectionLogoOrName u-uiTextBold u-fontSize20 u-lineHeightTightest u-flexCenter" href="https://medium.com/devopslinks?source=logo-ccd238d3cb52---10d1a7495d39"><img height="36" width="32" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_8bmVi5Sq9m6n8sdGrp0y4w.png" alt="DevOpsLinks"></a></div><div class="u-overflowHidden u-xs-hide"><ul class="u-textAlignLeft u-noWrap u-overflowX u-height80 u-marginTop40 js-collectionNavItems"><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="https://medium.com/devopslinks/aws/home">AWS</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="https://medium.com/devopslinks/gcp/home">GCP</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="https://medium.com/devopslinks/tagged/azure">Azure</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="https://medium.com/devopslinks/serverless/home">Serverless</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="https://medium.com/devopslinks/kubernetes/home">Kubernetes</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="https://medium.com/devopslinks/about">About Us</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="https://medium.com/devopslinks/google-kubernetes-engine-explain-like-im-five-1890e550c099">➡️K8S + GKE</a></li><span class="u-borderLeft1 u-paddingLeft12 u-baseColor--borderLight"></span><li class="metabar-navItem js-collectionNavItem  u-paddingLeft0 is-external u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darkenOnHover u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink" href="http://bit.ly/2GLAhIQ" rel="nofollow noopener" target="_blank">👨🏾‍💻 Learn Docker</a></li></ul></div></div></nav></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-tintBgColor  u-height119 u-xs-height110"></div><main role="main"><article class=" u-minHeight100vhOffset65 u-overflowHidden postArticle postArticle--full is-withAccentColors" lang="en"><div class="postArticle-content js-postField js-notesSource js-trackPostScrolls" data-post-id="340357f21453" data-source="post_page" data-collection-id="10d1a7495d39" data-tracking-context="postPage" data-scroll="native"><section name="f3df" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="b52d" id="b52d" class="graf graf--h3 graf--leading graf--title">Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3</h1><div class="uiScale uiScale-ui--regular uiScale-caption--regular u-flexCenter u-marginVertical24 u-fontSize15 js-postMetaLockup"><div class="u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@ratibor78?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="626db2fc9efe" data-action-type="hover" data-user-id="626db2fc9efe" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_aMCBXLrw-RxKEQCGpz5ihw.jpeg" class="avatar-image u-size50x50" alt="Go to the profile of Alexey Nizhegolenko"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><div class="u-paddingBottom3"><a class="ds-link ds-link--styleSubtle ui-captionStrong u-inlineBlock link link--darken link--darker" href="https://medium.com/@ratibor78" data-action="show-user-card" data-action-value="626db2fc9efe" data-action-type="hover" data-user-id="626db2fc9efe" dir="auto">Alexey Nizhegolenko</a><span class="followState js-followState" data-user-id="626db2fc9efe"><button class="button button--smallest u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-xs-hide" data-action="toggle-block-user" data-action-value="626db2fc9efe" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--smallest button--dark u-noUserSelect button--withChrome u-accentColor--buttonDark button--follow js-followButton u-marginLeft10 u-xs-hide" data-action="toggle-subscribe-user" data-action-value="626db2fc9efe" data-action-source="post_header_lockup-626db2fc9efe-------------------------follow_byline" data-subscribe-source="post_header_lockup" data-follow-context-entity-id="340357f21453"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="ui-caption u-noWrapWithEllipsis js-testPostMetaInlineSupplemental"><time datetime="2019-03-01T20:23:23.801Z">Mar 1</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="18 min read"></span></div></div></div><figure name="886e" id="886e" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 207px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 29.5%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*3Iop1-wqq7saYw10D__zRA.png" data-width="1200" data-height="354" data-is-featured="true" data-action="zoom" data-action-value="1*3Iop1-wqq7saYw10D__zRA.png" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_3Iop1-wqq7saYw10D__zRA.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="21"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*3Iop1-wqq7saYw10D__zRA.png" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_3Iop1-wqq7saYw10D__zRA(1).png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/1600/1*3Iop1-wqq7saYw10D__zRA.png"></noscript></div></div></figure><p name="28be" id="28be" class="graf graf--p graf-after--figure">Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster monitoring &amp; collecting logs, also we’ll run some test application for utilising previously configured cluster components. After all we will implement some stress tests and will check stability of this cluster schema.</p><p name="7872" id="7872" class="graf graf--p graf-after--p">First and very popular tool that Kubernetes community can provide for getting some web UI and statistical data about your cluster, it’s <a href="https://github.com/kubernetes/dashboard" data-href="https://github.com/kubernetes/dashboard" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank"><strong class="markup--strong markup--p-strong">Kubernetes Dashboard</strong></a>. In fact it still under developing, but even now it can provide some extra data for troubleshooting applications and managing the cluster resources also.</p><p name="bf3d" id="bf3d" class="graf graf--p graf-after--p">It’s a bit controversial theme, is it really need to have any WEB UI for the cluster management, or using a console <strong class="markup--strong markup--p-strong">kubectl</strong> tool is quite enough. Well, sometimes it may be useful and complementing each other.</p><p name="81e7" id="81e7" class="graf graf--p graf-after--p">Let’s deploy our own <strong class="markup--strong markup--p-strong">Kubernetes Dashboard</strong> and see then. Standard deployment will run this dashboard on localhost address only, so you’ll need to use <strong class="markup--strong markup--p-strong">kubectl proxy</strong> command to expose it, but it’ll be still available only on your kubectl control machine locally. This is not bad for the security reasons, but I like to have access to it outside cluster in my browser and I ready to take some risks (anyway it’s use ssl with strong token).</p><p name="8e5e" id="8e5e" class="graf graf--p graf-after--p">To use my way, you need to change a bit standard deployment file in service section. We’ll use our load balancer for exposing this dashboard on public address.</p><p name="e606" id="e606" class="graf graf--p graf-after--p">Login to the machine that have configured <strong class="markup--strong markup--p-strong">kubectl</strong> utility and create:</p><pre name="0565" id="0565" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> vi kube-dashboard.yaml</pre><pre name="3493" id="3493" class="graf graf--pre graf-after--pre"># Copyright 2017 The Kubernetes Authors. <br># <br># Licensed under the Apache License, Version 2.0 (the "License"); <br># you may not use this file except in compliance with the License. <br># You may obtain a copy of the License at <br># <br>#     http://www.apache.org/licenses/LICENSE-2.0 <br># <br># Unless required by applicable law or agreed to in writing, software <br># distributed under the License is distributed on an "AS IS" BASIS, <br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. <br># See the License for the specific language governing permissions and <br># limitations under the License. <br> <br># ------------------- Dashboard Secret ------------------- # <br> <br>apiVersion: v1 <br>kind: Secret <br>metadata: <br>  labels: <br>    k8s-app: kubernetes-dashboard <br>  name: kubernetes-dashboard-certs <br>  namespace: kube-system <br>type: Opaque <br> <br>--- <br># ------------------- Dashboard Service Account ------------------- # <br> <br>apiVersion: v1 <br>kind: ServiceAccount <br>metadata: <br>  labels: <br>    k8s-app: kubernetes-dashboard <br>  name: kubernetes-dashboard <br>  namespace: kube-system <br> <br>--- <br># ------------------- Dashboard Role &amp; Role Binding ------------------- # <br> <br>kind: Role <br>apiVersion: rbac.authorization.k8s.io/v1 <br>metadata: <br>  name: kubernetes-dashboard-minimal <br>  namespace: kube-system <br>rules: <br>  # Allow Dashboard to create 'kubernetes-dashboard-key-holder' secret. <br>- apiGroups: [""] <br>  resources: ["secrets"] <br>  verbs: ["create"] <br>  # Allow Dashboard to create 'kubernetes-dashboard-settings' config map. <br>- apiGroups: [""] <br>  resources: ["configmaps"] <br>  verbs: ["create"] <br>  # Allow Dashboard to get, update and delete Dashboard exclusive secrets. <br>- apiGroups: [""] <br>  resources: ["secrets"] <br>  resourceNames: ["kubernetes-dashboard-key-holder", "kubernetes-dashboard-certs"] <br>  verbs: ["get", "update", "delete"] <br>  # Allow Dashboard to get and update 'kubernetes-dashboard-settings' config map. <br>- apiGroups: [""] <br>  resources: ["configmaps"] <br>  resourceNames: ["kubernetes-dashboard-settings"] <br>  verbs: ["get", "update"] <br>  # Allow Dashboard to get metrics from heapster. <br>- apiGroups: [""] <br>  resources: ["services"] <br>  resourceNames: ["heapster"] <br>  verbs: ["proxy"] <br>- apiGroups: [""] <br>  resources: ["services/proxy"] <br>  resourceNames: ["heapster", "http:heapster:", "https:heapster:"] <br>  verbs: ["get"] <br> <br>--- <br>apiVersion: rbac.authorization.k8s.io/v1 <br>kind: RoleBinding <br>metadata: <br>  name: kubernetes-dashboard-minimal <br>  namespace: kube-system <br>roleRef: <br>  apiGroup: rbac.authorization.k8s.io <br>  kind: Role <br>  name: kubernetes-dashboard-minimal <br>subjects: <br>- kind: ServiceAccount <br>  name: kubernetes-dashboard <br>  namespace: kube-system <br> <br>--- <br># ------------------- Dashboard Deployment ------------------- # <br> <br>kind: Deployment <br>apiVersion: apps/v1 <br>metadata: <br>  labels: <br>    k8s-app: kubernetes-dashboard <br>  name: kubernetes-dashboard <br>  namespace: kube-system <br>spec: <br>  replicas: 1 <br>  revisionHistoryLimit: 10 <br>  selector: <br>    matchLabels: <br>      k8s-app: kubernetes-dashboard <br>  template: <br>    metadata: <br>      labels: <br>        k8s-app: kubernetes-dashboard <br>    spec: <br>      containers: <br>      - name: kubernetes-dashboard <br>        image: k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1 <br>        ports: <br>        - containerPort: 8443 <br>          protocol: TCP <br>        args: <br>          - --auto-generate-certificates <br>          # Uncomment the following line to manually specify Kubernetes API server Host <br>          # If not specified, Dashboard will attempt to auto discover the API server and connect <br>          # to it. Uncomment only if the default does not work. <br>          # - --apiserver-host=http://my-address:port <br>        volumeMounts: <br>        - name: kubernetes-dashboard-certs <br>          mountPath: /certs <br>          # Create on-disk volume to store exec logs <br>        - mountPath: /tmp <br>          name: tmp-volume <br>        livenessProbe: <br>          httpGet: <br>            scheme: HTTPS <br>            path: / <br>            port: 8443 <br>          initialDelaySeconds: 30 <br>          timeoutSeconds: 30 <br>      volumes: <br>      - name: kubernetes-dashboard-certs <br>        secret: <br>          secretName: kubernetes-dashboard-certs <br>      - name: tmp-volume <br>        emptyDir: {} <br>      serviceAccountName: kubernetes-dashboard <br>      # Comment the following tolerations if Dashboard must not be deployed on master <br>      tolerations: <br>      - key: node-role.kubernetes.io/master <br>        effect: NoSchedule <br> <br>--- <br># ------------------- Dashboard Service ------------------- # <br> <br>kind: Service <br>apiVersion: v1 <br>metadata: <br>  labels: <br>    k8s-app: kubernetes-dashboard <br>  name: kubernetes-dashboard <br>  namespace: kube-system <br>spec: <br>  type: LoadBalancer <br>  ports: <br>    - port: 443 <br>      targetPort: 8443 <br>  selector: <br>    k8s-app: kubernetes-dashboard</pre><p name="0b1e" id="0b1e" class="graf graf--p graf-after--pre">Then run it:</p><pre name="e3a6" id="e3a6" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> kubectl create -f kube-dashboard.yaml</pre><pre name="6a87" id="6a87" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl get svc --namespace=kube-system</pre><pre name="51d9" id="51d9" class="graf graf--pre graf-after--pre">kubernetes-dashboard   LoadBalancer   10.96.164.141 192.168.0.240 443:31262/TCP   8h</pre><p name="f6bd" id="f6bd" class="graf graf--p graf-after--pre">Great, as you can see our LB added the 192.168.0.240 ip for this service, now you can try open <a href="https://192.168.0.240/" data-href="https://192.168.0.240" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://192.168.0.240</a> to see the Kubernetes Dashboard.</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="178f" id="178f" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 580px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*WACfyAolr26vwZFggzL1EA.png" data-width="1054" data-height="592" data-action="zoom" data-action-value="1*WACfyAolr26vwZFggzL1EA.png" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_WACfyAolr26vwZFggzL1EA.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="41"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*WACfyAolr26vwZFggzL1EA.png" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_WACfyAolr26vwZFggzL1EA(1).png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*WACfyAolr26vwZFggzL1EA.png"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="4aea" id="4aea" class="graf graf--p graf-after--figure">We can use two ways to get access in to it, using the<code class="markup--code markup--p-code">admin.conf</code> file from our master node, that we previously use for configuring the kubectl or by creating a specific Service Account for it&nbsp;,with security token.</p><p name="c19b" id="c19b" class="graf graf--p graf-after--p">Lets create some admin user then:</p><pre name="9093" id="9093" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> vi kube-dashboard-admin.yaml</pre><pre name="e0be" id="e0be" class="graf graf--pre graf-after--pre">apiVersion: v1 <br>kind: ServiceAccount <br>metadata: <br>  name: admin-user <br>  namespace: kube-system <br>--- <br>apiVersion: rbac.authorization.k8s.io/v1beta1 <br>kind: ClusterRoleBinding <br>metadata: <br>  name: admin-user <br>roleRef: <br>  apiGroup: rbac.authorization.k8s.io <br>  kind: ClusterRole <br>  name: cluster-admin <br>subjects: <br>- kind: ServiceAccount <br>  name: admin-user <br>  namespace: kube-system</pre><pre name="c179" id="c179" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong"><br>control# </strong>kubectl create -f kube-dashboard-admin.yaml</pre><pre name="a814" id="a814" class="graf graf--pre graf-after--pre">serviceaccount/admin-user created <br>clusterrolebinding.rbac.authorization.k8s.io/admin-user created</pre><p name="843e" id="843e" class="graf graf--p graf-after--pre">Then we need to get token we can use to log in:</p><pre name="1458" id="1458" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}')</pre><pre name="b5a6" id="b5a6" class="graf graf--pre graf-after--pre"><br>Name:         admin-user-token-vfh66 <br>Namespace:    kube-system <br>Labels:       &lt;none&gt; <br>Annotations:  kubernetes.io/service-account.name: admin-user <br>              kubernetes.io/service-account.uid: 3775471a-3620-11e9-9800-763fc8adcb06 <br> <br>Type:  kubernetes.io/service-account-token <br> <br>Data <br>==== <br>ca.crt:     1025 bytes <br>namespace:  11 bytes <br>token:      erJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwna3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJr<br>dWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VmLXRva2VuLXZmaDY2Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZ<br>XJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIzNzc1NDcxYS0zNjIwLTExZTktOTgwMC03Nj<br>NmYzhhZGNiMDYiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06YWRtaW4tdXNlciJ9.JICASwxAJHFX8mLoSikJU1tbij4Kq2pneqAt6QCcGUizFLeSqr2R5x339ZR8W4<br>9cIsbZ7hbhFXCATQcVuWnWXe2dgXP5KE8ZdW9uvq96rm_JvsZz0RZO03UFRf8Exsss6GLeRJ5uNJNCAr8No5pmRMJo-_4BKW4OFDFxvSDSS_ZJaLMqJ0LNpwH1Z09SfD8TNW7VZqax4zuTSMX_yVS<br>ts40nzh4-_IxDZ1i7imnNSYPQa_Oq9ieJ56Q-xuOiGu9C3Hs3NmhwV8MNAcniVEzoDyFmx4z9YYcFPCDIoerPfSJIMFIWXcNlUTPSMRA-KfjSb_KYAErVfNctwOVglgCISA</pre><p name="f846" id="f846" class="graf graf--p graf-after--pre">Now copy the token and paste it into Token field on login screen.</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="7ffa" id="7ffa" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 416px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40.300000000000004%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*ycW0WLC4CSo-FOhPKmcU-A.png" data-width="1336" data-height="539" data-action="zoom" data-action-value="1*ycW0WLC4CSo-FOhPKmcU-A.png" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_ycW0WLC4CSo-FOhPKmcU-A.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="30"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*ycW0WLC4CSo-FOhPKmcU-A.png" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_ycW0WLC4CSo-FOhPKmcU-A(1).png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*ycW0WLC4CSo-FOhPKmcU-A.png"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="05a7" id="05a7" class="graf graf--p graf-after--figure">After you login, you can explore your cluster a bit more, I like this tool.</p><p name="26b0" id="26b0" class="graf graf--p graf-after--p">Next thing we can add for making our cluster monitoring more deep, it’s<strong class="markup--strong markup--p-strong"> </strong>install<strong class="markup--strong markup--p-strong"> </strong><a href="https://github.com/kubernetes-retired/heapster" data-href="https://github.com/kubernetes-retired/heapster" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank"><strong class="markup--strong markup--p-strong">heapster</strong></a></p><blockquote name="2333" id="2333" class="graf graf--blockquote graf-after--p">Heapster enables Container Cluster Monitoring and Performance Analysis for <a href="https://github.com/kubernetes/kubernetes" data-href="https://github.com/kubernetes/kubernetes" class="markup--anchor markup--blockquote-anchor" rel="nofollow noopener" target="_blank">Kubernetes</a> (versions v1.0.6 and higher), and platforms which include it.</blockquote><p name="518c" id="518c" class="graf graf--p graf-after--blockquote">This tool can provide us console based cluster utilisation statistic, but also it’ll add more information about node and pods resources to the Kubernetes Dashboard too.</p><p name="aaf1" id="aaf1" class="graf graf--p graf-after--p">It a bit tricky to install it on bare metal cluster, an I was need to make some investigation about why it wasn’t work from “box” but I have found the decision.</p><p name="1f43" id="1f43" class="graf graf--p graf-after--p">So let’s go on and deploy this add-on:</p><pre name="53ec" id="53ec" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> vi heapster.yaml</pre><pre name="74d8" id="74d8" class="graf graf--pre graf-after--pre">apiVersion: v1<br>kind: ServiceAccount<br>metadata:<br>  name: heapster<br>  namespace: kube-system<br>---<br>apiVersion: extensions/v1beta1<br>kind: Deployment<br>metadata:<br>  name: heapster<br>  namespace: kube-system<br>spec:<br>  replicas: 1<br>  template:<br>    metadata:<br>      labels:<br>        task: monitoring<br>        k8s-app: heapster<br>    spec:<br>      serviceAccountName: heapster<br>      containers:<br>      - name: heapster<br>        image: gcr.io/google_containers/heapster-amd64:v1.4.2<br>        imagePullPolicy: IfNotPresent<br>        command:<br>        - /heapster<br>        - --source=kubernetes.summary_api:''?useServiceAccount=true&amp;kubeletHttps=true&amp;kubeletPort=10250&amp;insecure=true<br>---<br>apiVersion: v1<br>kind: Service<br>metadata:<br>  labels:<br>    task: monitoring<br>    # For use as a Cluster add-on (<a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons" data-href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/kubernetes/kubernetes/tree/master/cluster/addons</a>)<br>    # If you are NOT using this as an addon, you should comment out this line.<br>    kubernetes.io/cluster-service: 'true'<br>    kubernetes.io/name: Heapster<br>  name: heapster<br>  namespace: kube-system<br>spec:<br>  ports:<br>  - port: 80<br>    targetPort: 8082<br>  selector:<br>    k8s-app: heapster<br>---<br>kind: ClusterRoleBinding<br>apiVersion: rbac.authorization.k8s.io/v1beta1<br>metadata:<br>  name: heapster<br>roleRef:<br>  apiGroup: rbac.authorization.k8s.io<br>  kind: ClusterRole<br>  name: system:heapster<br>subjects:<br>- kind: ServiceAccount<br>  name: heapster<br>  namespace: kube-system</pre><p name="b9da" id="b9da" class="graf graf--p graf-after--pre">This is mostly standard deployment file from the Heapster community, but it differs a bit, for making it work on our cluster the “<strong class="markup--strong markup--p-strong">source=</strong>” string in heapster deployment has bin changed this way:</p><pre name="5473" id="5473" class="graf graf--pre graf-after--p">--source=kubernetes.summary_api:''?useServiceAccount=true&amp;kubeletHttps=true&amp;kubeletPort=10250&amp;insecure=true</pre><p name="2e63" id="2e63" class="graf graf--p graf-after--pre">In this <a href="https://github.com/kubernetes-retired/heapster/blob/master/docs/source-configuration.md" data-href="https://github.com/kubernetes-retired/heapster/blob/master/docs/source-configuration.md" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">description</a> you can find all this options. I have changed the kubelet port to 10250 and disable ssl certificate checking (there was some issue with it).</p><p name="ffab" id="ffab" class="graf graf--p graf-after--p">Also we need to add permissions, to get nodes statistic, in to the Heapster RBAC role, add this few stings to the end of the role:</p><pre name="460a" id="460a" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl edit clusterrole system:heapster</pre><pre name="7ee8" id="7ee8" class="graf graf--pre graf-after--pre">......<br>...</pre><pre name="b1e9" id="b1e9" class="graf graf--pre graf-after--pre">- apiGroups:<br>  - ""<br>  resources:<br>  - nodes/stats<br>  verbs:<br>  - get</pre><p name="559e" id="559e" class="graf graf--p graf-after--pre">Finally your RBAC role must look like this:</p><pre name="cfc5" id="cfc5" class="graf graf--pre graf-after--p"># Please edit the object below. Lines beginning with a '#' will be ignored,<br># and an empty file will abort the edit. If an error occurs while saving this file will be<br># reopened with the relevant failures.<br>#<br>apiVersion: rbac.authorization.k8s.io/v1<br>kind: ClusterRole<br>metadata:<br>  annotations:<br>    rbac.authorization.kubernetes.io/autoupdate: "true"<br>  creationTimestamp: "2019-02-22T18:58:32Z"<br>  labels:<br>    kubernetes.io/bootstrapping: rbac-defaults<br>  name: system:heapster<br>  resourceVersion: "6799431"<br>  selfLink: /apis/rbac.authorization.k8s.io/v1/clusterroles/system%3Aheapster<br>  uid: d99065b5-36d3-11e9-a7e6-763fc8adcb06<br>rules:<br>- apiGroups:<br>  - ""<br>  resources:<br>  - events<br>  - namespaces<br>  - nodes<br>  - pods<br>  verbs:<br>  - get<br>  - list<br>  - watch<br>- apiGroups:<br>  - extensions<br>  resources:<br>  - deployments<br>  verbs:<br>  - get<br>  - list<br>  - watch<br>- apiGroups:<br>  - ""<br>  resources:<br>  - nodes/stats<br>  verbs:<br>  - get</pre><p name="1e30" id="1e30" class="graf graf--p graf-after--pre">OK, now lets run a command to make sure our heapster deployment running successful.</p><pre name="4e47" id="4e47" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong> kubectl top node</pre><pre name="0f86" id="0f86" class="graf graf--pre graf-after--pre">NAME           CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%   <br>kube-master1   183m         9%     1161Mi          60%       <br>kube-master2   235m         11%    1130Mi          59%       <br>kube-worker1   189m         4%     1216Mi          41%       <br>kube-worker2   218m         5%     1290Mi          44%       <br>kube-worker3   181m         4%     1305Mi          44%</pre><p name="7c8b" id="7c8b" class="graf graf--p graf-after--pre">Good, if you got same output it’s mean that all was done right, now lets login back to our dashboard page and check new graphs that now available.</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="b187" id="b187" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 370px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35.9%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*b9mloXwgvaqaO7QEcs8KUA.jpeg" data-width="1865" data-height="669" data-action="zoom" data-action-value="1*b9mloXwgvaqaO7QEcs8KUA.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_b9mloXwgvaqaO7QEcs8KUA.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="26"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*b9mloXwgvaqaO7QEcs8KUA.jpeg" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_b9mloXwgvaqaO7QEcs8KUA(1).jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*b9mloXwgvaqaO7QEcs8KUA.jpeg"></noscript></div></div></figure><figure name="3d5c" id="3d5c" class="graf graf--figure graf--layoutOutsetCenter graf-after--figure" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 342px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 33.1%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*L784pqTq4JIPDSDJTCq_ow.jpeg" data-width="1698" data-height="562" data-action="zoom" data-action-value="1*L784pqTq4JIPDSDJTCq_ow.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_L784pqTq4JIPDSDJTCq_ow.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="23"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*L784pqTq4JIPDSDJTCq_ow.jpeg" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_L784pqTq4JIPDSDJTCq_ow(1).jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*L784pqTq4JIPDSDJTCq_ow.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="cb67" id="cb67" class="graf graf--p graf-after--figure">From now we can also see the real resources utilisation for the cluster nodes, pods and so on.</p><p name="1cc3" id="1cc3" class="graf graf--p graf-after--p">If this not enough, then you can improve your statistic a bit more and add the InfluxDB+Grafana. This will add ability to draw our own Grafana dashboards then.</p><p name="1aed" id="1aed" class="graf graf--p graf-after--p">We’ll use this <a href="https://github.com/kubernetes-retired/heapster/tree/master/deploy/kube-config/influxdb" data-href="https://github.com/kubernetes-retired/heapster/tree/master/deploy/kube-config/influxdb" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">InfluxDB+Grafana</a> version of installation from the Heapster Git page, but with modification as usual. As we already have previously configured heapster deployment, the only things we need to do, it’s add Grafana and InfluxDB and change the existing heapster deployment then, to make it write metrics to Influx too.</p><p name="edc4" id="edc4" class="graf graf--p graf-after--p">OK, lets move on and create InfluxDB and Grafana deployments:</p><pre name="49e9" id="49e9" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> vi influxdb.yaml</pre><pre name="d868" id="d868" class="graf graf--pre graf-after--pre">apiVersion: extensions/v1beta1<br>kind: Deployment<br>metadata:<br>  name: monitoring-influxdb<br>  namespace: kube-system<br>spec:<br>  replicas: 1<br>  template:<br>    metadata:<br>      labels:<br>        task: monitoring<br>        k8s-app: influxdb<br>    spec:<br>      containers:<br>      - name: influxdb<br>        image: k8s.gcr.io/heapster-influxdb-amd64:v1.5.2<br>        volumeMounts:<br>        - mountPath: /data<br>          name: influxdb-storage<br>      volumes:<br>      - name: influxdb-storage<br>        emptyDir: {}<br>---<br>apiVersion: v1<br>kind: Service<br>metadata:<br>  labels:<br>    task: monitoring<br>    # For use as a Cluster add-on (<a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons" data-href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/kubernetes/kubernetes/tree/master/cluster/addons</a>)<br>    # If you are NOT using this as an addon, you should comment out this line.<br>    kubernetes.io/cluster-service: 'true'<br>    kubernetes.io/name: monitoring-influxdb<br>  name: monitoring-influxdb<br>  namespace: kube-system<br>spec:<br>  ports:<br>  - port: 8086<br>    targetPort: 8086<br>  selector:<br>    k8s-app: influxdb</pre><p name="c601" id="c601" class="graf graf--p graf-after--pre">Then Grafana, also don’t forget to change the service configuration for enabling MetaLB load balancer on it, to get external IP for Grafana service.</p><pre name="0702" id="0702" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>vi grafana.yaml</pre><pre name="7351" id="7351" class="graf graf--pre graf-after--pre">apiVersion: extensions/v1beta1<br>kind: Deployment<br>metadata:<br>  name: monitoring-grafana<br>  namespace: kube-system<br>spec:<br>  replicas: 1<br>  template:<br>    metadata:<br>      labels:<br>        task: monitoring<br>        k8s-app: grafana<br>    spec:<br>      containers:<br>      - name: grafana<br>        image: k8s.gcr.io/heapster-grafana-amd64:v5.0.4<br>        ports:<br>        - containerPort: 3000<br>          protocol: TCP<br>        volumeMounts:<br>        - mountPath: /etc/ssl/certs<br>          name: ca-certificates<br>          readOnly: true<br>        - mountPath: /var<br>          name: grafana-storage<br>        env:<br>        - name: INFLUXDB_HOST<br>          value: monitoring-influxdb<br>        - name: GF_SERVER_HTTP_PORT<br>          value: "3000"<br>          # The following env variables are required to make Grafana accessible via<br>          # the kubernetes api-server proxy. On production clusters, we recommend<br>          # removing these env variables, setup auth for grafana, and expose the grafana<br>          # service using a LoadBalancer or a public IP.<br>        - name: GF_AUTH_BASIC_ENABLED<br>          value: "false"<br>        - name: GF_AUTH_ANONYMOUS_ENABLED<br>          value: "true"<br>        - name: GF_AUTH_ANONYMOUS_ORG_ROLE<br>          value: Admin<br>        - name: GF_SERVER_ROOT_URL<br>          # If you're only using the API Server proxy, set this value instead:<br>          # value: /api/v1/namespaces/kube-system/services/monitoring-grafana/proxy<br>          value: /<br>      volumes:<br>      - name: ca-certificates<br>        hostPath:<br>          path: /etc/ssl/certs<br>      - name: grafana-storage<br>        emptyDir: {}<br>---<br>apiVersion: v1<br>kind: Service<br>metadata:<br>  labels:<br>    # For use as a Cluster add-on (<a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons" data-href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/kubernetes/kubernetes/tree/master/cluster/addons</a>)<br>    # If you are NOT using this as an addon, you should comment out this line.<br>    kubernetes.io/cluster-service: 'true'<br>    kubernetes.io/name: monitoring-grafana<br>  name: monitoring-grafana<br>  namespace: kube-system<br>spec:<br>  # In a production setup, we recommend accessing Grafana through an external Loadbalancer<br>  # or through a public IP.<br>  # type: LoadBalancer<br>  # You could also use NodePort to expose the service at a randomly-generated port<br>  # type: NodePort<br>  type: LoadBalancer<br>  ports:<br>  - port: 80<br>    targetPort: 3000<br>  selector:<br>    k8s-app: grafana</pre><p name="70bb" id="70bb" class="graf graf--p graf-after--pre">And create them:</p><pre name="be4e" id="be4e" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl create -f influxdb.yaml</pre><pre name="30a3" id="30a3" class="graf graf--pre graf-after--pre">deployment.extensions/monitoring-influxdb created<br>service/monitoring-influxdb created</pre><pre name="9ba5" id="9ba5" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl create -f grafana.yaml </pre><pre name="1b1f" id="1b1f" class="graf graf--pre graf-after--pre">deployment.extensions/monitoring-grafana created<br>service/monitoring-grafana created</pre><p name="c075" id="c075" class="graf graf--p graf-after--pre">Now it’s time to change a heapster deployment and add InfluxDB connection in to it, only one string we need to add for it:</p><pre name="ebde" id="ebde" class="graf graf--pre graf-after--p">- --sink=influxdb:<a href="http://monitoring-influxdb.kube-system.svc:8086/" data-href="http://monitoring-influxdb.kube-system.svc:8086" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">http://monitoring-influxdb.kube-system.svc:8086</a></pre><p name="e063" id="e063" class="graf graf--p graf-after--pre">Edit heapster deployment:</p><pre name="5f17" id="5f17" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl get deployments --namespace=kube-system</pre><pre name="8f5c" id="8f5c" class="graf graf--pre graf-after--pre">NAME                   READY   UP-TO-DATE   AVAILABLE   AGE<br>coredns                2/2     2            2           49d<br>heapster               1/1     1            1           2d12h<br>kubernetes-dashboard   1/1     1            1           3d21h<br>monitoring-grafana     1/1     1            1           115s<br>monitoring-influxdb    1/1     1            1           2m18s</pre><pre name="07cb" id="07cb" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl edit deployment heapster --namespace=kube-system</pre><pre name="7d52" id="7d52" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">... beginning bla bla bla</em></pre><pre name="23f4" id="23f4" class="graf graf--pre graf-after--pre">spec:<br>      containers:<br>      - command:<br>        - /heapster<br>        - --source=kubernetes.summary_api:''?useServiceAccount=true&amp;kubeletHttps=true&amp;kubeletPort=10250&amp;insecure=true<br>        - --sink=influxdb:<a href="http://monitoring-influxdb.kube-system.svc:8086/" data-href="http://monitoring-influxdb.kube-system.svc:8086" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">http://monitoring-influxdb.kube-system.svc:8086</a><br>        image: gcr.io/google_containers/heapster-amd64:v1.4.2<br>        imagePullPolicy: IfNotPresent</pre><pre name="6d4e" id="6d4e" class="graf graf--pre graf-after--pre"><em class="markup--em markup--pre-em">.... end </em></pre><p name="8688" id="8688" class="graf graf--p graf-after--pre">Now let’s find the Grafana service external IP and login inside it:</p><pre name="4c98" id="4c98" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl get svc --namespace=kube-system<br>NAME     TYPE       CLUSTER-IP      EXTERNAL-IP PORT(S)        AGE</pre><pre name="2496" id="2496" class="graf graf--pre graf-after--pre">..... some other services here</pre><pre name="4e2e" id="4e2e" class="graf graf--pre graf-after--pre">monitoring-grafana     LoadBalancer   10.98.111.200    192.168.0.241   80:32148/TCP    18m</pre><p name="b714" id="b714" class="graf graf--p graf-after--pre">Open <a href="http://192.168.0.241/" data-href="http://192.168.0.241" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">http://192.168.0.241</a> in your browser, with admin/admin credentials at the first time:</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="7e74" id="7e74" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 511px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.5%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*qW0kPxoWQfkuwkkgBXnGkA.jpeg" data-width="1325" data-height="656" data-action="zoom" data-action-value="1*qW0kPxoWQfkuwkkgBXnGkA.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_qW0kPxoWQfkuwkkgBXnGkA.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="36"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*qW0kPxoWQfkuwkkgBXnGkA.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*qW0kPxoWQfkuwkkgBXnGkA.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="0a16" id="0a16" class="graf graf--p graf-after--figure">My Grafana was empty after I have logged in, but fortunately we can get all needed dashboards from <strong class="markup--strong markup--p-strong">grafana.com</strong>, we need to import the number 3649 and 3646 dashboards. Choose the right data source when you’ll import them.</p><p name="bcc3" id="bcc3" class="graf graf--p graf-after--p">After this, you’ll be able to see Nodes and Pods resources utilisation and you can create own custom dashboards of course.</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="3f5c" id="3f5c" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 445px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 43.1%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*leAm0_I8fijhxsa7zQ9qZA.jpeg" data-width="1906" data-height="822" data-action="zoom" data-action-value="1*leAm0_I8fijhxsa7zQ9qZA.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_leAm0_I8fijhxsa7zQ9qZA.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="31"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*leAm0_I8fijhxsa7zQ9qZA.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*leAm0_I8fijhxsa7zQ9qZA.jpeg"></noscript></div></div></figure><figure name="9de3" id="9de3" class="graf graf--figure graf--layoutOutsetCenter graf-after--figure" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 445px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 43.1%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*KRNsdZn7Q-WL5dMJMzXQ0g.jpeg" data-width="1906" data-height="822" data-action="zoom" data-action-value="1*KRNsdZn7Q-WL5dMJMzXQ0g.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_KRNsdZn7Q-WL5dMJMzXQ0g.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="31"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*KRNsdZn7Q-WL5dMJMzXQ0g.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*KRNsdZn7Q-WL5dMJMzXQ0g.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="48d8" id="48d8" class="graf graf--p graf-after--figure">Well, that’s all about monitoring for now, next things we may need, it’s storing logs from our applications and cluster&nbsp;. There’s few ways how we can do it, all of them described in Kubernetes <a href="https://kubernetes.io/docs/concepts/cluster-administration/logging/" data-href="https://kubernetes.io/docs/concepts/cluster-administration/logging/" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">documentation</a>. Based on my own experience I prefer to have an external installations of Elasticsearch &amp; Kibana services and only logging agent will be running on every Kubernetes worker node. This will save our cluster from any overloads, due to the big amount of logs and other problems, also it’ll be possible to get logs even if our cluster will fully degrade.</p><p name="dbb1" id="dbb1" class="graf graf--p graf-after--p">Most popular log collecting stack for Kubernetes evangelists, it’s Elasticsearch, Fluentd and Kibana (EFK stack). In this example we’ll run Elasticsearch with Kibana on external node (you can use your existing ELK stack also) and will run a Fluentd inside our cluster as daemonset on each and every node, as log collecting agent.</p><p name="2243" id="2243" class="graf graf--p graf-after--p">I will pass out the section about creating the VM with Elasticsearch &amp; Kibana installations, it’s a popular enough theme, so you can find a lot of documents about how to do it better, for example you can use mine <a href="https://medium.com/devopslinks/nginx-logs-monitoring-using-elk-stack-docker-4b64f46e989" data-href="https://medium.com/devopslinks/nginx-logs-monitoring-using-elk-stack-docker-4b64f46e989" class="markup--anchor markup--p-anchor" target="_blank">article</a> as well. Just remove the <strong class="markup--strong markup--p-strong">logstesh</strong> part of config from <strong class="markup--strong markup--p-strong">docker-compose.yml</strong> file and also remove 127.0.0.1 from the elasticsearch ports section.</p><p name="91ec" id="91ec" class="graf graf--p graf-after--p">After finishing you must have a working elasticsearch, that listened on VM-IP:9200 port, if you need any additional protection you can configure the login:pass or secure keys, between fluentd and elasticsearch. But I often just protecting it with iptables rules.</p><p name="009a" id="009a" class="graf graf--p graf-after--p">Only things we left to do now, it’s create some fluentd daemonset in Kubernetes and specify the outside elasticsearch <strong class="markup--strong markup--p-strong">node:port</strong> address in configuration.</p><p name="7257" id="7257" class="graf graf--p graf-after--p">We’ll use official Kubernetes Add-On yaml configs from <a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/fluentd-elasticsearch" data-href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/fluentd-elasticsearch" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">there</a>, with small modifications:</p><pre name="e114" id="e114" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>vi fluentd-es-ds.yaml</pre><pre name="ab56" id="ab56" class="graf graf--pre graf-after--pre">apiVersion: v1<br>kind: ServiceAccount<br>metadata:<br>  name: fluentd-es<br>  namespace: kube-system<br>  labels:<br>    k8s-app: fluentd-es<br>    kubernetes.io/cluster-service: "true"<br>    addonmanager.kubernetes.io/mode: Reconcile<br>---<br>kind: ClusterRole<br>apiVersion: rbac.authorization.k8s.io/v1<br>metadata:<br>  name: fluentd-es<br>  labels:<br>    k8s-app: fluentd-es<br>    kubernetes.io/cluster-service: "true"<br>    addonmanager.kubernetes.io/mode: Reconcile<br>rules:<br>- apiGroups:<br>  - ""<br>  resources:<br>  - "namespaces"<br>  - "pods"<br>  verbs:<br>  - "get"<br>  - "watch"<br>  - "list"<br>---<br>kind: ClusterRoleBinding<br>apiVersion: rbac.authorization.k8s.io/v1<br>metadata:<br>  name: fluentd-es<br>  labels:<br>    k8s-app: fluentd-es<br>    kubernetes.io/cluster-service: "true"<br>    addonmanager.kubernetes.io/mode: Reconcile<br>subjects:<br>- kind: ServiceAccount<br>  name: fluentd-es<br>  namespace: kube-system<br>  apiGroup: ""<br>roleRef:<br>  kind: ClusterRole<br>  name: fluentd-es<br>  apiGroup: ""<br>---<br>apiVersion: apps/v1<br>kind: DaemonSet<br>metadata:<br>  name: fluentd-es-v2.4.0<br>  namespace: kube-system<br>  labels:<br>    k8s-app: fluentd-es<br>    version: v2.4.0<br>    kubernetes.io/cluster-service: "true"<br>    addonmanager.kubernetes.io/mode: Reconcile<br>spec:<br>  selector:<br>    matchLabels:<br>      k8s-app: fluentd-es<br>      version: v2.4.0<br>  template:<br>    metadata:<br>      labels:<br>        k8s-app: fluentd-es<br>        kubernetes.io/cluster-service: "true"<br>        version: v2.4.0<br>      # This annotation ensures that fluentd does not get evicted if the node<br>      # supports critical pod annotation based priority scheme.<br>      # Note that this does not guarantee admission on the nodes (#40573).<br>      annotations:<br>        scheduler.alpha.kubernetes.io/critical-pod: ''<br>        seccomp.security.alpha.kubernetes.io/pod: 'docker/default'<br>    spec:<br>      priorityClassName: system-node-critical<br>      serviceAccountName: fluentd-es<br>      containers:<br>      - name: fluentd-es<br>        image: k8s.gcr.io/fluentd-elasticsearch:v2.4.0<br>        env:<br>        - name: FLUENTD_ARGS<br>          value: --no-supervisor -q<br>        resources:<br>          limits:<br>            memory: 500Mi<br>          requests:<br>            cpu: 100m<br>            memory: 200Mi<br>        volumeMounts:<br>        - name: varlog<br>          mountPath: /var/log<br>        - name: varlibdockercontainers<br>          mountPath: /var/lib/docker/containers<br>          readOnly: true<br>        - name: config-volume<br>          mountPath: /etc/fluent/config.d<br>      terminationGracePeriodSeconds: 30<br>      volumes:<br>      - name: varlog<br>        hostPath:<br>          path: /var/log<br>      - name: varlibdockercontainers<br>        hostPath:<br>          path: /var/lib/docker/containers<br>      - name: config-volume<br>        configMap:<br>          name: fluentd-es-config-v0.2.0</pre><p name="8c62" id="8c62" class="graf graf--p graf-after--pre">Then we need to provide some configuration, for our fluentd:</p><pre name="d4b7" id="d4b7" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> vi fluentd-es-configmap.yaml</pre><pre name="3b25" id="3b25" class="graf graf--pre graf-after--pre">kind: ConfigMap<br>apiVersion: v1<br>metadata:<br>  name: fluentd-es-config-v0.2.0<br>  namespace: kube-system<br>  labels:<br>    addonmanager.kubernetes.io/mode: Reconcile<br>data:<br>  system.conf: |-<br>    &lt;system&gt;<br>      root_dir /tmp/fluentd-buffers/<br>    &lt;/system&gt;</pre><pre name="b9e3" id="b9e3" class="graf graf--pre graf-after--pre">containers.input.conf: |-<br>    &lt;source&gt;<br>      <a href="http://twitter.com/id" data-href="http://twitter.com/id" class="markup--anchor markup--pre-anchor" title="Twitter profile for @id" rel="nofollow noopener" target="_blank">@id</a> fluentd-containers.log<br>      <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="nofollow noopener" target="_blank">@type</a> tail<br>      path /var/log/containers/*.log<br>      pos_file /var/log/es-containers.log.pos<br>      tag raw.kubernetes.*<br>      read_from_head true<br>      &lt;parse&gt;<br>        <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="nofollow noopener" target="_blank">@type</a> multi_format<br>        &lt;pattern&gt;<br>          format json<br>          time_key time<br>          time_format %Y-%m-%dT%H:%M:%S.%NZ<br>        &lt;/pattern&gt;<br>        &lt;pattern&gt;<br>          format /^(?&lt;time&gt;.+) (?&lt;stream&gt;stdout|stderr) [^ ]* (?&lt;log&gt;.*)$/<br>          time_format %Y-%m-%dT%H:%M:%S.%N%:z<br>        &lt;/pattern&gt;<br>      &lt;/parse&gt;<br>    &lt;/source&gt;</pre><pre name="a78d" id="a78d" class="graf graf--pre graf-after--pre"># Detect exceptions in the log output and forward them as one log entry.<br>    &lt;match raw.kubernetes.**&gt;<br>      <a href="http://twitter.com/id" data-href="http://twitter.com/id" class="markup--anchor markup--pre-anchor" title="Twitter profile for @id" rel="nofollow noopener" target="_blank">@id</a> raw.kubernetes<br>      <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="nofollow noopener" target="_blank">@type</a> detect_exceptions<br>      remove_tag_prefix raw<br>      message log<br>      stream stream<br>      multiline_flush_interval 5<br>      max_bytes 500000<br>      max_lines 1000<br>    &lt;/match&gt;</pre><pre name="0d99" id="0d99" class="graf graf--pre graf-after--pre"># Concatenate multi-line logs<br>    &lt;filter **&gt;<br>      <a href="http://twitter.com/id" data-href="http://twitter.com/id" class="markup--anchor markup--pre-anchor" title="Twitter profile for @id" rel="nofollow noopener" target="_blank">@id</a> filter_concat<br>      <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="nofollow noopener" target="_blank">@type</a> concat<br>      key message<br>      multiline_end_regexp /\n$/<br>      separator ""<br>    &lt;/filter&gt;</pre><pre name="0da1" id="0da1" class="graf graf--pre graf-after--pre"># Enriches records with Kubernetes metadata<br>    &lt;filter kubernetes.**&gt;<br>      <a href="http://twitter.com/id" data-href="http://twitter.com/id" class="markup--anchor markup--pre-anchor" title="Twitter profile for @id" rel="nofollow noopener" target="_blank">@id</a> filter_kubernetes_metadata<br>      <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="nofollow noopener" target="_blank">@type</a> kubernetes_metadata<br>    &lt;/filter&gt;</pre><pre name="6766" id="6766" class="graf graf--pre graf-after--pre"># Fixes json fields in Elasticsearch<br>    &lt;filter kubernetes.**&gt;<br>      <a href="http://twitter.com/id" data-href="http://twitter.com/id" class="markup--anchor markup--pre-anchor" title="Twitter profile for @id" rel="nofollow noopener" target="_blank">@id</a> filter_parser<br>      <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="nofollow noopener" target="_blank">@type</a> parser<br>      key_name log<br>      reserve_data true<br>      remove_key_name_field true<br>      &lt;parse&gt;<br>        <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="nofollow noopener" target="_blank">@type</a> multi_format<br>        &lt;pattern&gt;<br>          format json<br>        &lt;/pattern&gt;<br>        &lt;pattern&gt;<br>          format none<br>        &lt;/pattern&gt;<br>      &lt;/parse&gt;<br>    &lt;/filter&gt;</pre><pre name="7980" id="7980" class="graf graf--pre graf-after--pre">output.conf: |-<br>    &lt;match **&gt;<br>      <a href="http://twitter.com/id" data-href="http://twitter.com/id" class="markup--anchor markup--pre-anchor" title="Twitter profile for @id" rel="noopener nofollow" target="_blank">@id</a> elasticsearch<br>      <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="noopener nofollow" target="_blank">@type</a> elasticsearch<br>      <a href="http://twitter.com/log_level" data-href="http://twitter.com/log_level" class="markup--anchor markup--pre-anchor" title="Twitter profile for @log_level" rel="noopener nofollow" target="_blank">@log_level</a> info<br>      type_name _doc<br>      include_tag_key true<br>      host 192.168.1.253<br>      port 9200<br>      logstash_format true<br>      &lt;buffer&gt;<br>        <a href="http://twitter.com/type" data-href="http://twitter.com/type" class="markup--anchor markup--pre-anchor" title="Twitter profile for @type" rel="noopener nofollow" target="_blank">@type</a> file<br>        path /var/log/fluentd-buffers/kubernetes.system.buffer<br>        flush_mode interval<br>        retry_type exponential_backoff<br>        flush_thread_count 2<br>        flush_interval 5s<br>        retry_forever<br>        retry_max_interval 30<br>        chunk_limit_size 2M<br>        queue_limit_length 8<br>        overflow_action block<br>      &lt;/buffer&gt;<br>    &lt;/match&gt;</pre><p name="7ea0" id="7ea0" class="graf graf--p graf-after--pre">This is very easy configuration, but it full enough for a quick start, it’ll collect a system and applications logs. If you’ll need something more complicated, you may read an official documentation about fluentd plugins and configs for Kubernetes.</p><p name="60de" id="60de" class="graf graf--p graf-after--p">Now let’s create a fluentd daemonset in our cluster:</p><pre name="0e21" id="0e21" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> kubectl create -f fluentd-es-ds.yaml</pre><pre name="dbab" id="dbab" class="graf graf--pre graf-after--pre">serviceaccount/fluentd-es created<br>clusterrole.rbac.authorization.k8s.io/fluentd-es created<br>clusterrolebinding.rbac.authorization.k8s.io/fluentd-es created<br>daemonset.apps/fluentd-es-v2.4.0 created</pre><pre name="ad1b" id="ad1b" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl create -f fluentd-es-configmap.yaml</pre><pre name="52e8" id="52e8" class="graf graf--pre graf-after--pre">configmap/fluentd-es-config-v0.2.0 created</pre><p name="3f13" id="3f13" class="graf graf--p graf-after--pre">Make sure that all fluentd pods and other resources was started OK, and open Kibana then, in Kibana you need to find and add new index from fluentd. If you’ll find some, that’s mean everything was done right, if nope then check previous steps and recreate daemonset or edit configmap:</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="597e" id="597e" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 356px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 34.4%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*wKOkSRCoEWVPAaBqaUnfAw.jpeg" data-width="1913" data-height="659" data-action="zoom" data-action-value="1*wKOkSRCoEWVPAaBqaUnfAw.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_wKOkSRCoEWVPAaBqaUnfAw.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="25"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*wKOkSRCoEWVPAaBqaUnfAw.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*wKOkSRCoEWVPAaBqaUnfAw.jpeg"></noscript></div></div></figure><figure name="9752" id="9752" class="graf graf--figure graf--layoutOutsetCenter graf-after--figure" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 480px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.5%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*GlpYTuYj3DzSPsiqB3pi5Q.jpeg" data-width="1922" data-height="894" data-action="zoom" data-action-value="1*GlpYTuYj3DzSPsiqB3pi5Q.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_GlpYTuYj3DzSPsiqB3pi5Q.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="33"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*GlpYTuYj3DzSPsiqB3pi5Q.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*GlpYTuYj3DzSPsiqB3pi5Q.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="e8fc" id="e8fc" class="graf graf--p graf-after--figure">Great, now after we start getting some logs from our cluster, we can create any kind of dashboards we want. Well, of course it’s a very usual configuration so you may need to change it for your specific purposes. The main goal was to show the way how it can be done.</p><p name="89c9" id="89c9" class="graf graf--p graf-after--p">After all previously done steps, we got a really good looking, production ready Kubernetes cluster. So it’s time to deploy some test application in it and see how it’ll be.</p><p name="b220" id="b220" class="graf graf--p graf-after--p">We can take for this example my small Python/Flask Kubyk application&nbsp;,that already have a Docker container so we can take it from public docker registry. Then we need to add an external database file for this app, we’ll use our configured GlusterFS storage for it.</p><p name="6589" id="6589" class="graf graf--p graf-after--p">First lets create a new <strong class="markup--strong markup--p-strong">pvc</strong> (persistent volume claim)volume for this app, we’ll store the <a href="https://www.sqlite.org/" data-href="https://www.sqlite.org/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">SQLite</a> database with users credentials in there. We can use a previously created storage class from part 2 of this tutorial.</p><pre name="f044" id="f044" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>mkdir kubyk &amp;&amp; cd kubyk</pre><pre name="48dd" id="48dd" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>vi kubyk-pvc.yaml<br>kind: PersistentVolumeClaim<br>apiVersion: v1<br>metadata:<br>  name: kubyk<br>  annotations:<br>    volume.beta.kubernetes.io/storage-class: "slow"<br>spec:<br>  accessModes:<br>    - ReadWriteOnce<br>  resources:<br>    requests:<br>      storage: 1Gi</pre><pre name="8bd7" id="8bd7" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl create -f kubyk-pvc.yaml</pre><p name="f5ff" id="f5ff" class="graf graf--p graf-after--pre">After we have create a new PVC for our app we ready to deploy it.</p><pre name="4526" id="4526" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control#</strong> vi kubyk-deploy.yaml </pre><pre name="91ca" id="91ca" class="graf graf--pre graf-after--pre">apiVersion: apps/v1<br>kind: Deployment<br>metadata:<br>  name: kubyk-deployment<br>spec:<br>  selector:<br>    matchLabels:<br>      app: kubyk<br>  replicas: 1<br>  template:<br>    metadata:<br>      labels:<br>        app: kubyk<br>    spec:<br>      containers:<br>      - name: kubyk<br>        image: ratibor78/kubyk<br>        ports:<br>        - containerPort: 80<br>        volumeMounts:<br>        - name: kubyk-db<br>          mountPath: /kubyk/sqlite<br>      volumes:<br>      - name: kubyk-db<br>        persistentVolumeClaim:<br>          claimName: kubyk</pre><pre name="0d49" id="0d49" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control#</strong> vi kubyk-service.yaml </pre><pre name="f21f" id="f21f" class="graf graf--pre graf-after--pre">apiVersion: v1<br>kind: Service<br>metadata:<br>  name: kubyk<br>spec:<br>  type: LoadBalancer<br>  selector:<br>    app: kubyk<br>  ports:<br>  - port: 80<br>    name: http</pre><p name="6400" id="6400" class="graf graf--p graf-after--pre">Now lets create deployment and service:</p><pre name="c659" id="c659" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl create -f kubyk-deploy.yaml </pre><pre name="408f" id="408f" class="graf graf--pre graf-after--pre">deployment.apps/kubyk-deployment created</pre><pre name="9281" id="9281" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl create -f kubyk-service.yaml </pre><pre name="ee40" id="ee40" class="graf graf--pre graf-after--pre">service/kubyk created</pre><p name="6701" id="6701" class="graf graf--p graf-after--pre">Check the new assigned IP for service and pod status also:</p><pre name="1565" id="1565" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl get po</pre><pre name="34de" id="34de" class="graf graf--pre graf-after--pre">NAME                                READY   STATUS    RESTARTS AGE<br>glusterfs-2wxk7                     1/1     Running   1        2d1h<br>glusterfs-5dtdj                     1/1     Running   1        41d<br>glusterfs-zqxwt                     1/1     Running   0        2d1h<br>heketi-b8c5f6554-f92rn              1/1     Running   0        8d<br>kubyk-deployment-75d5447d46-jrttp   1/1     Running   0        11s</pre><pre name="c441" id="c441" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl get svc<br>NAME  TYPE     CLUSTER-IP       EXTERNAL-IP    PORT(S)        AGE</pre><pre name="6dcd" id="6dcd" class="graf graf--pre graf-after--pre">... some text.. <br>kubyk LoadBalancer 10.109.105.224   192.168.0.242 80:32384/TCP 10s</pre><p name="cf09" id="cf09" class="graf graf--p graf-after--pre">OK, it seems that we have successfully start our new application, if we’ll open <a href="http://192.168.0.242/" data-href="http://192.168.0.242" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">http://192.168.0.242</a> IP in browser, we must see the login page of this app. We can use admin/admin credentials for login in, but if we try to login on this stage, we’ll get a error, as there is no database available yet.</p><p name="77a0" id="77a0" class="graf graf--p graf-after--p">There is a error log messages example from pod in Kubernetes dashboard:</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="508f" id="508f" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 484px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.9%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*l7ih-wAX-toh2aNnq_e0jQ.jpeg" data-width="1757" data-height="824" data-action="zoom" data-action-value="1*l7ih-wAX-toh2aNnq_e0jQ.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_l7ih-wAX-toh2aNnq_e0jQ.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="35"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*l7ih-wAX-toh2aNnq_e0jQ.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*l7ih-wAX-toh2aNnq_e0jQ.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="0e4d" id="0e4d" class="graf graf--p graf-after--figure">To fix this situation, we need to copy the SQlite DB file, from my git repository into the previously created pvc volume. So application can start using this database then.</p><pre name="c709" id="c709" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>git pull <a href="https://github.com/ratibor78/kubyk.git" data-href="https://github.com/ratibor78/kubyk.git" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/ratibor78/kubyk.git</a> </pre><pre name="bb3e" id="bb3e" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl cp ./kubyk/sqlite/database.db kubyk-deployment-75d5447d46-jrttp:/kubyk/sqlite</pre><p name="34e7" id="34e7" class="graf graf--p graf-after--pre">We use the pod from application and <strong class="markup--strong markup--p-strong">kubectl cp </strong>command to copy this file into the volume.</p><p name="c568" id="c568" class="graf graf--p graf-after--p">Also we need grant a write access to this directory for nginx user, as in docker container, my application runs under nginx user by <a href="https://github.com/ratibor78/kubyk/blob/master/supervisord.conf" data-href="https://github.com/ratibor78/kubyk/blob/master/supervisord.conf" class="markup--anchor markup--p-anchor" title="supervisord.conf" rel="nofollow noopener" target="_blank">supervisord</a>.</p><pre name="f8fc" id="f8fc" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl exec -ti kubyk-deployment-75d5447d46-jrttp -- chown -R nginx:nginx /kubyk/sqlite/</pre><p name="6b23" id="6b23" class="graf graf--p graf-after--pre">And let’s try to login one more time:</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="8afe" id="8afe" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 507px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.1%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*Gqmq1mIb9fwwG6RBHjID8w.jpeg" data-width="1891" data-height="929" data-action="zoom" data-action-value="1*Gqmq1mIb9fwwG6RBHjID8w.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_Gqmq1mIb9fwwG6RBHjID8w.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="36"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*Gqmq1mIb9fwwG6RBHjID8w.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*Gqmq1mIb9fwwG6RBHjID8w.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="a25e" id="a25e" class="graf graf--p graf-after--figure">Great, now our app is working well, and we can scale this <strong class="markup--strong markup--p-strong">kubyk</strong> deployment up to 3 replica for example, for putting one copy of app on one worker node. As we have created pvc volume previously, all our pods with application replicas, will use same DB, and also service will balance traffic between replicas using round robin schema.</p><pre name="6c66" id="6c66" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl get deployments</pre><pre name="82e1" id="82e1" class="graf graf--pre graf-after--pre">NAME               READY   UP-TO-DATE   AVAILABLE   AGE<br>heketi             1/1     1            1           39d<br>kubyk-deployment   1/1     1            1           4h5m</pre><pre name="c792" id="c792" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl scale deployments kubyk-deployment --replicas=3</pre><pre name="63c2" id="63c2" class="graf graf--pre graf-after--pre">deployment.extensions/kubyk-deployment scaled</pre><pre name="0f32" id="0f32" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">control# </strong>kubectl get po</pre><pre name="3039" id="3039" class="graf graf--pre graf-after--pre">NAME                                READY   STATUS    RESTARTS   AGE<br>glusterfs-2wxk7                     1/1     Running   1        2d5h<br>glusterfs-5dtdj                     1/1     Running   21       41d<br>glusterfs-zqxwt                     1/1     Running   0        2d5h<br>heketi-b8c5f6554-f92rn              1/1     Running   0        8d<br>kubyk-deployment-75d5447d46-bdnqx   1/1     Running   0        26s<br>kubyk-deployment-75d5447d46-jrttp   1/1     Running   0        4h7m<br>kubyk-deployment-75d5447d46-wz9xz   1/1     Running   0        26s</pre></div><div class="section-inner sectionLayout--outsetColumn"><figure name="66d6" id="66d6" class="graf graf--figure graf--layoutOutsetCenter graf-after--pre" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 445px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 43.2%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*Llw3vjLxpMs157KMFzdgwg.jpeg" data-width="1909" data-height="824" data-action="zoom" data-action-value="1*Llw3vjLxpMs157KMFzdgwg.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_Llw3vjLxpMs157KMFzdgwg.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="31"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*Llw3vjLxpMs157KMFzdgwg.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*Llw3vjLxpMs157KMFzdgwg.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="2915" id="2915" class="graf graf--p graf-after--figure">Now we got one replica of our app per one worker node, so if we’ll lose some of nodes, application will still continue working. Also we got an easy type of load balancing as I said previously. Not bad as for first time.</p><p name="6137" id="6137" class="graf graf--p graf-after--p">Lets create some new user in our application:</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="5fcb" id="5fcb" class="graf graf--figure graf--layoutOutsetCenter graf-after--p" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 345px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 33.4%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*_LNuRsTIKMxaePz_RImBsQ.jpeg" data-width="1909" data-height="638" data-action="zoom" data-action-value="1*_LNuRsTIKMxaePz_RImBsQ.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1__LNuRsTIKMxaePz_RImBsQ.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="25"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*_LNuRsTIKMxaePz_RImBsQ.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*_LNuRsTIKMxaePz_RImBsQ.jpeg"></noscript></div></div></figure><figure name="9ae5" id="9ae5" class="graf graf--figure graf--layoutOutsetCenter graf-after--figure" data-scroll="native"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 501px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.5%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*OVWiFTBaDVg576S9Jjx_OQ.jpeg" data-width="1565" data-height="759" data-action="zoom" data-action-value="1*OVWiFTBaDVg576S9Jjx_OQ.jpeg" data-scroll="native"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_OVWiFTBaDVg576S9Jjx_OQ.jpeg" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="36"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2400/1*OVWiFTBaDVg576S9Jjx_OQ.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2400/1*OVWiFTBaDVg576S9Jjx_OQ.jpeg"></noscript></div></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="c4c3" id="c4c3" class="graf graf--p graf-after--figure">Any new requests will be processing by next pod in list, you can check this by looking in to the pods logs. For example new user will be created by application in one pod, then next pod will respond for next request and so on. As this app use same persistent volume for storing DB even if all of the replicas will disappear, all data will be in safe.</p><p name="f8ad" id="f8ad" class="graf graf--p graf-after--p">In big and complicated applications we’ll need not only dedicated volume for the DB, but also different volumes for placing static content and more else things in them.</p><p name="7274" id="7274" class="graf graf--p graf-after--p">Well, it seems that we almost finished with this part of tutorial, there is a lot of things I can add, because the Kubernetes theme is big and dynamically growing, but I’ll stop for now. The main goal for this articles cycle was showing the way of creating own Kubernetes cluster and I hope this was useful enough for you.</p><p name="93b6" id="93b6" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">P.S</strong></p><p name="9a89" id="9a89" class="graf graf--p graf-after--p">Stability and stress tests, of course.</p><p name="e58b" id="e58b" class="graf graf--p graf-after--p">Cluster schema that we used in this example may continue working without 2 workers nodes, 1 master and 1 etcd node. You can shutdown them and see that our test app still working.</p><p name="0f73" id="0f73" class="graf graf--p graf-after--p">When I wrote this tutorials, I have preparing same cluster for the production, in fact almost same scheme. At one day, when the cluster was created and some part of application was deployed in it, there was a big power supply issue in the DC and totally all of cluster servers was shut downed, like in scary movies for sysadmins. Some of servers was down for a long time and some got a file system errors after it. But when I started them all again, I was very surprising when Kubernetes cluster fully recovered. All GlusterFS volumes, all deployments has started. It shows a big potential for this technology as for me.</p><p name="7540" id="7540" class="graf graf--p graf-after--p graf--trailing">Goodbye and hope to meet you again.</p></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link" href="https://medium.com/tag/kubernetes?source=post" data-action-source="post">Kubernetes</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/heapster?source=post" data-action-source="post">Heapster</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/dashboard?source=post" data-action-source="post">Dashboard</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/fluentd?source=post" data-action-source="post">Fluentd</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/logs?source=post" data-action-source="post">Logs</a></li></ul></div></div></div><div class="postActions js-postActionsFooter "><div class="u-flexCenter"><div class="u-flex1"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="340357f21453" data-is-icon-29px="true" data-is-circle="true" data-has-recommend-list="true" data-source="post_actions_footer-----340357f21453---------------------clap_footer" data-clap-string-singular="clap" data-clap-string-plural="claps"><div class="u-relative u-foreground"><button class="button button--large button--circle button--withChrome u-baseColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker clapButton--largePill u-relative u-foreground u-xs-paddingLeft13 u-width60 u-height60 u-accentColor--textNormal u-accentColor--buttonNormal clap-onboardingcollection" data-action="multivote" data-action-value="340357f21453" data-action-type="long-press" data-action-source="post_actions_footer-----340357f21453---------------------clap_footer" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><path d="M28.86 17.342l-3.64-6.402c-.292-.433-.712-.729-1.163-.8a1.124 1.124 0 0 0-.889.213c-.63.488-.742 1.181-.33 2.061l1.222 2.587 1.4 2.46c2.234 4.085 1.511 8.007-2.145 11.663-.26.26-.526.49-.797.707 1.42-.084 2.881-.683 4.292-2.094 3.822-3.823 3.565-7.876 2.05-10.395zm-6.252 11.075c3.352-3.35 3.998-6.775 1.978-10.469l-3.378-5.945c-.292-.432-.712-.728-1.163-.8a1.122 1.122 0 0 0-.89.213c-.63.49-.742 1.182-.33 2.061l1.72 3.638a.502.502 0 0 1-.806.568l-8.91-8.91a1.335 1.335 0 0 0-1.887 1.886l5.292 5.292a.5.5 0 0 1-.707.707l-5.292-5.292-1.492-1.492c-.503-.503-1.382-.505-1.887 0a1.337 1.337 0 0 0 0 1.886l1.493 1.492 5.292 5.292a.499.499 0 0 1-.353.854.5.5 0 0 1-.354-.147L5.642 13.96a1.338 1.338 0 0 0-1.887 0 1.338 1.338 0 0 0 0 1.887l2.23 2.228 3.322 3.324a.499.499 0 0 1-.353.853.502.502 0 0 1-.354-.146l-3.323-3.324a1.333 1.333 0 0 0-1.886 0 1.325 1.325 0 0 0-.39.943c0 .356.138.691.39.943l6.396 6.397c3.528 3.53 8.86 5.313 12.821 1.353zM12.73 9.26l5.68 5.68-.49-1.037c-.518-1.107-.426-2.13.224-2.89l-3.303-3.304a1.337 1.337 0 0 0-1.886 0 1.326 1.326 0 0 0-.39.944c0 .217.067.42.165.607zm14.787 19.184c-1.599 1.6-3.417 2.392-5.353 2.392-.349 0-.7-.03-1.058-.082a7.922 7.922 0 0 1-3.667.887c-3.049 0-6.115-1.626-8.359-3.87l-6.396-6.397A2.315 2.315 0 0 1 2 19.724a2.327 2.327 0 0 1 1.923-2.296l-.875-.875a2.339 2.339 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.647l-.139-.139c-.91-.91-.91-2.39 0-3.3.884-.884 2.421-.882 3.301 0l.138.14a2.335 2.335 0 0 1 3.948-1.24l.093.092c.091-.423.291-.828.62-1.157a2.336 2.336 0 0 1 3.3 0l3.384 3.386a2.167 2.167 0 0 1 1.271-.173c.534.086 1.03.354 1.441.765.11-.549.415-1.034.911-1.418a2.12 2.12 0 0 1 1.661-.41c.727.117 1.385.565 1.853 1.262l3.652 6.423c1.704 2.832 2.025 7.377-2.205 11.607zM13.217.484l-1.917.882 2.37 2.837-.454-3.719zm8.487.877l-1.928-.86-.44 3.697 2.368-2.837zM16.5 3.293L15.478-.005h2.044L16.5 3.293z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><g fill-rule="evenodd"><path d="M29.58 17.1l-3.854-6.78c-.365-.543-.876-.899-1.431-.989a1.491 1.491 0 0 0-1.16.281c-.42.327-.65.736-.7 1.207v.001l3.623 6.367c2.46 4.498 1.67 8.802-2.333 12.807-.265.265-.536.505-.81.728 1.973-.222 3.474-1.286 4.45-2.263 4.166-4.165 3.875-8.6 2.215-11.36zm-4.831.82l-3.581-6.3c-.296-.439-.725-.742-1.183-.815a1.105 1.105 0 0 0-.89.213c-.647.502-.755 1.188-.33 2.098l1.825 3.858a.601.601 0 0 1-.197.747.596.596 0 0 1-.77-.067L10.178 8.21c-.508-.506-1.393-.506-1.901 0a1.335 1.335 0 0 0-.393.95c0 .36.139.698.393.95v.001l5.61 5.61a.599.599 0 1 1-.848.847l-5.606-5.606c-.001 0-.002 0-.003-.002L5.848 9.375a1.349 1.349 0 0 0-1.902 0 1.348 1.348 0 0 0 0 1.901l1.582 1.582 5.61 5.61a.6.6 0 0 1-.848.848l-5.61-5.61c-.51-.508-1.393-.508-1.9 0a1.332 1.332 0 0 0-.394.95c0 .36.139.697.393.952l2.363 2.362c.002.001.002.002.002.003l3.52 3.52a.6.6 0 0 1-.848.847l-3.522-3.523h-.001a1.336 1.336 0 0 0-.95-.393 1.345 1.345 0 0 0-.949 2.295l6.779 6.78c3.715 3.713 9.327 5.598 13.49 1.434 3.527-3.528 4.21-7.13 2.086-11.015zM11.817 7.727c.06-.328.213-.64.466-.893.64-.64 1.755-.64 2.396 0l3.232 3.232c-.82.783-1.09 1.833-.764 2.992l-5.33-5.33z"></path><path d="M13.285.48l-1.916.881 2.37 2.837z"></path><path d="M21.719 1.361L19.79.501l-.44 3.697z"></path><path d="M16.502 3.298L15.481 0h2.043z"></path></g></svg></span></span></button><div class="clapUndo u-width60 u-round u-height32 u-absolute u-borderBox u-paddingRight5 u-transition--transform200Springu-backgroundGrayLighter js-clapUndo" style="top: 14px; padding: 2px;"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-floatRight" data-action="multivote-undo" data-action-value="340357f21453"><span class="svgIcon svgIcon--removeThin svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"></path></svg></span></button></div></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft16"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-textColorDarker" data-action="show-recommends" data-action-value="340357f21453">57 claps</button><span class="u-xs-hide"></span></span></div></div><div class="buttonSet u-flex0"><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless u-xs-hide u-marginRight12" href="https://medium.com/p/340357f21453/share/twitter" title="Share on Twitter" aria-label="Share on Twitter" target="_blank" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--twitterFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M22.053 7.54a4.474 4.474 0 0 0-3.31-1.455 4.526 4.526 0 0 0-4.526 4.524c0 .35.04.7.082 1.05a12.9 12.9 0 0 1-9.3-4.77c-.39.69-.61 1.46-.65 2.26.03 1.6.83 2.99 2.02 3.79-.72-.02-1.41-.22-2.02-.57-.01.02-.01.04 0 .08-.01 2.17 1.55 4 3.63 4.44-.39.08-.79.13-1.21.16-.28-.03-.57-.05-.81-.08.54 1.77 2.21 3.08 4.2 3.15a9.564 9.564 0 0 1-5.66 1.94c-.34-.03-.7-.06-1.05-.08 2 1.27 4.38 2.02 6.94 2.02 8.31 0 12.86-6.9 12.84-12.85.02-.24.01-.43 0-.65.89-.62 1.65-1.42 2.26-2.34-.82.38-1.69.62-2.59.72a4.37 4.37 0 0 0 1.94-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></span></span></a><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless u-xs-hide u-marginRight12" href="https://medium.com/p/340357f21453/share/facebook" title="Share on Facebook" aria-label="Share on Facebook" target="_blank" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--facebookSquare svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M23.209 5H5.792A.792.792 0 0 0 5 5.791V23.21c0 .437.354.791.792.791h9.303v-7.125H12.72v-2.968h2.375v-2.375c0-2.455 1.553-3.662 3.741-3.662 1.049 0 1.95.078 2.213.112v2.565h-1.517c-1.192 0-1.469.567-1.469 1.397v1.963h2.969l-.594 2.968h-2.375L18.11 24h5.099a.791.791 0 0 0 .791-.791V5.79a.791.791 0 0 0-.791-.79"></path></svg></span></span></a><button class="button button--large button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-show u-marginRight10" title="Share this story on Twitter or Facebook" aria-label="Share this story on Twitter or Facebook" data-action="show-share-popover" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--share svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M20.385 8H19a.5.5 0 1 0 .011 1h1.39c.43 0 .84.168 1.14.473.31.305.48.71.48 1.142v10.77c0 .43-.17.837-.47 1.142-.3.305-.71.473-1.14.473H8.62c-.43 0-.84-.168-1.144-.473a1.603 1.603 0 0 1-.473-1.142v-10.77c0-.43.17-.837.48-1.142A1.599 1.599 0 0 1 8.62 9H10a.502.502 0 0 0 0-1H8.615c-.67 0-1.338.255-1.85.766-.51.51-.765 1.18-.765 1.85v10.77c0 .668.255 1.337.766 1.848.51.51 1.18.766 1.85.766h11.77c.668 0 1.337-.255 1.848-.766.51-.51.766-1.18.766-1.85v-10.77c0-.668-.255-1.337-.766-1.848A2.61 2.61 0 0 0 20.384 8zm-8.67-2.508L14 3.207v8.362c0 .27.224.5.5.5s.5-.23.5-.5V3.2l2.285 2.285a.49.49 0 0 0 .704-.001.511.511 0 0 0 0-.708l-3.14-3.14a.504.504 0 0 0-.71 0L11 4.776a.501.501 0 0 0 .71.706" fill-rule="evenodd"></path></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" data-action="respond" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal u-marginRight12" data-action="scroll-to-responses">2</button><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="340357f21453" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px u-marginRight4"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px u-marginRight4"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon js-moreActionsButton" title="More actions" aria-label="More actions" data-action="more-actions"><span class="svgIcon svgIcon--more svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="-480.5 272.5 21 21"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"></path></svg></span></button></div></div></div></div><div class="u-maxWidth740 u-paddingTop20 u-marginTop20 u-borderTopLightest container u-paddingBottom20 u-xs-paddingBottom10 js-postAttributionFooterContainer"><div class="row js-postFooterInfo"><div class="col u-size6of12 u-xs-size12of12"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState" data-user-id="626db2fc9efe"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton" data-action="toggle-block-user" data-action-value="626db2fc9efe" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton" data-action="toggle-subscribe-user" data-action-value="626db2fc9efe" data-action-source="footer_card-626db2fc9efe-------------------------follow_footer" data-subscribe-source="footer_card" data-follow-context-entity-id="340357f21453"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell"><a class="link u-baseColor--link avatar" href="https://medium.com/@ratibor78?source=footer_card" title="Go to the profile of Alexey Nizhegolenko" aria-label="Go to the profile of Alexey Nizhegolenko" data-action-source="footer_card" data-user-id="626db2fc9efe" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_aMCBXLrw-RxKEQCGpz5ihw(1).jpeg" class="avatar-image avatar-image--small" alt="Go to the profile of Alexey Nizhegolenko"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://medium.com/@ratibor78" property="cc:attributionName" title="Go to the profile of Alexey Nizhegolenko" aria-label="Go to the profile of Alexey Nizhegolenko" rel="author cc:attributionUrl" data-user-id="626db2fc9efe" dir="auto">Alexey Nizhegolenko</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Sysadmin &amp; DevOps Engineer in Internetvikings, Stockholm.</p></div></li></div><div class="col u-size6of12 u-xs-size12of12 u-xs-marginTop30"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardCollection"><div class="u-marginLeft20 u-floatRight"><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton" data-action="toggle-follow-collection" data-action-source="----10d1a7495d39----------------------follow_footer" data-collection-id="10d1a7495d39"><span class="button-label  js-buttonLabel">Follow</span></button></div><div class="u-tableCell "><a class="link u-baseColor--link avatar avatar--roundedRectangle" href="https://medium.com/devopslinks?source=footer_card" title="Go to DevOpsLinks" aria-label="Go to DevOpsLinks" data-action-source="footer_card"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_8bmVi5Sq9m6n8sdGrp0y4w(1).png" class="avatar-image u-size60x60" alt="DevOpsLinks"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://medium.com/devopslinks?source=footer_card" rel="collection" data-action-source="footer_card">DevOpsLinks</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">The Must-Read Publication for Aspiring DevOps Enthusiasts</p><div class="buttonSet"></div></div></li></div></div></div><div class="js-postFooterPlacements" data-post-id="340357f21453" data-collection-id="10d1a7495d39" data-scroll="native"><div class="streamItem streamItem--placementCardGrid js-streamItem"><div class="u-clearfix u-backgroundGrayLightest"><div class="row u-marginAuto u-maxWidth1032 u-paddingTop30 u-paddingBottom40"><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-width100pct u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackPostPresentation" data-post-id="cd2f3abb3511" data-source="placement_card_footer_grid---------0-41" data-tracking-context="placement" data-scroll="native"><a class="link link--noUnderline u-baseColor--link" href="https://medium.com/devopslinks/using-the-operator-lifecycle-manager-to-deploy-prometheus-on-openshift-cd2f3abb3511?source=placement_card_footer_grid---------0-41" data-action-source="placement_card_footer_grid---------0-41"><div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-width100pct u-borderBottomLight u-borderRadiusTop4" style="background-image: url(&quot;https://cdn-images-1.medium.com/fit/c/800/240/1*Qk535YvcDIRgM2mojZllmw.png&quot;); background-position: 50% 50% !important;"></div></a><div class="u-padding15 u-borderBox u-flexColumn u-height180"><a class="link link--noUnderline u-baseColor--link u-flex1" href="https://medium.com/devopslinks/using-the-operator-lifecycle-manager-to-deploy-prometheus-on-openshift-cd2f3abb3511?source=placement_card_footer_grid---------0-41" data-action-source="placement_card_footer_grid---------0-41"><div class="uiScale uiScale-ui--regular uiScale-caption--small u-textColorNormal u-marginBottom7">More from DevOpsLinks</div><div class="ui-h3 ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Using the Operator Lifecycle Manager to deploy Prometheus on OpenShift</div></a><div class="u-paddingBottom10 u-flex0 u-flexCenter"><div class="u-flex1 u-minWidth0 u-marginRight10"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@carlos.vicens.alonso" data-action="show-user-card" data-action-value="15c32cd806ce" data-action-type="hover" data-user-id="15c32cd806ce" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_wgHg5DLNsr3ySNt8ER1QZg.jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Carlos Vicens"></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--darker" href="https://medium.com/@carlos.vicens.alonso?source=placement_card_footer_grid---------0-41" data-action="show-user-card" data-action-source="placement_card_footer_grid---------0-41" data-action-value="15c32cd806ce" data-action-type="hover" data-user-id="15c32cd806ce" dir="auto">Carlos Vicens</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/devopslinks/using-the-operator-lifecycle-manager-to-deploy-prometheus-on-openshift-cd2f3abb3511?source=placement_card_footer_grid---------0-41" data-action="open-post" data-action-value="https://medium.com/devopslinks/using-the-operator-lifecycle-manager-to-deploy-prometheus-on-openshift-cd2f3abb3511?source=placement_card_footer_grid---------0-41" data-action-source="preview-listing"><time datetime="2019-02-12T16:55:05.427Z">Feb 12</time></a><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="9 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="cd2f3abb3511" data-is-label-padded="true" data-source="placement_card_footer_grid-----cd2f3abb3511----0-41----------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="multivote" data-action-value="cd2f3abb3511" data-action-type="long-press" data-action-source="placement_card_footer_grid-----cd2f3abb3511----0-41----------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="cd2f3abb3511">61</button></span></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="cd2f3abb3511" data-action-source="placement_card_footer_grid-----cd2f3abb3511----0-41----------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button></div></div></div></div></div></div><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-width100pct u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackPostPresentation" data-post-id="18734a1c1ee8" data-source="placement_card_footer_grid---------1-41" data-tracking-context="placement" data-scroll="native"><a class="link link--noUnderline u-baseColor--link" href="https://medium.com/devopslinks/why-scaling-is-the-biggest-challenge-in-developing-apps-with-realtime-features-18734a1c1ee8?source=placement_card_footer_grid---------1-41" data-action-source="placement_card_footer_grid---------1-41"><div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-width100pct u-borderBottomLight u-borderRadiusTop4" style="background-image: url(&quot;https://cdn-images-1.medium.com/fit/c/800/240/0*pvoBfdyg22kg7fwT.png&quot;); background-position: 50% 50% !important;"></div></a><div class="u-padding15 u-borderBox u-flexColumn u-height180"><a class="link link--noUnderline u-baseColor--link u-flex1" href="https://medium.com/devopslinks/why-scaling-is-the-biggest-challenge-in-developing-apps-with-realtime-features-18734a1c1ee8?source=placement_card_footer_grid---------1-41" data-action-source="placement_card_footer_grid---------1-41"><div class="uiScale uiScale-ui--regular uiScale-caption--small u-textColorNormal u-marginBottom7">More from DevOpsLinks</div><div class="ui-h3 ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Why Scaling is the Biggest Challenge in Developing Apps with Realtime Features</div></a><div class="u-paddingBottom10 u-flex0 u-flexCenter"><div class="u-flex1 u-minWidth0 u-marginRight10"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@joehanson" data-action="show-user-card" data-action-value="a12a4aa34693" data-action-type="hover" data-user-id="a12a4aa34693" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_2tZkfvrowpW55t5vwjKZPw.jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Joe Hanson"></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--darker" href="https://medium.com/@joehanson?source=placement_card_footer_grid---------1-41" data-action="show-user-card" data-action-source="placement_card_footer_grid---------1-41" data-action-value="a12a4aa34693" data-action-type="hover" data-user-id="a12a4aa34693" dir="auto">Joe Hanson</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/devopslinks/why-scaling-is-the-biggest-challenge-in-developing-apps-with-realtime-features-18734a1c1ee8?source=placement_card_footer_grid---------1-41" data-action="open-post" data-action-value="https://medium.com/devopslinks/why-scaling-is-the-biggest-challenge-in-developing-apps-with-realtime-features-18734a1c1ee8?source=placement_card_footer_grid---------1-41" data-action-source="preview-listing"><time datetime="2019-02-11T22:45:38.180Z">Feb 11</time></a><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="4 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="18734a1c1ee8" data-is-label-padded="true" data-source="placement_card_footer_grid-----18734a1c1ee8----1-41----------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="multivote" data-action-value="18734a1c1ee8" data-action-type="long-press" data-action-source="placement_card_footer_grid-----18734a1c1ee8----1-41----------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="18734a1c1ee8">294</button></span></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="18734a1c1ee8" data-action-source="placement_card_footer_grid-----18734a1c1ee8----1-41----------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button></div></div></div></div></div></div><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-width100pct u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackPostPresentation" data-post-id="4aa2cabd3880" data-source="placement_card_footer_grid---------2-41" data-tracking-context="placement" data-scroll="native"><a class="link link--noUnderline u-baseColor--link" href="https://medium.com/devopslinks/development-in-the-cloud-4aa2cabd3880?source=placement_card_footer_grid---------2-41" data-action-source="placement_card_footer_grid---------2-41"><div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-width100pct u-borderBottomLight u-borderRadiusTop4" style="background-image: url(&quot;https://cdn-images-1.medium.com/fit/c/800/240/1*2gF8u2ogLnBr3h6nBRobMg.png&quot;); background-position: 50% 50% !important;"></div></a><div class="u-padding15 u-borderBox u-flexColumn u-height180"><a class="link link--noUnderline u-baseColor--link u-flex1" href="https://medium.com/devopslinks/development-in-the-cloud-4aa2cabd3880?source=placement_card_footer_grid---------2-41" data-action-source="placement_card_footer_grid---------2-41"><div class="uiScale uiScale-ui--regular uiScale-caption--small u-textColorNormal u-marginBottom7">More from DevOpsLinks</div><div class="ui-h3 ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Development in the Cloud</div></a><div class="u-paddingBottom10 u-flex0 u-flexCenter"><div class="u-flex1 u-minWidth0 u-marginRight10"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@JakubBorys" data-action="show-user-card" data-action-value="879f7254b922" data-action-type="hover" data-user-id="879f7254b922" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/0_3i5rS6cD-ONiqjEC.jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Jakub Borys"></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--darker" href="https://medium.com/@JakubBorys?source=placement_card_footer_grid---------2-41" data-action="show-user-card" data-action-source="placement_card_footer_grid---------2-41" data-action-value="879f7254b922" data-action-type="hover" data-user-id="879f7254b922" dir="auto">Jakub Borys</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/devopslinks/development-in-the-cloud-4aa2cabd3880?source=placement_card_footer_grid---------2-41" data-action="open-post" data-action-value="https://medium.com/devopslinks/development-in-the-cloud-4aa2cabd3880?source=placement_card_footer_grid---------2-41" data-action-source="preview-listing"><time datetime="2019-02-06T08:46:28.432Z">Feb 6</time></a><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="9 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="4aa2cabd3880" data-is-label-padded="true" data-source="placement_card_footer_grid-----4aa2cabd3880----2-41----------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="multivote" data-action-value="4aa2cabd3880" data-action-type="long-press" data-action-source="placement_card_footer_grid-----4aa2cabd3880----2-41----------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="4aa2cabd3880">124</button></span></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="4aa2cabd3880" data-action-source="placement_card_footer_grid-----4aa2cabd3880----2-41----------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button></div></div></div></div></div></div></div></div></div></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper" data-action-scope="_actionscope_5"><div class="container u-maxWidth740"><div class="responsesStreamWrapper u-maxWidth640 js-responsesStreamWrapper"><div class="container responsesStream-title u-paddingTop15"><div class="row"><header class="heading"><div class="u-clearfix"><div class="heading-content u-floatLeft"><span class="heading-title heading-title--semibold">Responses</span></div></div></header></div></div><div class="responsesStream-editor cardChromeless u-marginBottom20 u-paddingLeft20 u-paddingRight20 js-responsesStreamEditor"><div class="inlineNewPostControl js-inlineNewPostControl" data-action-scope="_actionscope_11"><div class="inlineEditor is-collapsed is-postEditMode js-inlineEditor" data-action="focus-editor"><div class="u-paddingTop20 js-block js-inlineEditorContent"><div class="inlineEditor-header"><div class="inlineEditor-avatar u-paddingRight20"><div class="avatar u-inline"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_c4hzLnwcwH1AWd4A1wh16g(1).jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Łukasz Andrzejewski"></div></div><div class="inlineEditor-headerContent"><div class="inlineEditor-placeholder js-inlineEditorPrompt">Write a response…</div><div class="inlineEditor-author u-accentColor--textNormal">Łukasz Andrzejewski</div></div></div></div></div></div></div><div class="responsesStream js-responsesStream"><div class="streamItem streamItem--conversation js-streamItem" data-action-scope="_actionscope_6"><div class="streamItemConversation"><div class="u-marginLeft20"><div class="streamItemConversation-divider"></div><header class="heading heading--light heading--simple"><div class="u-clearfix"><div class="heading-content u-floatLeft"><span class="heading-title">Conversation between <a class="link link--accent u-accentColor--textNormal u-baseColor--link" href="https://medium.com/@shwetkprabhat" data-action="show-user-card" data-action-value="509e65d21403" data-action-type="hover" data-user-id="509e65d21403" dir="auto">Shwet Prabhat</a> and <a class="link link--accent u-accentColor--textNormal u-baseColor--link" href="https://medium.com/@ratibor78" data-action="show-user-card" data-action-value="626db2fc9efe" data-action-type="hover" data-user-id="626db2fc9efe" dir="auto">Alexey Nizhegolenko</a>.</span></div></div></header></div><div class="streamItemConversation-inner cardChromeless"><div class="streamItemConversationItem streamItemConversationItem--preview"><div class="postArticle js-postArticle js-trackPostPresentation js-trackPostScrolls postArticle--short" data-post-id="ce210fb15ce2" data-source="responses---------0---------------------" data-action-scope="_actionscope_7" data-scroll="native"><div class="u-clearfix u-marginBottom15 u-paddingTop5"><div class="postMetaInline u-floatLeft"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@shwetkprabhat" data-action="show-user-card" data-action-value="509e65d21403" data-action-type="hover" data-user-id="509e65d21403" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/0_3y3RbAZlrtiiqfjt.jpg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Shwet Prabhat"></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--accent u-accentColor--textNormal u-accentColor--textDarken" href="https://medium.com/@shwetkprabhat?source=responses---------0---------------------" data-action="show-user-card" data-action-source="responses---------0---------------------" data-action-value="509e65d21403" data-action-type="hover" data-user-id="509e65d21403" dir="auto">Shwet Prabhat</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/@shwetkprabhat/i-have-been-checking-almost-everyday-for-this-third-part-ce210fb15ce2?source=responses---------0---------------------" data-action="open-post" data-action-value="https://medium.com/@shwetkprabhat/i-have-been-checking-almost-everyday-for-this-third-part-ce210fb15ce2?source=responses---------0---------------------" data-action-source="preview-listing"><time datetime="2019-03-01T21:12:18.516Z">Mar 1</time></a></div></div></div></div></div><div><a class="" href="https://medium.com/@shwetkprabhat/i-have-been-checking-almost-everyday-for-this-third-part-ce210fb15ce2?source=responses---------0---------------------"><div class="postArticle-content js-postField"><section class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="f964" id="f964" class="graf graf--p graf--leading graf--trailing">I have been checking almost everyday for this third part&nbsp;:)</p></div></div></section></div></a></div><div class="u-clearfix u-paddingTop10"><div class="u-floatLeft"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="ce210fb15ce2" data-is-flush-left="true" data-source="listing-----ce210fb15ce2---------------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="multivote" data-action-value="ce210fb15ce2" data-action-type="long-press" data-action-source="listing-----ce210fb15ce2---------------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents" data-action="show-recommends" data-action-value="ce210fb15ce2">1</button></span></div></div><div class="buttonSet u-floatRight"><a class="button button--chromeless u-baseColor--buttonNormal" href="https://medium.com/@shwetkprabhat/i-have-been-checking-almost-everyday-for-this-third-part-ce210fb15ce2?source=responses---------0---------------------#--responses" data-action-source="responses---------0---------------------">1 response</a><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="ce210fb15ce2" data-action-source="listing-----ce210fb15ce2---------------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button><button class="button button--chromeless is-touchIconBlackPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon js-postActionsButton" data-action="post-actions" data-action-value="ce210fb15ce2"><span class="svgIcon svgIcon--arrowDown svgIcon--19px is-flushRight"><svg class="svgIcon-use" width="19" height="19"><path d="M3.9 6.772l5.205 5.756.427.472.427-.472 5.155-5.698-.854-.772-4.728 5.254L4.753 6z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div><div class="streamItemConversationItem streamItemConversationItem--preview"><div class="postArticle js-postArticle js-trackPostPresentation js-trackPostScrolls postArticle--short" data-post-id="ec99b507fe71" data-source="responses---------0---------------------" data-action-scope="_actionscope_8" data-scroll="native"><div class="u-clearfix u-marginBottom15 u-paddingTop5"><div class="postMetaInline u-floatLeft"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@ratibor78" data-action="show-user-card" data-action-value="626db2fc9efe" data-action-type="hover" data-user-id="626db2fc9efe" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/1_aMCBXLrw-RxKEQCGpz5ihw(2).jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Alexey Nizhegolenko"></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--accent u-accentColor--textNormal u-accentColor--textDarken" href="https://medium.com/@ratibor78?source=responses---------0---------------------" data-action="show-user-card" data-action-source="responses---------0---------------------" data-action-value="626db2fc9efe" data-action-type="hover" data-user-id="626db2fc9efe" dir="auto">Alexey Nizhegolenko</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/@ratibor78/thanks-it-really-nice-to-hear-hope-itll-be-helpful-have-a-nice-time-ec99b507fe71?source=responses---------0---------------------" data-action="open-post" data-action-value="https://medium.com/@ratibor78/thanks-it-really-nice-to-hear-hope-itll-be-helpful-have-a-nice-time-ec99b507fe71?source=responses---------0---------------------" data-action-source="preview-listing"><time datetime="2019-03-01T21:30:50.678Z">Mar 1</time></a></div></div></div></div></div><div><a class="" href="https://medium.com/@ratibor78/thanks-it-really-nice-to-hear-hope-itll-be-helpful-have-a-nice-time-ec99b507fe71?source=responses---------0---------------------"><div class="postArticle-content js-postField"><section class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="8eee" id="8eee" class="graf graf--p graf--leading graf--trailing">Thanks, it really nice to hear hope it’ll be helpful. Have a nice time&nbsp;:)</p></div></div></section></div></a></div><div class="u-clearfix u-paddingTop10"><div class="u-floatLeft"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="ec99b507fe71" data-is-flush-left="true" data-source="listing-----ec99b507fe71---------------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="multivote" data-action-value="ec99b507fe71" data-action-type="long-press" data-action-source="listing-----ec99b507fe71---------------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents" data-action="show-recommends" data-action-value="ec99b507fe71">1</button></span></div></div><div class="buttonSet u-floatRight"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="ec99b507fe71" data-action-source="listing-----ec99b507fe71---------------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button><button class="button button--chromeless is-touchIconBlackPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon js-postActionsButton" data-action="post-actions" data-action-value="ec99b507fe71"><span class="svgIcon svgIcon--arrowDown svgIcon--19px is-flushRight"><svg class="svgIcon-use" width="19" height="19"><path d="M3.9 6.772l5.205 5.756.427.472.427-.472 5.155-5.698-.854-.772-4.728 5.254L4.753 6z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div></div></div></div><div class="streamItem streamItem--postPreview js-streamItem" data-action-scope="_actionscope_9"><div class="cardChromeless u-marginTop20 u-paddingTop10 u-paddingBottom15 u-paddingLeft20 u-paddingRight20"><div class="postArticle postArticle--short js-postArticle js-trackPostPresentation js-trackPostScrolls" data-post-id="4e7563ffa6c3" data-source="responses---------1-31--------------------" data-action-scope="_actionscope_10" data-scroll="native"><div class="u-marginBottom10"><div class="postMetaInline">Applause from <a class="link link--darken u-accentColor--textDarken u-baseColor--link" href="https://medium.com/@ratibor78" data-action="show-user-card" data-action-value="626db2fc9efe" data-action-type="hover" data-user-id="626db2fc9efe" dir="auto">Alexey Nizhegolenko</a> (author)</div></div><div class="u-clearfix u-marginBottom15 u-paddingTop5"><div class="postMetaInline u-floatLeft"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@shwetkprabhat" data-action="show-user-card" data-action-value="509e65d21403" data-action-type="hover" data-user-id="509e65d21403" dir="auto"><img src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/0_3y3RbAZlrtiiqfjt.jpg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Shwet Prabhat"></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--accent u-accentColor--textNormal u-accentColor--textDarken" href="https://medium.com/@shwetkprabhat?source=responses---------1-31--------------------" data-action="show-user-card" data-action-source="responses---------1-31--------------------" data-action-value="509e65d21403" data-action-type="hover" data-user-id="509e65d21403" dir="auto">Shwet Prabhat</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/@shwetkprabhat/its-absolutely-helps-this-was-a-great-3-part-series-4e7563ffa6c3?source=responses---------1-31--------------------" data-action="open-post" data-action-value="https://medium.com/@shwetkprabhat/its-absolutely-helps-this-was-a-great-3-part-series-4e7563ffa6c3?source=responses---------1-31--------------------" data-action-source="preview-listing"><time datetime="2019-03-01T21:50:47.091Z">Mar 1</time></a></div></div></div></div></div><div><a class="" href="https://medium.com/@shwetkprabhat/its-absolutely-helps-this-was-a-great-3-part-series-4e7563ffa6c3?source=responses---------1-31--------------------" data-action-source="responses---------1-31--------------------"><div class="postArticle-content js-postField"><section class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="9bb4" id="9bb4" class="graf graf--p graf--leading graf--trailing">Its absolutely helps, this was a great 3 part series! The only thing thats missing from a perfect setup is HA traefik + LetsEncrypt integration with either consul or etcd kv store! Your 3 part article is so much like <span class="markup--anchor markup--p-anchor" data-action="open-inner-link" data-action-value="https://dockerswarm.rocks/">https://dockerswarm.rocks/</span> which makes the k8s on bare metal implementation so easy. Great job done!</p></div></div></section></div></a></div><div class="u-clearfix u-paddingTop10"><div class="u-floatLeft"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="4e7563ffa6c3" data-is-flush-left="true" data-source="listing-----4e7563ffa6c3---------------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="multivote" data-action-value="4e7563ffa6c3" data-action-type="long-press" data-action-source="listing-----4e7563ffa6c3---------------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px is-flushLeft"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents" data-action="show-recommends" data-action-value="4e7563ffa6c3">1</button></span></div></div><div class="buttonSet u-floatRight"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="4e7563ffa6c3" data-action-source="listing-----4e7563ffa6c3---------------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button><button class="button button--chromeless is-touchIconBlackPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon js-postActionsButton" data-action="post-actions" data-action-value="4e7563ffa6c3"><span class="svgIcon svgIcon--arrowDown svgIcon--19px is-flushRight"><svg class="svgIcon-use" width="19" height="19"><path d="M3.9 6.772l5.205 5.756.427.472.427-.472 5.155-5.698-.854-.772-4.728 5.254L4.753 6z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div></div></div><div class="container u-hide js-showOtherResponses"><div class="row"><button class="button button--primary button--withChrome u-accentColor--buttonNormal responsesStream-showOtherResponses cardChromeless u-width100pct u-marginVertical20 u-heightAuto" data-action="show-other-responses">Show all responses</button></div></div><div class="responsesStream js-responsesStreamOther"></div></div></div></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><aside class="u-marginAuto u-maxWidth1032 js-postLeftSidebar"><div class="u-foreground u-top0 u-fixed u-sm-hide js-postShareWidget u-transition--fadeIn300" data-scroll="fixed" style="transform: translateY(200px);"><ul><li class="u-marginVertical10"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="340357f21453" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_share_widget-----340357f21453---------------------clap_sidebar"><div class="u-relative u-foreground"><button class="button button--primary button--large button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="multivote" data-action-value="340357f21453" data-action-type="long-press" data-action-source="post_share_widget-----340357f21453---------------------clap_sidebar" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><g fill-rule="evenodd"><path d="M13.739 1l.761 2.966L15.261 1z"></path><path d="M16.815 4.776l1.84-2.551-1.43-.471z"></path><path d="M10.378 2.224l1.84 2.551-.408-3.022z"></path><path d="M22.382 22.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L6.11 15.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L8.43 9.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L20.628 15c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM12.99 6.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><g fill-rule="evenodd"><path d="M13.738 1l.762 2.966L15.262 1z"></path><path d="M18.634 2.224l-1.432-.47-.408 3.022z"></path><path d="M11.79 1.754l-1.431.47 1.84 2.552z"></path><path d="M24.472 14.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M14.58 10.887c-.156-.83.096-1.569.692-2.142L12.78 6.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M17.812 10.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L9.2 7.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L7.046 9.54 5.802 8.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394l1.241 1.241 4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L4.89 11.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C21.74 20.8 22.271 18 20.62 14.982l-2.809-4.942z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton" data-action="show-recommends" data-action-value="340357f21453">57</button></span></div></li><li class="u-marginVertical10 u-marginLeft3"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="340357f21453" data-action-source="post_share_widget-----340357f21453---------------------bookmark_sidebar"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"></path></svg></span></span></button></li><li class="u-marginVertical10 u-marginLeft3"><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless" href="https://medium.com/p/340357f21453/share/twitter" title="Share on Twitter" aria-label="Share on Twitter" target="_blank" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--twitterFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M22.053 7.54a4.474 4.474 0 0 0-3.31-1.455 4.526 4.526 0 0 0-4.526 4.524c0 .35.04.7.082 1.05a12.9 12.9 0 0 1-9.3-4.77c-.39.69-.61 1.46-.65 2.26.03 1.6.83 2.99 2.02 3.79-.72-.02-1.41-.22-2.02-.57-.01.02-.01.04 0 .08-.01 2.17 1.55 4 3.63 4.44-.39.08-.79.13-1.21.16-.28-.03-.57-.05-.81-.08.54 1.77 2.21 3.08 4.2 3.15a9.564 9.564 0 0 1-5.66 1.94c-.34-.03-.7-.06-1.05-.08 2 1.27 4.38 2.02 6.94 2.02 8.31 0 12.86-6.9 12.84-12.85.02-.24.01-.43 0-.65.89-.62 1.65-1.42 2.26-2.34-.82.38-1.69.62-2.59.72a4.37 4.37 0 0 0 1.94-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></span></span></a></li><li class="u-marginVertical10 u-marginLeft3"><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless" href="https://medium.com/p/340357f21453/share/facebook" title="Share on Facebook" aria-label="Share on Facebook" target="_blank" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--facebookSquare svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M23.209 5H5.792A.792.792 0 0 0 5 5.791V23.21c0 .437.354.791.792.791h9.303v-7.125H12.72v-2.968h2.375v-2.375c0-2.455 1.553-3.662 3.741-3.662 1.049 0 1.95.078 2.213.112v2.565h-1.517c-1.192 0-1.469.567-1.469 1.397v1.963h2.969l-.594 2.968h-2.375L18.11 24h5.099a.791.791 0 0 0 .791-.791V5.79a.791.791 0 0 0-.791-.79"></path></svg></span></span></a></li></ul></div></aside><style class="js-collectionStyle">
.u-accentColor--borderLight {border-color: #858484 !important;}
.u-accentColor--borderNormal {border-color: #858484 !important;}
.u-accentColor--borderDark {border-color: #737171 !important;}
.u-accentColor--iconLight .svgIcon,.u-accentColor--iconLight.svgIcon {fill: #858484 !important;}
.u-accentColor--iconNormal .svgIcon,.u-accentColor--iconNormal.svgIcon {fill: #858484 !important;}
.u-accentColor--iconDark .svgIcon,.u-accentColor--iconDark.svgIcon {fill: #737171 !important;}
.u-accentColor--textNormal {color: #737171 !important;}
.u-accentColor--hoverTextNormal:hover {color: #737171 !important;}
.u-accentColor--textNormal.u-accentColor--textDarken:hover {color: #696868 !important;}
.u-accentColor--textDark {color: #696868 !important;}
.u-accentColor--backgroundLight {background-color: #858484 !important;}
.u-accentColor--backgroundNormal {background-color: #858484 !important;}
.u-accentColor--backgroundDark {background-color: #737171 !important;}
.u-accentColor--buttonDark {border-color: #737171 !important; color: #696868 !important;}
.u-accentColor--buttonDark:hover {border-color: #696868 !important;}
.u-accentColor--buttonDark .icon:before,.u-accentColor--buttonDark .svgIcon{color: #737171 !important; fill: #737171 !important;}
.u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: #858484 !important; color: #737171 !important;}
.u-accentColor--buttonNormal:hover {border-color: #737171 !important;}
.u-accentColor--buttonNormal .icon:before,.u-accentColor--buttonNormal .svgIcon{color: #858484 !important; fill: #858484 !important;}
.u-accentColor--buttonNormal.button--filled .icon:before,.u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-accentColor--buttonDark.button--filled,.u-accentColor--buttonDark.button--withChrome.is-active,.u-accentColor--fillWhenActive.is-active {background-color: #737171 !important; border-color: #737171 !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: #858484 !important; border-color: #858484 !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.postArticle.is-withAccentColors .markup--user,.postArticle.is-withAccentColors .markup--query {color: #737171 !important;}.u-tintBgColor {background-color: rgba(17, 17, 17, 1) !important;}.u-tintBgColor .u-fadeLeft:before {background-image: linear-gradient(to right, rgba(17, 17, 17, 1) 0%, rgba(17, 17, 17, 0) 100%) !important;}.u-tintBgColor .u-fadeRight:after {background-image: linear-gradient(to right, rgba(17, 17, 17, 0) 0%, rgba(17, 17, 17, 1) 100%) !important;}
.u-tintSpectrum .u-baseColor--borderLight {border-color: #939292 !important;}
.u-tintSpectrum .u-baseColor--borderNormal {border-color: #BDBBBB !important;}
.u-tintSpectrum .u-baseColor--borderDark {border-color: #E5E2E2 !important;}
.u-tintSpectrum .u-baseColor--iconLight .svgIcon,.u-tintSpectrum .u-baseColor--iconLight.svgIcon {fill: #939292 !important;}
.u-tintSpectrum .u-baseColor--iconNormal .svgIcon,.u-tintSpectrum .u-baseColor--iconNormal.svgIcon {fill: #BDBBBB !important;}
.u-tintSpectrum .u-baseColor--iconDark .svgIcon,.u-tintSpectrum .u-baseColor--iconDark.svgIcon {fill: #E5E2E2 !important;}
.u-tintSpectrum .u-baseColor--textNormal {color: #BDBBBB !important;}
.u-tintSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--textDark {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--textDarker {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--backgroundLight {background-color: #939292 !important;}
.u-tintSpectrum .u-baseColor--backgroundNormal {background-color: #BDBBBB !important;}
.u-tintSpectrum .u-baseColor--backgroundDark {background-color: #E5E2E2 !important;}
.u-tintSpectrum .u-baseColor--buttonLight {border-color: #939292 !important; color: #939292 !important;}
.u-tintSpectrum .u-baseColor--buttonLight:hover {border-color: #939292 !important;}
.u-tintSpectrum .u-baseColor--buttonLight .icon:before,.u-tintSpectrum .u-baseColor--buttonLight .svgIcon {color: #939292 !important; fill: #939292 !important;}
.u-tintSpectrum .u-baseColor--buttonDark {border-color: #E5E2E2 !important; color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--buttonDark:hover {border-color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--buttonDark .icon:before,.u-tintSpectrum .u-baseColor--buttonDark .svgIcon {color: #E5E2E2 !important; fill: #E5E2E2 !important;}
.u-tintSpectrum .u-baseColor--buttonNormal {border-color: #BDBBBB !important; color: #BDBBBB !important;}
.u-tintSpectrum .u-baseColor--buttonNormal:hover {border-color: #E5E2E2 !important;}
.u-tintSpectrum .u-baseColor--buttonNormal .icon:before,.u-tintSpectrum .u-baseColor--buttonNormal .svgIcon {color: #BDBBBB !important; fill: #BDBBBB !important;}
.u-tintSpectrum .u-baseColor--buttonDark.button--filled,.u-tintSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: #E5E2E2 !important; border-color: #E5E2E2 !important; color: rgba(17, 17, 17, 1) !important; fill: rgba(17, 17, 17, 1) !important;}
.u-tintSpectrum .u-baseColor--buttonNormal.button--filled,.u-tintSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: #BDBBBB !important; border-color: #BDBBBB !important; color: rgba(17, 17, 17, 1) !important; fill: rgba(17, 17, 17, 1) !important;}
.u-tintSpectrum .u-baseColor--link {color: #BDBBBB !important;}
.u-tintSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--link.link--darken:hover,.u-tintSpectrum .u-baseColor--link.link--darken:focus,.u-tintSpectrum .u-baseColor--link.link--darken:active {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--link.link--dark {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:active {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--link.link--darker {color: #F8F5F5 !important;}
.u-tintSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: #939292;}
.u-tintSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: #939292;}
.u-tintSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: #939292;}
.u-tintSpectrum .svgIcon--logoWordmark {stroke: none !important; fill: #F8F5F5 !important;}
.u-tintSpectrum .svgIcon--logoMonogram {stroke: none !important; fill: #F8F5F5 !important;}
.u-tintSpectrum  .ui-h1,.u-tintSpectrum  .ui-h2,.u-tintSpectrum  .ui-h3,.u-tintSpectrum  .ui-h4,.u-tintSpectrum  .ui-brand1,.u-tintSpectrum  .ui-brand2,.u-tintSpectrum  .ui-captionStrong {color: #F8F5F5 !important; fill: #F8F5F5 !important;}
.u-tintSpectrum  .ui-body,.u-tintSpectrum  .ui-caps {color: #F8F5F5 !important; fill: #F8F5F5 !important;}
.u-tintSpectrum  .ui-summary,.u-tintSpectrum  .ui-caption {color: #939292 !important; fill: #939292 !important;}
.u-tintSpectrum .u-accentColor--borderLight {border-color: #939292 !important;}
.u-tintSpectrum .u-accentColor--borderNormal {border-color: #BDBBBB !important;}
.u-tintSpectrum .u-accentColor--borderDark {border-color: #E5E2E2 !important;}
.u-tintSpectrum .u-accentColor--iconLight .svgIcon,.u-tintSpectrum .u-accentColor--iconLight.svgIcon {fill: #939292 !important;}
.u-tintSpectrum .u-accentColor--iconNormal .svgIcon,.u-tintSpectrum .u-accentColor--iconNormal.svgIcon {fill: #BDBBBB !important;}
.u-tintSpectrum .u-accentColor--iconDark .svgIcon,.u-tintSpectrum .u-accentColor--iconDark.svgIcon {fill: #E5E2E2 !important;}
.u-tintSpectrum .u-accentColor--textNormal {color: #BDBBBB !important;}
.u-tintSpectrum .u-accentColor--hoverTextNormal:hover {color: #BDBBBB !important;}
.u-tintSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: #F8F5F5 !important;}
.u-tintSpectrum .u-accentColor--textDark {color: #F8F5F5 !important;}
.u-tintSpectrum .u-accentColor--backgroundLight {background-color: #939292 !important;}
.u-tintSpectrum .u-accentColor--backgroundNormal {background-color: #BDBBBB !important;}
.u-tintSpectrum .u-accentColor--backgroundDark {background-color: #E5E2E2 !important;}
.u-tintSpectrum .u-accentColor--buttonDark {border-color: #E5E2E2 !important; color: #F8F5F5 !important;}
.u-tintSpectrum .u-accentColor--buttonDark:hover {border-color: #F8F5F5 !important;}
.u-tintSpectrum .u-accentColor--buttonDark .icon:before,.u-tintSpectrum .u-accentColor--buttonDark .svgIcon{color: #E5E2E2 !important; fill: #E5E2E2 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: #BDBBBB !important; color: #BDBBBB !important;}
.u-tintSpectrum .u-accentColor--buttonNormal:hover {border-color: #E5E2E2 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal .icon:before,.u-tintSpectrum .u-accentColor--buttonNormal .svgIcon{color: #BDBBBB !important; fill: #BDBBBB !important;}
.u-tintSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-tintSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(17, 17, 17, 1) !important; fill: rgba(17, 17, 17, 1) !important;}
.u-tintSpectrum .u-accentColor--buttonDark.button--filled,.u-tintSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-tintSpectrum .u-accentColor--fillWhenActive.is-active {background-color: #E5E2E2 !important; border-color: #E5E2E2 !important; color: rgba(17, 17, 17, 1) !important; fill: rgba(17, 17, 17, 1) !important;}
.u-tintSpectrum .u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-tintSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: #BDBBBB !important; border-color: #BDBBBB !important; color: rgba(17, 17, 17, 1) !important; fill: rgba(17, 17, 17, 1) !important;}
.u-tintSpectrum .postArticle.is-withAccentColors .markup--user,.u-tintSpectrum .postArticle.is-withAccentColors .markup--query {color: #BDBBBB !important;}
.u-accentColor--highlightFaint {background-color: rgba(243, 240, 239, 1) !important;}
.u-accentColor--highlightStrong.is-active .svgIcon {fill: rgba(225, 223, 222, 1) !important;}
.postArticle.is-withAccentColors .markup--quote.is-other {background-color: rgba(243, 240, 239, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-other {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(243, 240, 239, 1), rgba(243, 240, 239, 1));}
.postArticle.is-withAccentColors .markup--quote.is-me {background-color: rgba(233, 231, 230, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-me {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(233, 231, 230, 1), rgba(233, 231, 230, 1));}
.postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: rgba(225, 223, 222, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(225, 223, 222, 1), rgba(225, 223, 222, 1));}
.postArticle.is-withAccentColors .markup--quote.is-selected {background-color: rgba(225, 223, 222, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-selected {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(225, 223, 222, 1), rgba(225, 223, 222, 1));}
.postArticle.is-withAccentColors .markup--highlight {background-color: rgba(225, 223, 222, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--highlight {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(225, 223, 222, 1), rgba(225, 223, 222, 1));}.u-baseColor--iconNormal.avatar-halo {fill: rgba(0, 0, 0, 0.4980392156862745) !important;}</style><style class="js-collectionStyleConstant">.u-imageBgColor {background-color: rgba(0, 0, 0, 0.24705882352941178);}
.u-imageSpectrum .u-baseColor--borderLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-baseColor--borderNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-baseColor--borderDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--iconLight .svgIcon,.u-imageSpectrum .u-baseColor--iconLight.svgIcon {fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--iconNormal .svgIcon,.u-imageSpectrum .u-baseColor--iconNormal.svgIcon {fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--iconDark .svgIcon,.u-imageSpectrum .u-baseColor--iconDark.svgIcon {fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textNormal {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textDark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textDarker {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--backgroundLight {background-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-baseColor--backgroundNormal {background-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--backgroundDark {background-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important; color: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--buttonLight:hover {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-baseColor--buttonLight .icon:before,.u-imageSpectrum .u-baseColor--buttonLight .svgIcon {color: rgba(255, 255, 255, 0.8) !important; fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--buttonDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonDark:hover {border-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonDark .icon:before,.u-imageSpectrum .u-baseColor--buttonDark .svgIcon {color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important; color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal:hover {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal .icon:before,.u-imageSpectrum .u-baseColor--buttonNormal .svgIcon {color: rgba(255, 255, 255, 0.9490196078431372) !important; fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonDark.button--filled,.u-imageSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: rgba(255, 255, 255, 1) !important; border-color: rgba(255, 255, 255, 1) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal.button--filled,.u-imageSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: rgba(255, 255, 255, 0.9490196078431372) !important; border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-baseColor--link {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--darken:hover,.u-imageSpectrum .u-baseColor--link.link--darken:focus,.u-imageSpectrum .u-baseColor--link.link--darken:active {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--dark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:active {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--darker {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .svgIcon--logoWordmark {stroke: none !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .svgIcon--logoMonogram {stroke: none !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum  .ui-h1,.u-imageSpectrum  .ui-h2,.u-imageSpectrum  .ui-h3,.u-imageSpectrum  .ui-h4,.u-imageSpectrum  .ui-brand1,.u-imageSpectrum  .ui-brand2,.u-imageSpectrum  .ui-captionStrong {color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum  .ui-body,.u-imageSpectrum  .ui-caps {color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum  .ui-summary,.u-imageSpectrum  .ui-caption {color: rgba(255, 255, 255, 0.8) !important; fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-accentColor--borderLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-accentColor--borderNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-accentColor--borderDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--iconLight .svgIcon,.u-imageSpectrum .u-accentColor--iconLight.svgIcon {fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-accentColor--iconNormal .svgIcon,.u-imageSpectrum .u-accentColor--iconNormal.svgIcon {fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--iconDark .svgIcon,.u-imageSpectrum .u-accentColor--iconDark.svgIcon {fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--textNormal {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--hoverTextNormal:hover {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--textDark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--backgroundLight {background-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-accentColor--backgroundNormal {background-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--backgroundDark {background-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark:hover {border-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark .icon:before,.u-imageSpectrum .u-accentColor--buttonDark .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: rgba(255, 255, 255, 0.8980392156862745) !important; color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal:hover {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal .icon:before,.u-imageSpectrum .u-accentColor--buttonNormal .svgIcon{color: rgba(255, 255, 255, 0.9490196078431372) !important; fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-imageSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-accentColor--buttonDark.button--filled,.u-imageSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-imageSpectrum .u-accentColor--fillWhenActive.is-active {background-color: rgba(255, 255, 255, 1) !important; border-color: rgba(255, 255, 255, 1) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-imageSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: rgba(255, 255, 255, 0.9490196078431372) !important; border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .postArticle.is-withAccentColors .markup--user,.u-imageSpectrum .postArticle.is-withAccentColors .markup--query {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--highlightFaint {background-color: rgba(255, 255, 255, 0.2) !important;}
.u-imageSpectrum .u-accentColor--highlightStrong.is-active .svgIcon {fill: rgba(255, 255, 255, 0.6) !important;}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-other {background-color: rgba(255, 255, 255, 0.2) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-other {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-me {background-color: rgba(255, 255, 255, 0.4) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-me {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.4));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-targeted {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-targeted {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-selected {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-selected {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--highlight {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--highlight {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}.u-resetSpectrum .u-tintBgColor {background-color: rgba(255, 255, 255, 1) !important;}.u-resetSpectrum .u-tintBgColor .u-fadeLeft:before {background-image: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%) !important;}.u-resetSpectrum .u-tintBgColor .u-fadeRight:after {background-image: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%) !important;}
.u-resetSpectrum .u-baseColor--borderLight {border-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--borderNormal {border-color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--borderDark {border-color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--iconLight .svgIcon,.u-resetSpectrum .u-baseColor--iconLight.svgIcon {fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--iconNormal .svgIcon,.u-resetSpectrum .u-baseColor--iconNormal.svgIcon {fill: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--iconDark .svgIcon,.u-resetSpectrum .u-baseColor--iconDark.svgIcon {fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textNormal {color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textDark {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textDarker {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--backgroundLight {background-color: rgba(0, 0, 0, 0.09803921568627451) !important;}
.u-resetSpectrum .u-baseColor--backgroundNormal {background-color: rgba(0, 0, 0, 0.2) !important;}
.u-resetSpectrum .u-baseColor--backgroundDark {background-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight {border-color: rgba(0, 0, 0, 0.2980392156862745) !important; color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight:hover {border-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight .icon:before,.u-resetSpectrum .u-baseColor--buttonLight .svgIcon {color: rgba(0, 0, 0, 0.2980392156862745) !important; fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonDark {border-color: rgba(0, 0, 0, 0.6) !important; color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonDark:hover {border-color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--buttonDark .icon:before,.u-resetSpectrum .u-baseColor--buttonDark .svgIcon {color: rgba(0, 0, 0, 0.6) !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal {border-color: rgba(0, 0, 0, 0.4980392156862745) !important; color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal:hover {border-color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal .icon:before,.u-resetSpectrum .u-baseColor--buttonNormal .svgIcon {color: rgba(0, 0, 0, 0.4980392156862745) !important; fill: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonDark.button--filled,.u-resetSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: rgba(0, 0, 0, 0.2980392156862745) !important; border-color: rgba(0, 0, 0, 0.2980392156862745) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal.button--filled,.u-resetSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: rgba(0, 0, 0, 0.2) !important; border-color: rgba(0, 0, 0, 0.2) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-baseColor--link {color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--darken:hover,.u-resetSpectrum .u-baseColor--link.link--darken:focus,.u-resetSpectrum .u-baseColor--link.link--darken:active {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--dark {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:active {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--link.link--darker {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .svgIcon--logoWordmark {stroke: none !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .svgIcon--logoMonogram {stroke: none !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum  .ui-h1,.u-resetSpectrum  .ui-h2,.u-resetSpectrum  .ui-h3,.u-resetSpectrum  .ui-h4,.u-resetSpectrum  .ui-brand1,.u-resetSpectrum  .ui-brand2,.u-resetSpectrum  .ui-captionStrong {color: rgba(0, 0, 0, 0.8) !important; fill: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum  .ui-body,.u-resetSpectrum  .ui-caps {color: rgba(0, 0, 0, 0.6) !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum  .ui-summary,.u-resetSpectrum  .ui-caption {color: rgba(0, 0, 0, 0.2980392156862745) !important; fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-accentColor--borderLight {border-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--borderNormal {border-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--borderDark {border-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--iconLight .svgIcon,.u-resetSpectrum .u-accentColor--iconLight.svgIcon {fill: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--iconNormal .svgIcon,.u-resetSpectrum .u-accentColor--iconNormal.svgIcon {fill: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--iconDark .svgIcon,.u-resetSpectrum .u-accentColor--iconDark.svgIcon {fill: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--textNormal {color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--hoverTextNormal:hover {color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--textDark {color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundLight {background-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundNormal {background-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundDark {background-color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark {border-color: rgba(0, 171, 107, 1) !important; color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark:hover {border-color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark .icon:before,.u-resetSpectrum .u-accentColor--buttonDark .svgIcon{color: rgba(28, 153, 99, 1) !important; fill: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: rgba(2, 184, 117, 1) !important; color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal:hover {border-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal .icon:before,.u-resetSpectrum .u-accentColor--buttonNormal .svgIcon{color: rgba(0, 171, 107, 1) !important; fill: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-resetSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark.button--filled,.u-resetSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-resetSpectrum .u-accentColor--fillWhenActive.is-active {background-color: rgba(28, 153, 99, 1) !important; border-color: rgba(28, 153, 99, 1) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-resetSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: rgba(0, 171, 107, 1) !important; border-color: rgba(0, 171, 107, 1) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .postArticle.is-withAccentColors .markup--user,.u-resetSpectrum .postArticle.is-withAccentColors .markup--query {color: rgba(0, 171, 107, 1) !important;}</style><div class="highlightMenu" data-action-scope="_actionscope_3"><div class="highlightMenu-inner"><div class="buttonSet"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu u-accentColor--highlightStrong js-highlightMenuQuoteButton" data-action="quote" data-action-source="quote_menu--------------------------highlight_text" data-skip-onboarding="true"><span class="svgIcon svgIcon--highlighter svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M13.7 15.964l5.204-9.387-4.726-2.62-5.204 9.387 4.726 2.62zm-.493.885l-1.313 2.37-1.252.54-.702 1.263-3.796-.865 1.228-2.213-.202-1.35 1.314-2.37 4.722 2.616z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="quote-respond" data-action-source="quote_menu--------------------------respond_text" data-skip-onboarding="true"><span class="svgIcon svgIcon--responseFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19.074 21.117c-1.244 0-2.432-.37-3.532-1.096a7.792 7.792 0 0 1-.703-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.662 0 8.457 3.5 8.457 7.803 0 2.058-.85 3.984-2.403 5.448.023.17.06.35.118.55.192.69.537 1.38 1.026 2.04.15.21.172.48.058.7a.686.686 0 0 1-.613.38h-.03z" fill-rule="evenodd"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="twitter" data-action-source="quote_menu" data-skip-onboarding="true"><span class="svgIcon svgIcon--twitterFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M21.725 5.338c-.744.47-1.605.804-2.513 1.006a3.978 3.978 0 0 0-2.942-1.293c-2.22 0-4.02 1.81-4.02 4.02 0 .32.034.63.07.94-3.31-.18-6.27-1.78-8.255-4.23a4.544 4.544 0 0 0-.574 2.01c.04 1.43.74 2.66 1.8 3.38-.63-.01-1.25-.19-1.79-.5v.08c0 1.93 1.38 3.56 3.23 3.95-.34.07-.7.12-1.07.14-.25-.02-.5-.04-.72-.07.49 1.58 1.97 2.74 3.74 2.8a8.49 8.49 0 0 1-5.02 1.72c-.3-.03-.62-.04-.93-.07A11.447 11.447 0 0 0 8.88 21c7.386 0 11.43-6.13 11.414-11.414.015-.21.01-.38 0-.578a7.604 7.604 0 0 0 2.01-2.08 7.27 7.27 0 0 1-2.297.645 3.856 3.856 0 0 0 1.72-2.23"></path></svg></span></button><div class="buttonSet-separator"></div><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--highlightMenu" data-action="highlight" data-action-source="quote_menu--------------------------privatenote_text" data-skip-onboarding="true"><span class="svgIcon svgIcon--privatenoteFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M17.662 4.552H7.346A4.36 4.36 0 0 0 3 8.898v5.685c0 2.168 1.614 3.962 3.697 4.28v2.77c0 .303.35.476.59.29l3.904-2.994h6.48c2.39 0 4.35-1.96 4.35-4.35V8.9c0-2.39-1.95-4.346-4.34-4.346zM16 14.31a.99.99 0 0 1-1.003.99h-4.994C9.45 15.3 9 14.85 9 14.31v-3.02a.99.99 0 0 1 1-.99v-.782a2.5 2.5 0 0 1 2.5-2.51c1.38 0 2.5 1.13 2.5 2.51v.782c.552.002 1 .452 1 .99v3.02z"></path><path d="M14 9.81c0-.832-.674-1.68-1.5-1.68-.833 0-1.5.84-1.5 1.68v.49h3v-.49z"></path></g></svg></span></button></div></div><div class="highlightMenu-arrowClip"><span class="highlightMenu-arrow"></span></div></div></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"36962-c17eb3e","currentUser":{"userId":"ccd238d3cb52","username":"landrzejewski.poczta","name":"Łukasz Andrzejewski","email":"landrzejewski.poczta@gmail.com","bio":"Experienced trainer with over 11 years of practice. He works actively as a consultant and programmer in the field of Java, web and mobile technologies.","imageId":"1*c4hzLnwcwH1AWd4A1wh16g.jpeg","twitterScreenName":"l_andrzejewski","createdAt":1464634142274,"lastPostCreatedAt":1477853862286,"facebookAccountId":"1776017582640299","facebookDisplayName":"Łukasz Andrzejewski","isVerified":true,"subscriberEmail":"","onboardingStatus":1,"googleAccountId":"107180052602318622095","googleEmail":"landrzejewski.poczta@gmail.com","hasPastMemberships":false,"isEnrolledInHightower":false,"isEligibleForHightower":true,"hightowerLastLockedAt":0,"isWriterProgramEnrolled":true,"isWriterProgramInvited":true,"isWriterProgramOptedOut":false,"writerProgramVersion":4,"writerProgramEnrolledAt":1551480104428,"friendLinkOnboarding":0,"hasAdditionalUnlocks":false,"hasApiAccess":false,"isQuarantined":false,"writerProgramDistributionSettingOptedIn":false},"currentUserHasUnverifiedEmail":false,"isAuthenticated":true,"isCurrentUserVerified":true,"language":"pl-pl","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.1oFW6BW-Vbv_IQOus3fL1g.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.pxJawDiqI4naXLhn6gQpyA.js","hightower":"https://cdn-static-1.medium.com/_/fp/gen-js/main-hightower.bundle.Yt-SM9PJXDik3ODqY0I7RA.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.4Ppvu2kX8uTzdX-YnW81zQ.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.G3ODpntnXLVoc9SrP10sYg.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.q8g35qlUOjMUkL6-aHBAQA.js","payments":"https://cdn-static-1.medium.com/_/fp/gen-js/main-payments.bundle.2VinvXJ9Kn-xDzCuDvCmYw.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.vP320Y5i9lhfquve3I-n7Q.js","power-readers":"https://cdn-static-1.medium.com/_/fp/gen-js/main-power-readers.bundle.ZLRL11iqWG1OfvvxDrFOag.js","pubs":"https://cdn-static-1.medium.com/_/fp/gen-js/main-pubs.bundle.e3MjIQgpJnw2QaWRFnnEYQ.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.qFH_vTQVVTQD83fmNoB81A.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":true,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1553128610119:e550d6877737","useragent":{"browser":"chrome","family":"chrome","os":"mac","version":72,"supportsDesktopEdit":true,"supportsInteract":true,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":true,"isTier1":true,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":true,"supportsVhUnits":true,"ruinsViewportSections":false,"supportsHtml5Video":true,"supportsMagicUnderlines":true,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":true,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":true,"supportsVideoSections":true,"emojiSupportLevel":5,"isSearchBot":false,"isSyndicationBot":false,"isNativeAndroid":false,"supportsScrollableMetabar":true},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv,google-one-tap","signup_services":"twitter,facebook,google,email,google-fastidv,google-one-tap","google_sign_in_android":true,"reengagement_notification_duration":3,"browsable_stream_config_bucket":"curated-topics","enable_dedicated_series_tab_api_ios":true,"enable_post_import":true,"available_monthly_plan":"60e220181034","available_annual_plan":"2c754bcc2995","disable_ios_resume_reading_toast":true,"is_not_medium_subscriber":true,"glyph_font_set":"m2","enable_branding":true,"enable_branding_fonts":true,"enable_2019_march_meter_limit_update":true,"max_premium_content_per_user_under_metering":3,"enable_automated_mission_control_triggers":true,"enable_slot_machine_ui":true,"enable_lite_profile":true,"enable_topic_lifecycle_email":true,"enable_marketing_emails":true,"enable_parsely":true,"enable_branch_io":true,"enable_ios_post_stats":true,"enable_lite_topics":true,"enable_lite_stories":true,"redis_read_write_splitting":true,"enable_tipalti_onboarding":true,"enable_annual_renewal_reminder_email":true,"enable_janky_spam_rules":"users,posts","enable_new_collaborative_filtering_data":true,"android_rating_prompt_stories_read_threshold":2,"enable_smart_meter_with_incentive":true,"stripe_v3":true,"enable_google_one_tap":true,"enable_email_sign_in_captcha":true,"enable_rito_sequence_post_recirc_query":true,"enable_primary_topic_for_mobile":true,"enable_prereg_post_post_recs":true,"store_moc_depth_in_session":true,"enable_rito_sequence_post_handler":true,"enable_march_meter_email_test":true,"enable_better_pub_post_header":true,"enable_quarantine_rules":true},"xsrfToken":"W3ehtRS3ESMf","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","fp":{"/icons/monogram-mask.svg":"https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico","faviconImageId":"1*8I-HPL0bfoIzGied-dzOvA.png","fontSets":[{"id":8,"url":"https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css"},{"id":11,"url":"https://glyph.medium.com/css/m2.css"},{"id":9,"url":"https://glyph.medium.com/css/mkt.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium-editor.3Y6xpZ-0FSdWDnPM3hSBIA.ico","glyphUrl":"https://glyph.medium.com"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"71b5a47263bb83b3\",\"ot-tracer-traceid\":\"5b4259050623a14a\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","namespace":"medium-com","scope":{"default":["public_profile","email"],"connect":["public_profile","email"],"login":["public_profile","email"],"share":["public_profile","email"]}},"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","audioContentTopicId":"3792abbd134","brandedSequenceId":"7d337ddf1941","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com","buggle":{"url":"https://buggle.medium.com","videoUrl":"https://cdn-videos-1.medium.com","audioUrl":"https://cdn-audio-1.medium.com"},"referrerType":1,"isMeteredOut":false,"meterConfig":{"maxUnlockCount":5,"windowLength":"MONTHLY"},"partnerProgramEmail":"partnerprogram@medium.com","userResearchPrompts":[{"promptId":"li_post_page","type":0,"url":"www.calendly.com"},{"promptId":"li_home_page","type":1,"url":"mediumuserfeedback.typeform.com/to/GcFjEO"},{"promptId":"li_profile_page","type":2,"url":"www.calendly.com"}],"recaptchaKey":"6LdAokEUAAAAAC7seICd4vtC8chDb3jIXDQulyUJ","signinWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"countryCode":"PL","bypassMeter":false,"branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","paypal":{"clientMode":"production","oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com/redeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"}},"collectionConfig":{"mediumOwnedAndOperatedCollectionIds":["544c7006046e // Human Parts","bcc38c8f6edf // Matter","444d13b52878 // OneZero"]}}
// ]]></script><script charset="UTF-8" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/main-base.bundle.1oFW6BW-Vbv_IQOus3fL1g.js" async=""></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"340357f21453","versionId":"940b2094cbe1","creatorId":"626db2fc9efe","creator":{"userId":"626db2fc9efe","name":"Alexey Nizhegolenko","username":"ratibor78","createdAt":1537170672648,"imageId":"1*aMCBXLrw-RxKEQCGpz5ihw.jpeg","backgroundImageId":"","bio":"Sysadmin & DevOps Engineer in Internetvikings, Stockholm.","twitterScreenName":"","socialStats":{"userId":"626db2fc9efe","usersFollowedCount":3,"usersFollowedByCount":88,"type":"SocialStats"},"social":{"userId":"ccd238d3cb52","targetUserId":"626db2fc9efe","type":"Social"},"facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"isNsfw":false,"isWriterProgramEnrolled":true,"isQuarantined":false,"type":"User"},"homeCollection":{"id":"10d1a7495d39","name":"DevOpsLinks","slug":"devopslinks","tags":["DEVOPS","CLOUD COMPUTING","AMAZON WEB SERVICES","DOCKER","KUBERNETES"],"creatorId":"919896feef7d","description":"The Must-Read Publication for Aspiring DevOps Enthusiasts","shortDescription":"The Must-Read Publication for Aspiring DevOps Enthusiasts","image":{"imageId":"1*8bmVi5Sq9m6n8sdGrp0y4w.png","filter":"","backgroundSize":"","originalWidth":636,"originalHeight":720,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":5262,"activeAt":1553107233657},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*8bmVi5Sq9m6n8sdGrp0y4w.png","filter":"","backgroundSize":"","originalWidth":636,"originalHeight":720,"strategy":"resample","height":0,"width":0},"twitterUsername":"devopslinks","facebookPageName":"devopslinks","publicEmail":"aymen@eralabs.io","sections":[{"type":2,"collectionHeaderMetadata":{"title":"DevOpsLinks","description":"Must Read Articles & Tutorials For DevOps Professionals — An eralabs Publication","backgroundImage":{},"logoImage":{"id":"1*8bmVi5Sq9m6n8sdGrp0y4w@2x.png","originalWidth":636,"originalHeight":720,"alt":"DevOpsLinks"},"alignment":1,"layout":6}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"828776add07b"}},{"type":1,"postListMetadata":{"source":1,"layout":1,"number":25,"postIds":[],"sectionHeader":"Latest"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"d158486a8e32"}},{"type":1,"postListMetadata":{"source":2,"layout":1,"number":25,"postIds":[],"sectionHeader":"Trending"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"ee40d9d21bcc"}},{"type":1,"postListMetadata":{"source":3,"layout":1,"number":4,"postIds":["8cd2afb4a448","76536c7c4909","5e4972a6a1e8","a7b0dfb24128"],"sectionHeader":"Featured DevOps Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"167d9a08f7e5"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Serverless","sectionHeader":"Stories About Serverless"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"434b3526e860"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"AWS","sectionHeader":"Stories About AWS"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"cb2bd823141b"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Kubernetes","sectionHeader":"Stories About Kubernetes"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"5333196a9494"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Docker","sectionHeader":"Stories About Docker"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"85806864d050"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Google Cloud Platform","sectionHeader":"SRE Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"93767ab41781"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Continuous Integration","sectionHeader":"Continuous Integration Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"Contributions","promoId":"31da05c6dbd4"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Istio","sectionHeader":"Istio Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"f494551eb23b"}}],"tintColor":"#FF111111","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF858484","point":0},{"color":"#FF7C7B7B","point":0.1},{"color":"#FF737171","point":0.2},{"color":"#FF696868","point":0.3},{"color":"#FF5F5E5E","point":0.4},{"color":"#FF555454","point":0.5},{"color":"#FF4A4949","point":0.6},{"color":"#FF3F3E3E","point":0.7},{"color":"#FF343333","point":0.8},{"color":"#FF272727","point":0.9},{"color":"#FF1A1A1A","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF111111","point":0},{"color":"#FF313131","point":0.1},{"color":"#FF4D4C4C","point":0.2},{"color":"#FF666565","point":0.3},{"color":"#FF7D7C7C","point":0.4},{"color":"#FF939292","point":0.5},{"color":"#FFA9A7A7","point":0.6},{"color":"#FFBDBBBB","point":0.7},{"color":"#FFD2CFCF","point":0.8},{"color":"#FFE5E2E2","point":0.9},{"color":"#FFF8F5F5","point":1}],"backgroundColor":"#FF111111"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF5F2F1","point":0},{"color":"#FFF3F0EF","point":0.1},{"color":"#FFF1EEEE","point":0.2},{"color":"#FFEFECEC","point":0.3},{"color":"#FFEDEAEA","point":0.4},{"color":"#FFEBE8E8","point":0.5},{"color":"#FFE9E7E6","point":0.6},{"color":"#FFE7E5E4","point":0.7},{"color":"#FFE5E3E2","point":0.8},{"color":"#FFE3E1E0","point":0.9},{"color":"#FFE1DFDE","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":4,"title":"AWS","url":"https://medium.com/devopslinks/aws/home","topicId":"f2ed4288e381","source":"topicId"},{"type":4,"title":"GCP","url":"https://medium.com/devopslinks/gcp/home","topicId":"36b4a8ff75b2","source":"topicId"},{"type":1,"title":"Azure","tagSlug":"azure","url":"https://medium.com/devopslinks/tagged/azure","source":"tagSlug"},{"type":4,"title":"Serverless","url":"https://medium.com/devopslinks/serverless/home","topicId":"f8994892e956","source":"topicId"},{"type":4,"title":"Kubernetes","url":"https://medium.com/devopslinks/kubernetes/home","topicId":"ce7b2c6d4ed4","source":"topicId"},{"type":6,"title":"About Us","url":"https://medium.com/devopslinks/about"},{"type":2,"title":"➡️K8S + GKE","postId":"1890e550c099","url":"https://medium.com/devopslinks/google-kubernetes-engine-explain-like-im-five-1890e550c099","source":"postId"},{"type":3,"title":"👨🏾‍💻 Learn Docker","url":"http://bit.ly/2GLAhIQ"}],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"DevOpsLinks","description":"Must Read Articles & Tutorials For DevOps Professionals — An eralabs Publication","backgroundImage":{},"logoImage":{"id":"1*8bmVi5Sq9m6n8sdGrp0y4w@2x.png","originalWidth":636,"originalHeight":720,"alt":"DevOpsLinks"},"alignment":1,"layout":6},"type":"Collection"},"homeCollectionId":"10d1a7495d39","title":"Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3","detectedLanguage":"en","latestVersion":"940b2094cbe1","latestPublishedVersion":"940b2094cbe1","hasUnpublishedEdits":false,"latestRev":3331,"createdAt":1550746721451,"updatedAt":1551688050220,"acceptedAt":0,"firstPublishedAt":1551471803801,"latestPublishedAt":1551688050220,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster…","bodyModel":{"paragraphs":[{"name":"b52d","type":3,"text":"Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3","markups":[]},{"name":"886e","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*3Iop1-wqq7saYw10D__zRA.png","originalWidth":1200,"originalHeight":354,"isFeatured":true}},{"name":"28be","type":1,"text":"Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster monitoring & collecting logs, also we’ll run some test application for utilising previously configured cluster components. After all we will implement some stress tests and will check stability of this cluster schema.","markups":[]},{"name":"7872","type":1,"text":"First and very popular tool that Kubernetes community can provide for getting some web UI and statistical data about your cluster, it’s Kubernetes Dashboard. In fact it still under developing, but even now it can provide some extra data for troubleshooting applications and managing the cluster resources also.","markups":[{"type":3,"start":136,"end":156,"href":"https://github.com/kubernetes/dashboard","title":"","rel":"","anchorType":0},{"type":1,"start":136,"end":156}]},{"name":"bf3d","type":1,"text":"It’s a bit controversial theme, is it really need to have any WEB UI for the cluster management, or using a console kubectl tool is quite enough. Well, sometimes it may be useful and complementing each other.","markups":[{"type":1,"start":116,"end":123}]},{"name":"81e7","type":1,"text":"Let’s deploy our own Kubernetes Dashboard and see then. Standard deployment will run this dashboard on localhost address only, so you’ll need to use kubectl proxy command to expose it, but it’ll be still available only on your kubectl control machine locally. This is not bad for the security reasons, but I like to have access to it outside cluster in my browser and I ready to take some risks (anyway it’s use ssl with strong token).","markups":[{"type":1,"start":21,"end":41},{"type":1,"start":149,"end":162}]},{"name":"8e5e","type":1,"text":"To use my way, you need to change a bit standard deployment file in service section. We’ll use our load balancer for exposing this dashboard on public address.","markups":[]},{"name":"e606","type":1,"text":"Login to the machine that have configured kubectl utility and create:","markups":[{"type":1,"start":42,"end":49}]},{"name":"0565","type":8,"text":"control# vi kube-dashboard.yaml","markups":[{"type":1,"start":0,"end":8}]},{"name":"3493","type":8,"text":"# Copyright 2017 The Kubernetes Authors. \n# \n# Licensed under the Apache License, Version 2.0 (the \"License\"); \n# you may not use this file except in compliance with the License. \n# You may obtain a copy of the License at \n# \n#     http://www.apache.org/licenses/LICENSE-2.0 \n# \n# Unless required by applicable law or agreed to in writing, software \n# distributed under the License is distributed on an \"AS IS\" BASIS, \n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \n# See the License for the specific language governing permissions and \n# limitations under the License. \n \n# ------------------- Dashboard Secret ------------------- # \n \napiVersion: v1 \nkind: Secret \nmetadata: \n  labels: \n    k8s-app: kubernetes-dashboard \n  name: kubernetes-dashboard-certs \n  namespace: kube-system \ntype: Opaque \n \n--- \n# ------------------- Dashboard Service Account ------------------- # \n \napiVersion: v1 \nkind: ServiceAccount \nmetadata: \n  labels: \n    k8s-app: kubernetes-dashboard \n  name: kubernetes-dashboard \n  namespace: kube-system \n \n--- \n# ------------------- Dashboard Role & Role Binding ------------------- # \n \nkind: Role \napiVersion: rbac.authorization.k8s.io/v1 \nmetadata: \n  name: kubernetes-dashboard-minimal \n  namespace: kube-system \nrules: \n  # Allow Dashboard to create 'kubernetes-dashboard-key-holder' secret. \n- apiGroups: [\"\"] \n  resources: [\"secrets\"] \n  verbs: [\"create\"] \n  # Allow Dashboard to create 'kubernetes-dashboard-settings' config map. \n- apiGroups: [\"\"] \n  resources: [\"configmaps\"] \n  verbs: [\"create\"] \n  # Allow Dashboard to get, update and delete Dashboard exclusive secrets. \n- apiGroups: [\"\"] \n  resources: [\"secrets\"] \n  resourceNames: [\"kubernetes-dashboard-key-holder\", \"kubernetes-dashboard-certs\"] \n  verbs: [\"get\", \"update\", \"delete\"] \n  # Allow Dashboard to get and update 'kubernetes-dashboard-settings' config map. \n- apiGroups: [\"\"] \n  resources: [\"configmaps\"] \n  resourceNames: [\"kubernetes-dashboard-settings\"] \n  verbs: [\"get\", \"update\"] \n  # Allow Dashboard to get metrics from heapster. \n- apiGroups: [\"\"] \n  resources: [\"services\"] \n  resourceNames: [\"heapster\"] \n  verbs: [\"proxy\"] \n- apiGroups: [\"\"] \n  resources: [\"services/proxy\"] \n  resourceNames: [\"heapster\", \"http:heapster:\", \"https:heapster:\"] \n  verbs: [\"get\"] \n \n--- \napiVersion: rbac.authorization.k8s.io/v1 \nkind: RoleBinding \nmetadata: \n  name: kubernetes-dashboard-minimal \n  namespace: kube-system \nroleRef: \n  apiGroup: rbac.authorization.k8s.io \n  kind: Role \n  name: kubernetes-dashboard-minimal \nsubjects: \n- kind: ServiceAccount \n  name: kubernetes-dashboard \n  namespace: kube-system \n \n--- \n# ------------------- Dashboard Deployment ------------------- # \n \nkind: Deployment \napiVersion: apps/v1 \nmetadata: \n  labels: \n    k8s-app: kubernetes-dashboard \n  name: kubernetes-dashboard \n  namespace: kube-system \nspec: \n  replicas: 1 \n  revisionHistoryLimit: 10 \n  selector: \n    matchLabels: \n      k8s-app: kubernetes-dashboard \n  template: \n    metadata: \n      labels: \n        k8s-app: kubernetes-dashboard \n    spec: \n      containers: \n      - name: kubernetes-dashboard \n        image: k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1 \n        ports: \n        - containerPort: 8443 \n          protocol: TCP \n        args: \n          - --auto-generate-certificates \n          # Uncomment the following line to manually specify Kubernetes API server Host \n          # If not specified, Dashboard will attempt to auto discover the API server and connect \n          # to it. Uncomment only if the default does not work. \n          # - --apiserver-host=http://my-address:port \n        volumeMounts: \n        - name: kubernetes-dashboard-certs \n          mountPath: /certs \n          # Create on-disk volume to store exec logs \n        - mountPath: /tmp \n          name: tmp-volume \n        livenessProbe: \n          httpGet: \n            scheme: HTTPS \n            path: / \n            port: 8443 \n          initialDelaySeconds: 30 \n          timeoutSeconds: 30 \n      volumes: \n      - name: kubernetes-dashboard-certs \n        secret: \n          secretName: kubernetes-dashboard-certs \n      - name: tmp-volume \n        emptyDir: {} \n      serviceAccountName: kubernetes-dashboard \n      # Comment the following tolerations if Dashboard must not be deployed on master \n      tolerations: \n      - key: node-role.kubernetes.io/master \n        effect: NoSchedule \n \n--- \n# ------------------- Dashboard Service ------------------- # \n \nkind: Service \napiVersion: v1 \nmetadata: \n  labels: \n    k8s-app: kubernetes-dashboard \n  name: kubernetes-dashboard \n  namespace: kube-system \nspec: \n  type: LoadBalancer \n  ports: \n    - port: 443 \n      targetPort: 8443 \n  selector: \n    k8s-app: kubernetes-dashboard","markups":[]},{"name":"0b1e","type":1,"text":"Then run it:","markups":[]},{"name":"e3a6","type":8,"text":"control# kubectl create -f kube-dashboard.yaml","markups":[{"type":1,"start":0,"end":8}]},{"name":"6a87","type":8,"text":"control# kubectl get svc --namespace=kube-system","markups":[{"type":1,"start":0,"end":9}]},{"name":"51d9","type":8,"text":"kubernetes-dashboard   LoadBalancer   10.96.164.141 192.168.0.240 443:31262/TCP   8h","markups":[]},{"name":"f6bd","type":1,"text":"Great, as you can see our LB added the 192.168.0.240 ip for this service, now you can try open https://192.168.0.240 to see the Kubernetes Dashboard.","markups":[{"type":3,"start":95,"end":116,"href":"https://192.168.0.240","title":"","rel":"nofollow","anchorType":0}]},{"name":"178f","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*WACfyAolr26vwZFggzL1EA.png","originalWidth":1054,"originalHeight":592}},{"name":"4aea","type":1,"text":"We can use two ways to get access in to it, using theadmin.conf file from our master node, that we previously use for configuring the kubectl or by creating a specific Service Account for it ,with security token.","markups":[{"type":10,"start":53,"end":63}]},{"name":"c19b","type":1,"text":"Lets create some admin user then:","markups":[]},{"name":"9093","type":8,"text":"control# vi kube-dashboard-admin.yaml","markups":[{"type":1,"start":0,"end":8}]},{"name":"e0be","type":8,"text":"apiVersion: v1 \nkind: ServiceAccount \nmetadata: \n  name: admin-user \n  namespace: kube-system \n--- \napiVersion: rbac.authorization.k8s.io/v1beta1 \nkind: ClusterRoleBinding \nmetadata: \n  name: admin-user \nroleRef: \n  apiGroup: rbac.authorization.k8s.io \n  kind: ClusterRole \n  name: cluster-admin \nsubjects: \n- kind: ServiceAccount \n  name: admin-user \n  namespace: kube-system","markups":[]},{"name":"c179","type":8,"text":"\ncontrol# kubectl create -f kube-dashboard-admin.yaml","markups":[{"type":1,"start":0,"end":10}]},{"name":"a814","type":8,"text":"serviceaccount/admin-user created \nclusterrolebinding.rbac.authorization.k8s.io/admin-user created","markups":[]},{"name":"843e","type":1,"text":"Then we need to get token we can use to log in:","markups":[]},{"name":"1458","type":8,"text":"control# kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}')","markups":[{"type":1,"start":0,"end":9}]},{"name":"b5a6","type":8,"text":"\nName:         admin-user-token-vfh66 \nNamespace:    kube-system \nLabels:       \x3cnone\x3e \nAnnotations:  kubernetes.io/service-account.name: admin-user \n              kubernetes.io/service-account.uid: 3775471a-3620-11e9-9800-763fc8adcb06 \n \nType:  kubernetes.io/service-account-token \n \nData \n==== \nca.crt:     1025 bytes \nnamespace:  11 bytes \ntoken:      erJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwna3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJr\ndWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VmLXRva2VuLXZmaDY2Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZ\nXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIzNzc1NDcxYS0zNjIwLTExZTktOTgwMC03Nj\nNmYzhhZGNiMDYiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06YWRtaW4tdXNlciJ9.JICASwxAJHFX8mLoSikJU1tbij4Kq2pneqAt6QCcGUizFLeSqr2R5x339ZR8W4\n9cIsbZ7hbhFXCATQcVuWnWXe2dgXP5KE8ZdW9uvq96rm_JvsZz0RZO03UFRf8Exsss6GLeRJ5uNJNCAr8No5pmRMJo-_4BKW4OFDFxvSDSS_ZJaLMqJ0LNpwH1Z09SfD8TNW7VZqax4zuTSMX_yVS\nts40nzh4-_IxDZ1i7imnNSYPQa_Oq9ieJ56Q-xuOiGu9C3Hs3NmhwV8MNAcniVEzoDyFmx4z9YYcFPCDIoerPfSJIMFIWXcNlUTPSMRA-KfjSb_KYAErVfNctwOVglgCISA","markups":[]},{"name":"f846","type":1,"text":"Now copy the token and paste it into Token field on login screen.","markups":[]},{"name":"7ffa","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*ycW0WLC4CSo-FOhPKmcU-A.png","originalWidth":1336,"originalHeight":539}},{"name":"05a7","type":1,"text":"After you login, you can explore your cluster a bit more, I like this tool.","markups":[]},{"name":"26b0","type":1,"text":"Next thing we can add for making our cluster monitoring more deep, it’s install heapster","markups":[{"type":3,"start":80,"end":88,"href":"https://github.com/kubernetes-retired/heapster","title":"","rel":"","anchorType":0},{"type":1,"start":71,"end":72},{"type":1,"start":79,"end":88}]},{"name":"2333","type":6,"text":"Heapster enables Container Cluster Monitoring and Performance Analysis for Kubernetes (versions v1.0.6 and higher), and platforms which include it.","markups":[{"type":3,"start":75,"end":85,"href":"https://github.com/kubernetes/kubernetes","title":"","rel":"","anchorType":0}]},{"name":"518c","type":1,"text":"This tool can provide us console based cluster utilisation statistic, but also it’ll add more information about node and pods resources to the Kubernetes Dashboard too.","markups":[]},{"name":"aaf1","type":1,"text":"It a bit tricky to install it on bare metal cluster, an I was need to make some investigation about why it wasn’t work from “box” but I have found the decision.","markups":[]},{"name":"1f43","type":1,"text":"So let’s go on and deploy this add-on:","markups":[]},{"name":"53ec","type":8,"text":"control# vi heapster.yaml","markups":[{"type":1,"start":0,"end":8}]},{"name":"74d8","type":8,"text":"apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: heapster\n  namespace: kube-system\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: heapster\n  namespace: kube-system\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        task: monitoring\n        k8s-app: heapster\n    spec:\n      serviceAccountName: heapster\n      containers:\n      - name: heapster\n        image: gcr.io/google_containers/heapster-amd64:v1.4.2\n        imagePullPolicy: IfNotPresent\n        command:\n        - /heapster\n        - --source=kubernetes.summary_api:''?useServiceAccount=true&kubeletHttps=true&kubeletPort=10250&insecure=true\n---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    task: monitoring\n    # For use as a Cluster add-on (https://github.com/kubernetes/kubernetes/tree/master/cluster/addons)\n    # If you are NOT using this as an addon, you should comment out this line.\n    kubernetes.io/cluster-service: 'true'\n    kubernetes.io/name: Heapster\n  name: heapster\n  namespace: kube-system\nspec:\n  ports:\n  - port: 80\n    targetPort: 8082\n  selector:\n    k8s-app: heapster\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: heapster\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: system:heapster\nsubjects:\n- kind: ServiceAccount\n  name: heapster\n  namespace: kube-system","markups":[{"type":3,"start":753,"end":820,"href":"https://github.com/kubernetes/kubernetes/tree/master/cluster/addons","title":"","rel":"nofollow","anchorType":0}]},{"name":"b9da","type":1,"text":"This is mostly standard deployment file from the Heapster community, but it differs a bit, for making it work on our cluster the “source=” string in heapster deployment has bin changed this way:","markups":[{"type":1,"start":130,"end":137}]},{"name":"5473","type":8,"text":"--source=kubernetes.summary_api:''?useServiceAccount=true&kubeletHttps=true&kubeletPort=10250&insecure=true","markups":[]},{"name":"2e63","type":1,"text":"In this description you can find all this options. I have changed the kubelet port to 10250 and disable ssl certificate checking (there was some issue with it).","markups":[{"type":3,"start":8,"end":19,"href":"https://github.com/kubernetes-retired/heapster/blob/master/docs/source-configuration.md","title":"","rel":"","anchorType":0}]},{"name":"ffab","type":1,"text":"Also we need to add permissions, to get nodes statistic, in to the Heapster RBAC role, add this few stings to the end of the role:","markups":[]},{"name":"460a","type":8,"text":"control# kubectl edit clusterrole system:heapster","markups":[{"type":1,"start":0,"end":9}]},{"name":"7ee8","type":8,"text":"......\n...","markups":[]},{"name":"b1e9","type":8,"text":"- apiGroups:\n  - \"\"\n  resources:\n  - nodes/stats\n  verbs:\n  - get","markups":[]},{"name":"559e","type":1,"text":"Finally your RBAC role must look like this:","markups":[]},{"name":"cfc5","type":8,"text":"# Please edit the object below. Lines beginning with a '#' will be ignored,\n# and an empty file will abort the edit. If an error occurs while saving this file will be\n# reopened with the relevant failures.\n#\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  annotations:\n    rbac.authorization.kubernetes.io/autoupdate: \"true\"\n  creationTimestamp: \"2019-02-22T18:58:32Z\"\n  labels:\n    kubernetes.io/bootstrapping: rbac-defaults\n  name: system:heapster\n  resourceVersion: \"6799431\"\n  selfLink: /apis/rbac.authorization.k8s.io/v1/clusterroles/system%3Aheapster\n  uid: d99065b5-36d3-11e9-a7e6-763fc8adcb06\nrules:\n- apiGroups:\n  - \"\"\n  resources:\n  - events\n  - namespaces\n  - nodes\n  - pods\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - extensions\n  resources:\n  - deployments\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - \"\"\n  resources:\n  - nodes/stats\n  verbs:\n  - get","markups":[]},{"name":"1e30","type":1,"text":"OK, now lets run a command to make sure our heapster deployment running successful.","markups":[]},{"name":"4e47","type":8,"text":"control#  kubectl top node","markups":[{"type":1,"start":0,"end":9}]},{"name":"0f86","type":8,"text":"NAME           CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%   \nkube-master1   183m         9%     1161Mi          60%       \nkube-master2   235m         11%    1130Mi          59%       \nkube-worker1   189m         4%     1216Mi          41%       \nkube-worker2   218m         5%     1290Mi          44%       \nkube-worker3   181m         4%     1305Mi          44%","markups":[]},{"name":"7c8b","type":1,"text":"Good, if you got same output it’s mean that all was done right, now lets login back to our dashboard page and check new graphs that now available.","markups":[]},{"name":"b187","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*b9mloXwgvaqaO7QEcs8KUA.jpeg","originalWidth":1865,"originalHeight":669}},{"name":"3d5c","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*L784pqTq4JIPDSDJTCq_ow.jpeg","originalWidth":1698,"originalHeight":562}},{"name":"cb67","type":1,"text":"From now we can also see the real resources utilisation for the cluster nodes, pods and so on.","markups":[]},{"name":"1cc3","type":1,"text":"If this not enough, then you can improve your statistic a bit more and add the InfluxDB+Grafana. This will add ability to draw our own Grafana dashboards then.","markups":[]},{"name":"1aed","type":1,"text":"We’ll use this InfluxDB+Grafana version of installation from the Heapster Git page, but with modification as usual. As we already have previously configured heapster deployment, the only things we need to do, it’s add Grafana and InfluxDB and change the existing heapster deployment then, to make it write metrics to Influx too.","markups":[{"type":3,"start":15,"end":31,"href":"https://github.com/kubernetes-retired/heapster/tree/master/deploy/kube-config/influxdb","title":"","rel":"","anchorType":0}]},{"name":"edc4","type":1,"text":"OK, lets move on and create InfluxDB and Grafana deployments:","markups":[]},{"name":"49e9","type":8,"text":"control# vi influxdb.yaml","markups":[{"type":1,"start":0,"end":8}]},{"name":"d868","type":8,"text":"apiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: monitoring-influxdb\n  namespace: kube-system\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        task: monitoring\n        k8s-app: influxdb\n    spec:\n      containers:\n      - name: influxdb\n        image: k8s.gcr.io/heapster-influxdb-amd64:v1.5.2\n        volumeMounts:\n        - mountPath: /data\n          name: influxdb-storage\n      volumes:\n      - name: influxdb-storage\n        emptyDir: {}\n---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    task: monitoring\n    # For use as a Cluster add-on (https://github.com/kubernetes/kubernetes/tree/master/cluster/addons)\n    # If you are NOT using this as an addon, you should comment out this line.\n    kubernetes.io/cluster-service: 'true'\n    kubernetes.io/name: monitoring-influxdb\n  name: monitoring-influxdb\n  namespace: kube-system\nspec:\n  ports:\n  - port: 8086\n    targetPort: 8086\n  selector:\n    k8s-app: influxdb","markups":[{"type":3,"start":588,"end":655,"href":"https://github.com/kubernetes/kubernetes/tree/master/cluster/addons","title":"","rel":"nofollow","anchorType":0}]},{"name":"c601","type":1,"text":"Then Grafana, also don’t forget to change the service configuration for enabling MetaLB load balancer on it, to get external IP for Grafana service.","markups":[]},{"name":"0702","type":8,"text":"control# vi grafana.yaml","markups":[{"type":1,"start":0,"end":9}]},{"name":"7351","type":8,"text":"apiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: monitoring-grafana\n  namespace: kube-system\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        task: monitoring\n        k8s-app: grafana\n    spec:\n      containers:\n      - name: grafana\n        image: k8s.gcr.io/heapster-grafana-amd64:v5.0.4\n        ports:\n        - containerPort: 3000\n          protocol: TCP\n        volumeMounts:\n        - mountPath: /etc/ssl/certs\n          name: ca-certificates\n          readOnly: true\n        - mountPath: /var\n          name: grafana-storage\n        env:\n        - name: INFLUXDB_HOST\n          value: monitoring-influxdb\n        - name: GF_SERVER_HTTP_PORT\n          value: \"3000\"\n          # The following env variables are required to make Grafana accessible via\n          # the kubernetes api-server proxy. On production clusters, we recommend\n          # removing these env variables, setup auth for grafana, and expose the grafana\n          # service using a LoadBalancer or a public IP.\n        - name: GF_AUTH_BASIC_ENABLED\n          value: \"false\"\n        - name: GF_AUTH_ANONYMOUS_ENABLED\n          value: \"true\"\n        - name: GF_AUTH_ANONYMOUS_ORG_ROLE\n          value: Admin\n        - name: GF_SERVER_ROOT_URL\n          # If you're only using the API Server proxy, set this value instead:\n          # value: /api/v1/namespaces/kube-system/services/monitoring-grafana/proxy\n          value: /\n      volumes:\n      - name: ca-certificates\n        hostPath:\n          path: /etc/ssl/certs\n      - name: grafana-storage\n        emptyDir: {}\n---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    # For use as a Cluster add-on (https://github.com/kubernetes/kubernetes/tree/master/cluster/addons)\n    # If you are NOT using this as an addon, you should comment out this line.\n    kubernetes.io/cluster-service: 'true'\n    kubernetes.io/name: monitoring-grafana\n  name: monitoring-grafana\n  namespace: kube-system\nspec:\n  # In a production setup, we recommend accessing Grafana through an external Loadbalancer\n  # or through a public IP.\n  # type: LoadBalancer\n  # You could also use NodePort to expose the service at a randomly-generated port\n  # type: NodePort\n  type: LoadBalancer\n  ports:\n  - port: 80\n    targetPort: 3000\n  selector:\n    k8s-app: grafana","markups":[{"type":3,"start":1665,"end":1732,"href":"https://github.com/kubernetes/kubernetes/tree/master/cluster/addons","title":"","rel":"nofollow","anchorType":0}]},{"name":"70bb","type":1,"text":"And create them:","markups":[]},{"name":"be4e","type":8,"text":"control# kubectl create -f influxdb.yaml","markups":[{"type":1,"start":0,"end":9}]},{"name":"30a3","type":8,"text":"deployment.extensions/monitoring-influxdb created\nservice/monitoring-influxdb created","markups":[]},{"name":"9ba5","type":8,"text":"control# kubectl create -f grafana.yaml ","markups":[{"type":1,"start":0,"end":9}]},{"name":"1b1f","type":8,"text":"deployment.extensions/monitoring-grafana created\nservice/monitoring-grafana created","markups":[]},{"name":"c075","type":1,"text":"Now it’s time to change a heapster deployment and add InfluxDB connection in to it, only one string we need to add for it:","markups":[]},{"name":"ebde","type":8,"text":"- --sink=influxdb:http://monitoring-influxdb.kube-system.svc:8086","markups":[{"type":3,"start":18,"end":65,"href":"http://monitoring-influxdb.kube-system.svc:8086","title":"","rel":"nofollow","anchorType":0}]},{"name":"e063","type":1,"text":"Edit heapster deployment:","markups":[]},{"name":"5f17","type":8,"text":"control# kubectl get deployments --namespace=kube-system","markups":[{"type":1,"start":0,"end":9}]},{"name":"8f5c","type":8,"text":"NAME                   READY   UP-TO-DATE   AVAILABLE   AGE\ncoredns                2/2     2            2           49d\nheapster               1/1     1            1           2d12h\nkubernetes-dashboard   1/1     1            1           3d21h\nmonitoring-grafana     1/1     1            1           115s\nmonitoring-influxdb    1/1     1            1           2m18s","markups":[]},{"name":"07cb","type":8,"text":"control# kubectl edit deployment heapster --namespace=kube-system","markups":[{"type":1,"start":0,"end":9}]},{"name":"7d52","type":8,"text":"... beginning bla bla bla","markups":[{"type":2,"start":0,"end":25}]},{"name":"23f4","type":8,"text":"spec:\n      containers:\n      - command:\n        - /heapster\n        - --source=kubernetes.summary_api:''?useServiceAccount=true&kubeletHttps=true&kubeletPort=10250&insecure=true\n        - --sink=influxdb:http://monitoring-influxdb.kube-system.svc:8086\n        image: gcr.io/google_containers/heapster-amd64:v1.4.2\n        imagePullPolicy: IfNotPresent","markups":[{"type":3,"start":205,"end":252,"href":"http://monitoring-influxdb.kube-system.svc:8086","title":"","rel":"nofollow","anchorType":0}]},{"name":"6d4e","type":8,"text":".... end ","markups":[{"type":2,"start":0,"end":9}]},{"name":"8688","type":1,"text":"Now let’s find the Grafana service external IP and login inside it:","markups":[]},{"name":"4c98","type":8,"text":"control# kubectl get svc --namespace=kube-system\nNAME     TYPE       CLUSTER-IP      EXTERNAL-IP PORT(S)        AGE","markups":[{"type":1,"start":0,"end":9}]},{"name":"2496","type":8,"text":"..... some other services here","markups":[]},{"name":"4e2e","type":8,"text":"monitoring-grafana     LoadBalancer   10.98.111.200    192.168.0.241   80:32148/TCP    18m","markups":[]},{"name":"b714","type":1,"text":"Open http://192.168.0.241 in your browser, with admin/admin credentials at the first time:","markups":[{"type":3,"start":5,"end":25,"href":"http://192.168.0.241","title":"","rel":"","anchorType":0}]},{"name":"7e74","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*qW0kPxoWQfkuwkkgBXnGkA.jpeg","originalWidth":1325,"originalHeight":656}},{"name":"0a16","type":1,"text":"My Grafana was empty after I have logged in, but fortunately we can get all needed dashboards from grafana.com, we need to import the number 3649 and 3646 dashboards. Choose the right data source when you’ll import them.","markups":[{"type":1,"start":99,"end":110}]},{"name":"bcc3","type":1,"text":"After this, you’ll be able to see Nodes and Pods resources utilisation and you can create own custom dashboards of course.","markups":[]},{"name":"3f5c","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*leAm0_I8fijhxsa7zQ9qZA.jpeg","originalWidth":1906,"originalHeight":822}},{"name":"9de3","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*KRNsdZn7Q-WL5dMJMzXQ0g.jpeg","originalWidth":1906,"originalHeight":822}},{"name":"48d8","type":1,"text":"Well, that’s all about monitoring for now, next things we may need, it’s storing logs from our applications and cluster . There’s few ways how we can do it, all of them described in Kubernetes documentation. Based on my own experience I prefer to have an external installations of Elasticsearch & Kibana services and only logging agent will be running on every Kubernetes worker node. This will save our cluster from any overloads, due to the big amount of logs and other problems, also it’ll be possible to get logs even if our cluster will fully degrade.","markups":[{"type":3,"start":193,"end":206,"href":"https://kubernetes.io/docs/concepts/cluster-administration/logging/","title":"","rel":"noopener","anchorType":0}]},{"name":"dbb1","type":1,"text":"Most popular log collecting stack for Kubernetes evangelists, it’s Elasticsearch, Fluentd and Kibana (EFK stack). In this example we’ll run Elasticsearch with Kibana on external node (you can use your existing ELK stack also) and will run a Fluentd inside our cluster as daemonset on each and every node, as log collecting agent.","markups":[]},{"name":"2243","type":1,"text":"I will pass out the section about creating the VM with Elasticsearch & Kibana installations, it’s a popular enough theme, so you can find a lot of documents about how to do it better, for example you can use mine article as well. Just remove the logstesh part of config from docker-compose.yml file and also remove 127.0.0.1 from the elasticsearch ports section.","markups":[{"type":3,"start":213,"end":220,"href":"https://medium.com/devopslinks/nginx-logs-monitoring-using-elk-stack-docker-4b64f46e989","title":"","rel":"","anchorType":0},{"type":1,"start":246,"end":254},{"type":1,"start":275,"end":293}]},{"name":"91ec","type":1,"text":"After finishing you must have a working elasticsearch, that listened on VM-IP:9200 port, if you need any additional protection you can configure the login:pass or secure keys, between fluentd and elasticsearch. But I often just protecting it with iptables rules.","markups":[]},{"name":"009a","type":1,"text":"Only things we left to do now, it’s create some fluentd daemonset in Kubernetes and specify the outside elasticsearch node:port address in configuration.","markups":[{"type":1,"start":118,"end":127}]},{"name":"7257","type":1,"text":"We’ll use official Kubernetes Add-On yaml configs from there, with small modifications:","markups":[{"type":3,"start":55,"end":60,"href":"https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/fluentd-elasticsearch","title":"","rel":"","anchorType":0}]},{"name":"e114","type":8,"text":"control# vi fluentd-es-ds.yaml","markups":[{"type":1,"start":0,"end":9}]},{"name":"ab56","type":8,"text":"apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: fluentd-es\n  namespace: kube-system\n  labels:\n    k8s-app: fluentd-es\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: fluentd-es\n  labels:\n    k8s-app: fluentd-es\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nrules:\n- apiGroups:\n  - \"\"\n  resources:\n  - \"namespaces\"\n  - \"pods\"\n  verbs:\n  - \"get\"\n  - \"watch\"\n  - \"list\"\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: fluentd-es\n  labels:\n    k8s-app: fluentd-es\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nsubjects:\n- kind: ServiceAccount\n  name: fluentd-es\n  namespace: kube-system\n  apiGroup: \"\"\nroleRef:\n  kind: ClusterRole\n  name: fluentd-es\n  apiGroup: \"\"\n---\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: fluentd-es-v2.4.0\n  namespace: kube-system\n  labels:\n    k8s-app: fluentd-es\n    version: v2.4.0\n    kubernetes.io/cluster-service: \"true\"\n    addonmanager.kubernetes.io/mode: Reconcile\nspec:\n  selector:\n    matchLabels:\n      k8s-app: fluentd-es\n      version: v2.4.0\n  template:\n    metadata:\n      labels:\n        k8s-app: fluentd-es\n        kubernetes.io/cluster-service: \"true\"\n        version: v2.4.0\n      # This annotation ensures that fluentd does not get evicted if the node\n      # supports critical pod annotation based priority scheme.\n      # Note that this does not guarantee admission on the nodes (#40573).\n      annotations:\n        scheduler.alpha.kubernetes.io/critical-pod: ''\n        seccomp.security.alpha.kubernetes.io/pod: 'docker/default'\n    spec:\n      priorityClassName: system-node-critical\n      serviceAccountName: fluentd-es\n      containers:\n      - name: fluentd-es\n        image: k8s.gcr.io/fluentd-elasticsearch:v2.4.0\n        env:\n        - name: FLUENTD_ARGS\n          value: --no-supervisor -q\n        resources:\n          limits:\n            memory: 500Mi\n          requests:\n            cpu: 100m\n            memory: 200Mi\n        volumeMounts:\n        - name: varlog\n          mountPath: /var/log\n        - name: varlibdockercontainers\n          mountPath: /var/lib/docker/containers\n          readOnly: true\n        - name: config-volume\n          mountPath: /etc/fluent/config.d\n      terminationGracePeriodSeconds: 30\n      volumes:\n      - name: varlog\n        hostPath:\n          path: /var/log\n      - name: varlibdockercontainers\n        hostPath:\n          path: /var/lib/docker/containers\n      - name: config-volume\n        configMap:\n          name: fluentd-es-config-v0.2.0","markups":[]},{"name":"8c62","type":1,"text":"Then we need to provide some configuration, for our fluentd:","markups":[]},{"name":"d4b7","type":8,"text":"control# vi fluentd-es-configmap.yaml","markups":[{"type":1,"start":0,"end":8}]},{"name":"3b25","type":8,"text":"kind: ConfigMap\napiVersion: v1\nmetadata:\n  name: fluentd-es-config-v0.2.0\n  namespace: kube-system\n  labels:\n    addonmanager.kubernetes.io/mode: Reconcile\ndata:\n  system.conf: |-\n    \x3csystem\x3e\n      root_dir /tmp/fluentd-buffers/\n    \x3c/system\x3e","markups":[]},{"name":"b9e3","type":8,"text":"containers.input.conf: |-\n    \x3csource\x3e\n      @id fluentd-containers.log\n      @type tail\n      path /var/log/containers/*.log\n      pos_file /var/log/es-containers.log.pos\n      tag raw.kubernetes.*\n      read_from_head true\n      \x3cparse\x3e\n        @type multi_format\n        \x3cpattern\x3e\n          format json\n          time_key time\n          time_format %Y-%m-%dT%H:%M:%S.%NZ\n        \x3c/pattern\x3e\n        \x3cpattern\x3e\n          format /^(?\x3ctime\x3e.+) (?\x3cstream\x3estdout|stderr) [^ ]* (?\x3clog\x3e.*)$/\n          time_format %Y-%m-%dT%H:%M:%S.%N%:z\n        \x3c/pattern\x3e\n      \x3c/parse\x3e\n    \x3c/source\x3e","markups":[{"type":3,"start":45,"end":48,"href":"http://twitter.com/id","title":"Twitter profile for @id","rel":"","anchorType":0},{"type":3,"start":78,"end":83,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"","anchorType":0},{"type":3,"start":247,"end":252,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"","anchorType":0}]},{"name":"a78d","type":8,"text":"# Detect exceptions in the log output and forward them as one log entry.\n    \x3cmatch raw.kubernetes.**\x3e\n      @id raw.kubernetes\n      @type detect_exceptions\n      remove_tag_prefix raw\n      message log\n      stream stream\n      multiline_flush_interval 5\n      max_bytes 500000\n      max_lines 1000\n    \x3c/match\x3e","markups":[{"type":3,"start":109,"end":112,"href":"http://twitter.com/id","title":"Twitter profile for @id","rel":"","anchorType":0},{"type":3,"start":134,"end":139,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"","anchorType":0}]},{"name":"0d99","type":8,"text":"# Concatenate multi-line logs\n    \x3cfilter **\x3e\n      @id filter_concat\n      @type concat\n      key message\n      multiline_end_regexp /\\n$/\n      separator \"\"\n    \x3c/filter\x3e","markups":[{"type":3,"start":52,"end":55,"href":"http://twitter.com/id","title":"Twitter profile for @id","rel":"","anchorType":0},{"type":3,"start":76,"end":81,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"","anchorType":0}]},{"name":"0da1","type":8,"text":"# Enriches records with Kubernetes metadata\n    \x3cfilter kubernetes.**\x3e\n      @id filter_kubernetes_metadata\n      @type kubernetes_metadata\n    \x3c/filter\x3e","markups":[{"type":3,"start":77,"end":80,"href":"http://twitter.com/id","title":"Twitter profile for @id","rel":"","anchorType":0},{"type":3,"start":114,"end":119,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"","anchorType":0}]},{"name":"6766","type":8,"text":"# Fixes json fields in Elasticsearch\n    \x3cfilter kubernetes.**\x3e\n      @id filter_parser\n      @type parser\n      key_name log\n      reserve_data true\n      remove_key_name_field true\n      \x3cparse\x3e\n        @type multi_format\n        \x3cpattern\x3e\n          format json\n        \x3c/pattern\x3e\n        \x3cpattern\x3e\n          format none\n        \x3c/pattern\x3e\n      \x3c/parse\x3e\n    \x3c/filter\x3e","markups":[{"type":3,"start":70,"end":73,"href":"http://twitter.com/id","title":"Twitter profile for @id","rel":"","anchorType":0},{"type":3,"start":94,"end":99,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"","anchorType":0},{"type":3,"start":205,"end":210,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"","anchorType":0}]},{"name":"7980","type":8,"text":"output.conf: |-\n    \x3cmatch **\x3e\n      @id elasticsearch\n      @type elasticsearch\n      @log_level info\n      type_name _doc\n      include_tag_key true\n      host 192.168.1.253\n      port 9200\n      logstash_format true\n      \x3cbuffer\x3e\n        @type file\n        path /var/log/fluentd-buffers/kubernetes.system.buffer\n        flush_mode interval\n        retry_type exponential_backoff\n        flush_thread_count 2\n        flush_interval 5s\n        retry_forever\n        retry_max_interval 30\n        chunk_limit_size 2M\n        queue_limit_length 8\n        overflow_action block\n      \x3c/buffer\x3e\n    \x3c/match\x3e","markups":[{"type":3,"start":37,"end":40,"href":"http://twitter.com/id","title":"Twitter profile for @id","rel":"noopener","anchorType":0},{"type":3,"start":61,"end":66,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"noopener","anchorType":0},{"type":3,"start":87,"end":97,"href":"http://twitter.com/log_level","title":"Twitter profile for @log_level","rel":"noopener","anchorType":0},{"type":3,"start":242,"end":247,"href":"http://twitter.com/type","title":"Twitter profile for @type","rel":"noopener","anchorType":0}]},{"name":"7ea0","type":1,"text":"This is very easy configuration, but it full enough for a quick start, it’ll collect a system and applications logs. If you’ll need something more complicated, you may read an official documentation about fluentd plugins and configs for Kubernetes.","markups":[]},{"name":"60de","type":1,"text":"Now let’s create a fluentd daemonset in our cluster:","markups":[]},{"name":"0e21","type":8,"text":"control# kubectl create -f fluentd-es-ds.yaml","markups":[{"type":1,"start":0,"end":8}]},{"name":"dbab","type":8,"text":"serviceaccount/fluentd-es created\nclusterrole.rbac.authorization.k8s.io/fluentd-es created\nclusterrolebinding.rbac.authorization.k8s.io/fluentd-es created\ndaemonset.apps/fluentd-es-v2.4.0 created","markups":[]},{"name":"ad1b","type":8,"text":"control# kubectl create -f fluentd-es-configmap.yaml","markups":[{"type":1,"start":0,"end":9}]},{"name":"52e8","type":8,"text":"configmap/fluentd-es-config-v0.2.0 created","markups":[]},{"name":"3f13","type":1,"text":"Make sure that all fluentd pods and other resources was started OK, and open Kibana then, in Kibana you need to find and add new index from fluentd. If you’ll find some, that’s mean everything was done right, if nope then check previous steps and recreate daemonset or edit configmap:","markups":[]},{"name":"597e","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*wKOkSRCoEWVPAaBqaUnfAw.jpeg","originalWidth":1913,"originalHeight":659}},{"name":"9752","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*GlpYTuYj3DzSPsiqB3pi5Q.jpeg","originalWidth":1922,"originalHeight":894}},{"name":"e8fc","type":1,"text":"Great, now after we start getting some logs from our cluster, we can create any kind of dashboards we want. Well, of course it’s a very usual configuration so you may need to change it for your specific purposes. The main goal was to show the way how it can be done.","markups":[]},{"name":"89c9","type":1,"text":"After all previously done steps, we got a really good looking, production ready Kubernetes cluster. So it’s time to deploy some test application in it and see how it’ll be.","markups":[]},{"name":"b220","type":1,"text":"We can take for this example my small Python/Flask Kubyk application ,that already have a Docker container so we can take it from public docker registry. Then we need to add an external database file for this app, we’ll use our configured GlusterFS storage for it.","markups":[]},{"name":"6589","type":1,"text":"First lets create a new pvc (persistent volume claim)volume for this app, we’ll store the SQLite database with users credentials in there. We can use a previously created storage class from part 2 of this tutorial.","markups":[{"type":3,"start":90,"end":96,"href":"https://www.sqlite.org/","title":"","rel":"","anchorType":0},{"type":1,"start":24,"end":27}]},{"name":"f044","type":8,"text":"control# mkdir kubyk && cd kubyk","markups":[{"type":1,"start":0,"end":9}]},{"name":"48dd","type":8,"text":"control# vi kubyk-pvc.yaml\nkind: PersistentVolumeClaim\napiVersion: v1\nmetadata:\n  name: kubyk\n  annotations:\n    volume.beta.kubernetes.io/storage-class: \"slow\"\nspec:\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi","markups":[{"type":1,"start":0,"end":9}]},{"name":"8bd7","type":8,"text":"control# kubectl create -f kubyk-pvc.yaml","markups":[{"type":1,"start":0,"end":9}]},{"name":"f5ff","type":1,"text":"After we have create a new PVC for our app we ready to deploy it.","markups":[]},{"name":"4526","type":8,"text":"control# vi kubyk-deploy.yaml ","markups":[{"type":1,"start":0,"end":8}]},{"name":"91ca","type":8,"text":"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: kubyk-deployment\nspec:\n  selector:\n    matchLabels:\n      app: kubyk\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: kubyk\n    spec:\n      containers:\n      - name: kubyk\n        image: ratibor78/kubyk\n        ports:\n        - containerPort: 80\n        volumeMounts:\n        - name: kubyk-db\n          mountPath: /kubyk/sqlite\n      volumes:\n      - name: kubyk-db\n        persistentVolumeClaim:\n          claimName: kubyk","markups":[]},{"name":"0d49","type":8,"text":"control# vi kubyk-service.yaml ","markups":[{"type":1,"start":0,"end":8}]},{"name":"f21f","type":8,"text":"apiVersion: v1\nkind: Service\nmetadata:\n  name: kubyk\nspec:\n  type: LoadBalancer\n  selector:\n    app: kubyk\n  ports:\n  - port: 80\n    name: http","markups":[]},{"name":"6400","type":1,"text":"Now lets create deployment and service:","markups":[]},{"name":"c659","type":8,"text":"control# kubectl create -f kubyk-deploy.yaml ","markups":[{"type":1,"start":0,"end":9}]},{"name":"408f","type":8,"text":"deployment.apps/kubyk-deployment created","markups":[]},{"name":"9281","type":8,"text":"control# kubectl create -f kubyk-service.yaml ","markups":[{"type":1,"start":0,"end":9}]},{"name":"ee40","type":8,"text":"service/kubyk created","markups":[]},{"name":"6701","type":1,"text":"Check the new assigned IP for service and pod status also:","markups":[]},{"name":"1565","type":8,"text":"control# kubectl get po","markups":[{"type":1,"start":0,"end":9}]},{"name":"34de","type":8,"text":"NAME                                READY   STATUS    RESTARTS AGE\nglusterfs-2wxk7                     1/1     Running   1        2d1h\nglusterfs-5dtdj                     1/1     Running   1        41d\nglusterfs-zqxwt                     1/1     Running   0        2d1h\nheketi-b8c5f6554-f92rn              1/1     Running   0        8d\nkubyk-deployment-75d5447d46-jrttp   1/1     Running   0        11s","markups":[]},{"name":"c441","type":8,"text":"control# kubectl get svc\nNAME  TYPE     CLUSTER-IP       EXTERNAL-IP    PORT(S)        AGE","markups":[{"type":1,"start":0,"end":9}]},{"name":"6dcd","type":8,"text":"... some text.. \nkubyk LoadBalancer 10.109.105.224   192.168.0.242 80:32384/TCP 10s","markups":[]},{"name":"cf09","type":1,"text":"OK, it seems that we have successfully start our new application, if we’ll open http://192.168.0.242 IP in browser, we must see the login page of this app. We can use admin/admin credentials for login in, but if we try to login on this stage, we’ll get a error, as there is no database available yet.","markups":[{"type":3,"start":80,"end":100,"href":"http://192.168.0.242","title":"","rel":"nofollow","anchorType":0}]},{"name":"77a0","type":1,"text":"There is a error log messages example from pod in Kubernetes dashboard:","markups":[]},{"name":"508f","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*l7ih-wAX-toh2aNnq_e0jQ.jpeg","originalWidth":1757,"originalHeight":824}},{"name":"0e4d","type":1,"text":"To fix this situation, we need to copy the SQlite DB file, from my git repository into the previously created pvc volume. So application can start using this database then.","markups":[]},{"name":"c709","type":8,"text":"control# git pull https://github.com/ratibor78/kubyk.git ","markups":[{"type":3,"start":18,"end":56,"href":"https://github.com/ratibor78/kubyk.git","title":"","rel":"nofollow","anchorType":0},{"type":1,"start":0,"end":9}]},{"name":"bb3e","type":8,"text":"control# kubectl cp ./kubyk/sqlite/database.db kubyk-deployment-75d5447d46-jrttp:/kubyk/sqlite","markups":[{"type":1,"start":0,"end":9}]},{"name":"34e7","type":1,"text":"We use the pod from application and kubectl cp command to copy this file into the volume.","markups":[{"type":1,"start":36,"end":47}]},{"name":"c568","type":1,"text":"Also we need grant a write access to this directory for nginx user, as in docker container, my application runs under nginx user by supervisord.","markups":[{"type":3,"start":132,"end":143,"href":"https://github.com/ratibor78/kubyk/blob/master/supervisord.conf","title":"supervisord.conf","rel":"","anchorType":0}]},{"name":"f8fc","type":8,"text":"control# kubectl exec -ti kubyk-deployment-75d5447d46-jrttp -- chown -R nginx:nginx /kubyk/sqlite/","markups":[{"type":1,"start":0,"end":9}]},{"name":"6b23","type":1,"text":"And let’s try to login one more time:","markups":[]},{"name":"8afe","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*Gqmq1mIb9fwwG6RBHjID8w.jpeg","originalWidth":1891,"originalHeight":929}},{"name":"a25e","type":1,"text":"Great, now our app is working well, and we can scale this kubyk deployment up to 3 replica for example, for putting one copy of app on one worker node. As we have created pvc volume previously, all our pods with application replicas, will use same DB, and also service will balance traffic between replicas using round robin schema.","markups":[{"type":1,"start":58,"end":63}]},{"name":"6c66","type":8,"text":"control# kubectl get deployments","markups":[{"type":1,"start":0,"end":9}]},{"name":"82e1","type":8,"text":"NAME               READY   UP-TO-DATE   AVAILABLE   AGE\nheketi             1/1     1            1           39d\nkubyk-deployment   1/1     1            1           4h5m","markups":[]},{"name":"c792","type":8,"text":"control# kubectl scale deployments kubyk-deployment --replicas=3","markups":[{"type":1,"start":0,"end":9}]},{"name":"63c2","type":8,"text":"deployment.extensions/kubyk-deployment scaled","markups":[]},{"name":"0f32","type":8,"text":"control# kubectl get po","markups":[{"type":1,"start":0,"end":9}]},{"name":"3039","type":8,"text":"NAME                                READY   STATUS    RESTARTS   AGE\nglusterfs-2wxk7                     1/1     Running   1        2d5h\nglusterfs-5dtdj                     1/1     Running   21       41d\nglusterfs-zqxwt                     1/1     Running   0        2d5h\nheketi-b8c5f6554-f92rn              1/1     Running   0        8d\nkubyk-deployment-75d5447d46-bdnqx   1/1     Running   0        26s\nkubyk-deployment-75d5447d46-jrttp   1/1     Running   0        4h7m\nkubyk-deployment-75d5447d46-wz9xz   1/1     Running   0        26s","markups":[]},{"name":"66d6","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*Llw3vjLxpMs157KMFzdgwg.jpeg","originalWidth":1909,"originalHeight":824}},{"name":"2915","type":1,"text":"Now we got one replica of our app per one worker node, so if we’ll lose some of nodes, application will still continue working. Also we got an easy type of load balancing as I said previously. Not bad as for first time.","markups":[]},{"name":"6137","type":1,"text":"Lets create some new user in our application:","markups":[]},{"name":"5fcb","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*_LNuRsTIKMxaePz_RImBsQ.jpeg","originalWidth":1909,"originalHeight":638}},{"name":"9ae5","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*OVWiFTBaDVg576S9Jjx_OQ.jpeg","originalWidth":1565,"originalHeight":759}},{"name":"c4c3","type":1,"text":"Any new requests will be processing by next pod in list, you can check this by looking in to the pods logs. For example new user will be created by application in one pod, then next pod will respond for next request and so on. As this app use same persistent volume for storing DB even if all of the replicas will disappear, all data will be in safe.","markups":[]},{"name":"f8ad","type":1,"text":"In big and complicated applications we’ll need not only dedicated volume for the DB, but also different volumes for placing static content and more else things in them.","markups":[]},{"name":"7274","type":1,"text":"Well, it seems that we almost finished with this part of tutorial, there is a lot of things I can add, because the Kubernetes theme is big and dynamically growing, but I’ll stop for now. The main goal for this articles cycle was showing the way of creating own Kubernetes cluster and I hope this was useful enough for you.","markups":[]},{"name":"93b6","type":1,"text":"P.S","markups":[{"type":1,"start":0,"end":3}]},{"name":"9a89","type":1,"text":"Stability and stress tests, of course.","markups":[]},{"name":"e58b","type":1,"text":"Cluster schema that we used in this example may continue working without 2 workers nodes, 1 master and 1 etcd node. You can shutdown them and see that our test app still working.","markups":[]},{"name":"0f73","type":1,"text":"When I wrote this tutorials, I have preparing same cluster for the production, in fact almost same scheme. At one day, when the cluster was created and some part of application was deployed in it, there was a big power supply issue in the DC and totally all of cluster servers was shut downed, like in scary movies for sysadmins. Some of servers was down for a long time and some got a file system errors after it. But when I started them all again, I was very surprising when Kubernetes cluster fully recovered. All GlusterFS volumes, all deployments has started. It shows a big potential for this technology as for me.","markups":[]},{"name":"7540","type":1,"text":"Goodbye and hope to meet you again.","markups":[]}],"sections":[{"name":"f3df","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"1*3Iop1-wqq7saYw10D__zRA.png","filter":"","backgroundSize":"","originalWidth":1200,"originalHeight":354,"strategy":"resample","height":0,"width":0},"wordCount":4198,"imageCount":15,"readingTime":17.341509433962266,"subtitle":"Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster…","userPostRelation":{"userId":"ccd238d3cb52","postId":"340357f21453","readAt":1553125202681,"readLaterAddedAt":0,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"f3df","lastReadVersionId":"940b2094cbe1","lastReadAt":1553125204815,"lastReadParagraphName":"7540","lastReadPercentage":1,"viewedAt":1553125146980,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0,"queuedAt":0,"seriesFirstViewedAt":0,"presentedCountInStream":7,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":1,"usersBySocialRecommends":[],"noIndex":false,"recommends":8,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"kubernetes","name":"Kubernetes","postCount":7419,"metadata":{"postCount":7419,"coverImage":{"id":"1*jnTKx4FOO4BMuYfo0oejXA.png","originalWidth":3600,"originalHeight":1800,"isFeatured":true}},"type":"Tag"},{"slug":"heapster","name":"Heapster","postCount":2,"metadata":{"postCount":2,"coverImage":{"id":"1*3Iop1-wqq7saYw10D__zRA.png","originalWidth":1200,"originalHeight":354,"isFeatured":true}},"type":"Tag"},{"slug":"dashboard","name":"Dashboard","postCount":1123,"metadata":{"postCount":1123,"coverImage":{"id":"1*gOwMfjZn3odOcYdCatiHCw.png","originalWidth":2500,"originalHeight":900}},"type":"Tag"},{"slug":"fluentd","name":"Fluentd","postCount":83,"metadata":{"postCount":83,"coverImage":{"id":"1*pDEkCCstGCwGqPPpNQJoGg.png","originalWidth":750,"originalHeight":350}},"type":"Tag"},{"slug":"logs","name":"Logs","postCount":309,"metadata":{"postCount":309,"coverImage":{"id":"1*Q5wdKYBa7BUWNrEsmlLRGw.png","originalWidth":1272,"originalHeight":525,"isFeatured":true}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":2,"links":{"entries":[{"url":"http://monitoring-influxdb.kube-system.svc:8086","alts":[],"httpStatus":0},{"url":"https://kubernetes.io/docs/concepts/cluster-administration/logging/","alts":[],"httpStatus":200},{"url":"http://twitter.com/log_level","alts":[],"httpStatus":404},{"url":"https://medium.com/devopslinks/nginx-logs-monitoring-using-elk-stack-docker-4b64f46e989","alts":[{"type":3,"url":"medium://p/4b64f46e989"},{"type":2,"url":"medium://p/4b64f46e989"}],"httpStatus":200},{"url":"http://twitter.com/type","alts":[{"type":2,"url":"twitter://user?screen_name=type"},{"type":3,"url":"twitter://user?screen_name=type"}],"httpStatus":200},{"url":"https://github.com/kubernetes-retired/heapster/blob/master/docs/source-configuration.md","alts":[],"httpStatus":200},{"url":"https://github.com/ratibor78/kubyk/blob/master/supervisord.conf","alts":[],"httpStatus":200},{"url":"https://github.com/ratibor78/kubyk.git","alts":[],"httpStatus":200},{"url":"https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/fluentd-elasticsearch","alts":[],"httpStatus":200},{"url":"https://github.com/kubernetes/kubernetes/tree/master/cluster/addons","alts":[],"httpStatus":200},{"url":"https://www.sqlite.org/","alts":[],"httpStatus":200},{"url":"https://github.com/kubernetes-retired/heapster","alts":[],"httpStatus":200},{"url":"https://github.com/kubernetes/dashboard","alts":[],"httpStatus":200},{"url":"https://github.com/kubernetes-retired/heapster/tree/master/deploy/kube-config/influxdb","alts":[],"httpStatus":200},{"url":"http://twitter.com/id","alts":[{"type":2,"url":"twitter://user?screen_name=id"},{"type":3,"url":"twitter://user?screen_name=id"}],"httpStatus":200},{"url":"https://github.com/kubernetes/kubernetes","alts":[],"httpStatus":200},{"url":"http://192.168.0.242","alts":[],"httpStatus":0},{"url":"https://192.168.0.240","alts":[],"httpStatus":0},{"url":"http://192.168.0.241","alts":[],"httpStatus":0}],"version":"0.3","generatedAt":1551688061026},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"","totalClapCount":57,"sectionCount":1,"readingList":0,"topics":[]},"coverless":true,"slug":"configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*3Iop1-wqq7saYw10D__zRA.png","originalWidth":1200,"originalHeight":354,"isFeatured":true}},{"name":"b52d","type":3,"text":"Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3/3","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"Hi there and welcome back to the third part of the “Kubernetes on bare metal” tutorial,in this part I wanna pay attention to the cluster…"},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453","approvedHomeCollectionId":"10d1a7495d39","approvedHomeCollection":{"id":"10d1a7495d39","name":"DevOpsLinks","slug":"devopslinks","tags":["DEVOPS","CLOUD COMPUTING","AMAZON WEB SERVICES","DOCKER","KUBERNETES"],"creatorId":"919896feef7d","description":"The Must-Read Publication for Aspiring DevOps Enthusiasts","shortDescription":"The Must-Read Publication for Aspiring DevOps Enthusiasts","image":{"imageId":"1*8bmVi5Sq9m6n8sdGrp0y4w.png","filter":"","backgroundSize":"","originalWidth":636,"originalHeight":720,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":5262,"activeAt":1553107233657},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*8bmVi5Sq9m6n8sdGrp0y4w.png","filter":"","backgroundSize":"","originalWidth":636,"originalHeight":720,"strategy":"resample","height":0,"width":0},"twitterUsername":"devopslinks","facebookPageName":"devopslinks","publicEmail":"aymen@eralabs.io","sections":[{"type":2,"collectionHeaderMetadata":{"title":"DevOpsLinks","description":"Must Read Articles & Tutorials For DevOps Professionals — An eralabs Publication","backgroundImage":{},"logoImage":{"id":"1*8bmVi5Sq9m6n8sdGrp0y4w@2x.png","originalWidth":636,"originalHeight":720,"alt":"DevOpsLinks"},"alignment":1,"layout":6}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"828776add07b"}},{"type":1,"postListMetadata":{"source":1,"layout":1,"number":25,"postIds":[],"sectionHeader":"Latest"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"d158486a8e32"}},{"type":1,"postListMetadata":{"source":2,"layout":1,"number":25,"postIds":[],"sectionHeader":"Trending"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"ee40d9d21bcc"}},{"type":1,"postListMetadata":{"source":3,"layout":1,"number":4,"postIds":["8cd2afb4a448","76536c7c4909","5e4972a6a1e8","a7b0dfb24128"],"sectionHeader":"Featured DevOps Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"167d9a08f7e5"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Serverless","sectionHeader":"Stories About Serverless"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"434b3526e860"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"AWS","sectionHeader":"Stories About AWS"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"cb2bd823141b"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Kubernetes","sectionHeader":"Stories About Kubernetes"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"5333196a9494"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Docker","sectionHeader":"Stories About Docker"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"85806864d050"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Google Cloud Platform","sectionHeader":"SRE Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"93767ab41781"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Continuous Integration","sectionHeader":"Continuous Integration Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"Contributions","promoId":"31da05c6dbd4"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Istio","sectionHeader":"Istio Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"f494551eb23b"}}],"tintColor":"#FF111111","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF858484","point":0},{"color":"#FF7C7B7B","point":0.1},{"color":"#FF737171","point":0.2},{"color":"#FF696868","point":0.3},{"color":"#FF5F5E5E","point":0.4},{"color":"#FF555454","point":0.5},{"color":"#FF4A4949","point":0.6},{"color":"#FF3F3E3E","point":0.7},{"color":"#FF343333","point":0.8},{"color":"#FF272727","point":0.9},{"color":"#FF1A1A1A","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF111111","point":0},{"color":"#FF313131","point":0.1},{"color":"#FF4D4C4C","point":0.2},{"color":"#FF666565","point":0.3},{"color":"#FF7D7C7C","point":0.4},{"color":"#FF939292","point":0.5},{"color":"#FFA9A7A7","point":0.6},{"color":"#FFBDBBBB","point":0.7},{"color":"#FFD2CFCF","point":0.8},{"color":"#FFE5E2E2","point":0.9},{"color":"#FFF8F5F5","point":1}],"backgroundColor":"#FF111111"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF5F2F1","point":0},{"color":"#FFF3F0EF","point":0.1},{"color":"#FFF1EEEE","point":0.2},{"color":"#FFEFECEC","point":0.3},{"color":"#FFEDEAEA","point":0.4},{"color":"#FFEBE8E8","point":0.5},{"color":"#FFE9E7E6","point":0.6},{"color":"#FFE7E5E4","point":0.7},{"color":"#FFE5E3E2","point":0.8},{"color":"#FFE3E1E0","point":0.9},{"color":"#FFE1DFDE","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":4,"title":"AWS","url":"https://medium.com/devopslinks/aws/home","topicId":"f2ed4288e381","source":"topicId"},{"type":4,"title":"GCP","url":"https://medium.com/devopslinks/gcp/home","topicId":"36b4a8ff75b2","source":"topicId"},{"type":1,"title":"Azure","tagSlug":"azure","url":"https://medium.com/devopslinks/tagged/azure","source":"tagSlug"},{"type":4,"title":"Serverless","url":"https://medium.com/devopslinks/serverless/home","topicId":"f8994892e956","source":"topicId"},{"type":4,"title":"Kubernetes","url":"https://medium.com/devopslinks/kubernetes/home","topicId":"ce7b2c6d4ed4","source":"topicId"},{"type":6,"title":"About Us","url":"https://medium.com/devopslinks/about"},{"type":2,"title":"➡️K8S + GKE","postId":"1890e550c099","url":"https://medium.com/devopslinks/google-kubernetes-engine-explain-like-im-five-1890e550c099","source":"postId"},{"type":3,"title":"👨🏾‍💻 Learn Docker","url":"http://bit.ly/2GLAhIQ"}],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"DevOpsLinks","description":"Must Read Articles & Tutorials For DevOps Professionals — An eralabs Publication","backgroundImage":{},"logoImage":{"id":"1*8bmVi5Sq9m6n8sdGrp0y4w@2x.png","originalWidth":636,"originalHeight":720,"alt":"DevOpsLinks"},"alignment":1,"layout":6},"type":"Collection"},"newsletterId":"","webCanonicalUrl":"https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453","mediumUrl":"https://medium.com/devopslinks/configuring-ha-kubernetes-cluster-on-bare-metal-servers-monitoring-logs-and-usage-examples-3-3-340357f21453","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isNsfw":false,"isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":0,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"type":"Post"},"mentionedUsers":[],"collaborators":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"626db2fc9efe":{"userId":"626db2fc9efe","name":"Alexey Nizhegolenko","username":"ratibor78","createdAt":1537170672648,"imageId":"1*aMCBXLrw-RxKEQCGpz5ihw.jpeg","backgroundImageId":"","bio":"Sysadmin & DevOps Engineer in Internetvikings, Stockholm.","twitterScreenName":"","socialStats":{"userId":"626db2fc9efe","usersFollowedCount":3,"usersFollowedByCount":88,"type":"SocialStats"},"social":{"userId":"ccd238d3cb52","targetUserId":"626db2fc9efe","type":"Social"},"facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"isNsfw":false,"isWriterProgramEnrolled":true,"isQuarantined":false,"type":"User"}},"Collection":{"10d1a7495d39":{"id":"10d1a7495d39","name":"DevOpsLinks","slug":"devopslinks","tags":["DEVOPS","CLOUD COMPUTING","AMAZON WEB SERVICES","DOCKER","KUBERNETES"],"creatorId":"919896feef7d","description":"The Must-Read Publication for Aspiring DevOps Enthusiasts","shortDescription":"The Must-Read Publication for Aspiring DevOps Enthusiasts","image":{"imageId":"1*8bmVi5Sq9m6n8sdGrp0y4w.png","filter":"","backgroundSize":"","originalWidth":636,"originalHeight":720,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":5262,"activeAt":1553107233657},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*8bmVi5Sq9m6n8sdGrp0y4w.png","filter":"","backgroundSize":"","originalWidth":636,"originalHeight":720,"strategy":"resample","height":0,"width":0},"twitterUsername":"devopslinks","facebookPageName":"devopslinks","publicEmail":"aymen@eralabs.io","sections":[{"type":2,"collectionHeaderMetadata":{"title":"DevOpsLinks","description":"Must Read Articles & Tutorials For DevOps Professionals — An eralabs Publication","backgroundImage":{},"logoImage":{"id":"1*8bmVi5Sq9m6n8sdGrp0y4w@2x.png","originalWidth":636,"originalHeight":720,"alt":"DevOpsLinks"},"alignment":1,"layout":6}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"828776add07b"}},{"type":1,"postListMetadata":{"source":1,"layout":1,"number":25,"postIds":[],"sectionHeader":"Latest"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"d158486a8e32"}},{"type":1,"postListMetadata":{"source":2,"layout":1,"number":25,"postIds":[],"sectionHeader":"Trending"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"ee40d9d21bcc"}},{"type":1,"postListMetadata":{"source":3,"layout":1,"number":4,"postIds":["8cd2afb4a448","76536c7c4909","5e4972a6a1e8","a7b0dfb24128"],"sectionHeader":"Featured DevOps Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"167d9a08f7e5"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Serverless","sectionHeader":"Stories About Serverless"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"434b3526e860"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"AWS","sectionHeader":"Stories About AWS"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"cb2bd823141b"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Kubernetes","sectionHeader":"Stories About Kubernetes"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"5333196a9494"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Docker","sectionHeader":"Stories About Docker"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"85806864d050"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Google Cloud Platform","sectionHeader":"SRE Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"93767ab41781"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Continuous Integration","sectionHeader":"Continuous Integration Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"Contributions","promoId":"31da05c6dbd4"}},{"type":1,"postListMetadata":{"source":4,"layout":1,"number":25,"postIds":[],"tagSlug":"Istio","sectionHeader":"Istio Stories"}},{"type":3,"promoMetadata":{"sectionHeader":"","promoId":"f494551eb23b"}}],"tintColor":"#FF111111","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF858484","point":0},{"color":"#FF7C7B7B","point":0.1},{"color":"#FF737171","point":0.2},{"color":"#FF696868","point":0.3},{"color":"#FF5F5E5E","point":0.4},{"color":"#FF555454","point":0.5},{"color":"#FF4A4949","point":0.6},{"color":"#FF3F3E3E","point":0.7},{"color":"#FF343333","point":0.8},{"color":"#FF272727","point":0.9},{"color":"#FF1A1A1A","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF111111","point":0},{"color":"#FF313131","point":0.1},{"color":"#FF4D4C4C","point":0.2},{"color":"#FF666565","point":0.3},{"color":"#FF7D7C7C","point":0.4},{"color":"#FF939292","point":0.5},{"color":"#FFA9A7A7","point":0.6},{"color":"#FFBDBBBB","point":0.7},{"color":"#FFD2CFCF","point":0.8},{"color":"#FFE5E2E2","point":0.9},{"color":"#FFF8F5F5","point":1}],"backgroundColor":"#FF111111"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF5F2F1","point":0},{"color":"#FFF3F0EF","point":0.1},{"color":"#FFF1EEEE","point":0.2},{"color":"#FFEFECEC","point":0.3},{"color":"#FFEDEAEA","point":0.4},{"color":"#FFEBE8E8","point":0.5},{"color":"#FFE9E7E6","point":0.6},{"color":"#FFE7E5E4","point":0.7},{"color":"#FFE5E3E2","point":0.8},{"color":"#FFE3E1E0","point":0.9},{"color":"#FFE1DFDE","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":4,"title":"AWS","url":"https://medium.com/devopslinks/aws/home","topicId":"f2ed4288e381","source":"topicId"},{"type":4,"title":"GCP","url":"https://medium.com/devopslinks/gcp/home","topicId":"36b4a8ff75b2","source":"topicId"},{"type":1,"title":"Azure","tagSlug":"azure","url":"https://medium.com/devopslinks/tagged/azure","source":"tagSlug"},{"type":4,"title":"Serverless","url":"https://medium.com/devopslinks/serverless/home","topicId":"f8994892e956","source":"topicId"},{"type":4,"title":"Kubernetes","url":"https://medium.com/devopslinks/kubernetes/home","topicId":"ce7b2c6d4ed4","source":"topicId"},{"type":6,"title":"About Us","url":"https://medium.com/devopslinks/about"},{"type":2,"title":"➡️K8S + GKE","postId":"1890e550c099","url":"https://medium.com/devopslinks/google-kubernetes-engine-explain-like-im-five-1890e550c099","source":"postId"},{"type":3,"title":"👨🏾‍💻 Learn Docker","url":"http://bit.ly/2GLAhIQ"}],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"DevOpsLinks","description":"Must Read Articles & Tutorials For DevOps Professionals — An eralabs Publication","backgroundImage":{},"logoImage":{"id":"1*8bmVi5Sq9m6n8sdGrp0y4w@2x.png","originalWidth":636,"originalHeight":720,"alt":"DevOpsLinks"},"alignment":1,"layout":6},"type":"Collection"}},"Social":{"626db2fc9efe":{"userId":"ccd238d3cb52","targetUserId":"626db2fc9efe","type":"Social"}},"SocialStats":{"626db2fc9efe":{"userId":"626db2fc9efe","usersFollowedCount":3,"usersFollowedByCount":88,"type":"SocialStats"}}}})
// ]]></script><script id="parsely-cfg" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/p.js"></script><script type="text/javascript">(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent".split(" "), 0); branch.init('key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm', {'no_journeys': true, 'disable_exit_animation': true, 'disable_entry_animation': true, 'tracking_disabled':  false }, function(err, data) {});</script><div class="surface-scrollOverlay"></div><script charset="UTF-8" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/main-common-async.bundle.pxJawDiqI4naXLhn6gQpyA.js"></script><script charset="UTF-8" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/main-notes.bundle.q8g35qlUOjMUkL6-aHBAQA.js"></script></body><div><div class="gr_-editor gr-iframe-first-load" style="display: none;"><div class="gr_-editor_back"></div><iframe class="gr_-ifr gr-_dialog-content" src="./Configuring HA Kubernetes cluster on bare metal servers, monitoring, logs and usage examples. 3_3_files/saved_resource.html"></iframe></div></div><grammarly-card><div></div></grammarly-card><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html>